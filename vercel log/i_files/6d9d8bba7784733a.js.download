;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="f571de47-275f-d2bc-6cd5-636ba65459aa")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,106227,e=>{"use strict";e.s(["default",0,function(e){if("string"!=typeof e)throw TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}])},6774523,e=>{"use strict";e.s(["getUnsafeKey",0,(e,t)=>t?`${t}-${e}`:e])},9130958,e=>{"use strict";var t=e.i(106227),a=e.i(6774523);e.s(["highlightString",0,function(e,i){let r=Array.isArray(i),n=r?i.map(e=>(0,t.default)(e)).join("|"):(0,t.default)(i);return e.split(RegExp(`(${n})`,"gi")).map((e,t)=>({id:(0,a.getUnsafeKey)(t,e),highlighted:r?i.map(e=>e.toLowerCase()).includes(e.toLowerCase()):e.toLowerCase()===i.toLowerCase(),text:e}))}])},4743851,e=>{e.v({match:"highlight-text-module__e16_XW__match"})},4837983,e=>{"use strict";var t=e.i(1381818),a=e.i(1053524),i=e.i(9130958),r=e.i(4743851);let n=(0,a.memo)(function(e){let{className:n,text:l,search:s,as:o="div"}=e,d=(0,a.useMemo)(()=>{var e,a;let n=(Array.isArray(s)?s:[s]).filter(e=>e.length>1);if(e=l,a=n,0===e.length||e.length>4096||0===a.length)return l;let o=l.split(/(?<temp1><a[^>]*>.*?<\/a>)/),d=0,c=[];for(let e=0;e<o.length;e++){let a=o[e];if(a.startsWith("<a")){d+=1,c.push(a);continue}let s=(0,i.highlightString)(a,n);if(d+s.length>500)return l;d+=s.length;let u=s.map(a=>a.highlighted?(0,t.jsx)("mark",{className:r.default.match,children:a.text},`${a.id}-${e}`):a.text);c.push(u)}return c.flat()},[l,s]);return(0,t.jsx)(o,{className:n,children:d})});n.displayName="HighlightText",e.s(["HighlightText",0,n])},4031249,e=>{"use strict";let t=e.i(1053524).createContext({search:"",setSearch:()=>void 0});t.displayName="SettingsSearchContext",e.s(["SettingsSearchContext",0,t])},6239252,e=>{"use strict";var t=e.i(1381818),a=e.i(1053524),i=e.i(4837983),r=e.i(4031249);e.s(["SearchContextHighlighter",0,function(e){let{children:n,as:l="span"}=e,{search:s}=(0,a.useContext)(r.SettingsSearchContext);return(0,t.jsx)(i.HighlightText,{as:l,search:s,text:[n].flat().join("")})}])},8449001,e=>{"use strict";var t=e.i(1381818),a=e.i(4004502),i=e.i(9544652);e.s(["DisabledWall",0,function(){return(0,i.useDisabled)()?(0,t.jsx)("div",{className:"geist-disabled-wall","data-testid":(0,a.tid)("fieldset","disabled"),"data-version":"v1"}):null}])},2807882,e=>{e.v({action:"fieldset-module__OIkhoW__action",actions:"fieldset-module__OIkhoW__actions",borderless:"fieldset-module__OIkhoW__borderless",content:"fieldset-module__OIkhoW__content",disabled:"fieldset-module__OIkhoW__disabled",error:"fieldset-module__OIkhoW__error",errorBorder:"fieldset-module__OIkhoW__errorBorder",fieldset:"fieldset-module__OIkhoW__fieldset",footer:"fieldset-module__OIkhoW__footer",full:"fieldset-module__OIkhoW__full",highlight:"fieldset-module__OIkhoW__highlight",noBottomPadding:"fieldset-module__OIkhoW__noBottomPadding",shadow:"fieldset-module__OIkhoW__shadow",status:"fieldset-module__OIkhoW__status",tabsRow:"fieldset-module__OIkhoW__tabsRow",title:"fieldset-module__OIkhoW__title",warning:"fieldset-module__OIkhoW__warning",warningBorder:"fieldset-module__OIkhoW__warningBorder"})},8517043,e=>{"use strict";var t=e.i(1381818),a=e.i(9722978),i=e.i(9544652),r=e.i(2807882);e.s(["Fieldset",0,function(e){let{className:n,disabled:l,children:s,hasShadow:o,borderlessTabs:d,type:c,highlight:u,...m}=e;return(0,t.jsx)("div",{className:(0,a.clsx)(r.default.fieldset,n,{[String(r.default.borderless)]:d,[String(r.default.shadow)]:o,[String(r.default.errorBorder)]:"error"===c,[String(r.default.warningBorder)]:"warning"===c,"ring-2 ring-blue-500":u}),...m,"data-geist-fieldset":"","data-version":"v1",children:(0,t.jsx)(i.DisabledContext.Provider,{value:l??!1,children:s})})}])},7137884,e=>{"use strict";var t=e.i(1381818),a=e.i(9722978),i=e.i(9544652),r=e.i(2807882),n=e.i(8449001);e.s(["FieldsetContent",0,function(e){let{disabled:l,disabledWall:s=!0,children:o,noPadding:d,noBottomPadding:c,className:u}=e,m=(0,i.useDisabled)(l);return(0,t.jsx)(i.DisabledContext.Provider,{value:m,children:(0,t.jsxs)("div",{className:(0,a.clsx)(r.default.content,u,{[String(r.default.disabled)]:m,"geist-disabled":m,[String(r.default.full)]:d,[String(r.default.noBottomPadding)]:c}),"data-geist-fieldset-content":"",children:[s?(0,t.jsx)(n.DisabledWall,{}):null,o]})})}])},1232681,e=>{"use strict";var t=e.i(1381818),a=e.i(1053524),i=e.i(9722978),r=e.i(4004502),n=e.i(9544652),l=e.i(2807882),s=e.i(8449001);function o(e){let{disabled:a,children:o,className:d,highlight:c}=e,u=(0,n.useDisabled)(a);return(0,t.jsx)(n.DisabledContext.Provider,{value:u,children:(0,t.jsxs)("footer",{className:(0,i.clsx)(l.default.footer,d,{[String(l.default.disabled)]:u,[String(l.default.highlight)]:c,"geist-disabled":u}),"data-geist-fieldset-footer":"","data-testid":(0,r.tid)("geist","fieldset","footer","status"),"data-version":"v1",children:[(0,t.jsx)(s.DisabledWall,{}),o]})})}let d=e=>{let{children:a}=e;return(0,t.jsx)("div",{"data-geist-fieldset-footer-action":"",children:a})};o.Status=e=>{let{children:a,disabled:r}=e;return(0,t.jsx)("div",{className:(0,i.clsx)(l.default.status,{[String(l.default.disabled)]:r}),"data-geist-fieldset-footer-status":"",children:a})},o.Actions=e=>{let{children:r,className:n}=e;return(0,t.jsx)("div",{className:(0,i.clsx)(l.default.actions,n),"data-geist-fieldset-footer-actions":"",children:a.Children.map(r,(e,a)=>e?(0,t.jsx)(d,{children:e},a):null)})},e.s(["FieldsetFooter",0,o])},9792418,e=>{"use strict";var t=e.i(1381818),a=e.i(9722978),i=e.i(5858269),r=e.i(1344973),n=e.i(2807882);e.s(["FieldsetTitle",0,function(e){let{id:l,children:s}=e;return(0,t.jsx)(r.Text,{as:"h4",className:(0,a.clsx)(n.default.title),id:l?(0,i.default)(l):void 0,lineHeight:32,size:20,children:s})}])},3895030,e=>{"use strict";var t=e.i(1381818),a=e.i(4004502),i=e.i(9544652),r=e.i(1344973);e.s(["FieldsetSubtitle",0,function(e){let{children:n,...l}=e,s=(0,i.useDisabled)();return(0,t.jsx)(r.Text,{className:s?"disabled":"","data-testid":(0,a.tid)("geist","fieldset","subtitle"),lineHeight:24,style:{margin:"var(--geist-gap-half) 0"},...l,children:n})}])},5063443,e=>{"use strict";var t=e.i(1381818),a=e.i(2807882);e.s(["ErrorText",0,function(e){let{children:i}=e;return(0,t.jsx)("span",{className:a.default.error,"data-geist-fieldset-error":"","data-version":"v1",children:i})}])},5807088,e=>{"use strict";var t=e.i(1381818),a=e.i(1053524),i=e.i(7137884),r=e.i(8517043),n=e.i(1232681),l=e.i(5255926);let s=a.default.memo(e=>{let{height:a=79,footerHeight:s=32,extraHeight:o,noFooter:d,className:c}=e,u=~~(a/56),m=o??Math.max(0,a-56*u-8*u);return(0,t.jsxs)(r.Fieldset,{className:c,children:[(0,t.jsxs)(i.FieldsetContent,{children:[(0,t.jsx)(l.Skeleton,{boxHeight:40,width:120}),Array(u).fill(0).map((e,a)=>(0,t.jsx)(l.Skeleton,{boxHeight:56,width:250},a)),(0,t.jsx)("div",{style:{height:m}})]}),!d&&(0,t.jsx)(n.FieldsetFooter,{children:(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{style:{height:4}}),(0,t.jsx)(l.Skeleton,{boxHeight:s-8,width:200}),(0,t.jsx)("div",{style:{height:4}})]})})]})});e.s(["default",0,s])},6214931,e=>{"use strict";e.s(["TEAM_SETTINGS_NAVIGATION_TITLES",0,{general:{name:"Team Name",slug:"Team URL",avatar:"Team Avatar",previewDeploymentSuffix:"Preview Deployment Suffix",id:"Team ID",comments:"Comments",transfer:"Transfer",leaveTeam:"Leave Team",deleteTeam:"Delete Team"},billing:{plan:"Plan",paymentMethod:"Payment Method",concurrentBuilds:"Concurrent Builds",onDemandConcurrentBuilds:"On-Demand Concurrent Builds",enhancedBuildMachines:"Enhanced Build Machines",addOns:"Add-Ons",spendManagement:"Spend Management",remoteCaching:"Remote Caching",analyticsSampling:"Speed Insights Sampling",invoiceEmailRecipient:"Invoice Email Recipient",companyName:"Company Name",billingAddress:"Billing Address",invoiceLanguage:"Invoice Language",invoicePurchaseOrder:"Invoice Purchase Order",taxId:"Tax ID",monitoring:"Monitoring",marketplace:"Marketplace"},security:{auditLog:"Audit Log",environmentVariablePolicy:"Environment Variable Policies",samlSingleSignOn:"SAML Single Sign-On",mfaEnforcement:"Two-Factor Authentication Enforcement",hideIpAddresses:"IP Address Visibility",ipBlocking:"IP Blocking",gitExclusivity:"Protected Git Scopes",deploymentRetentionPolicy:"Deployment Retention Policy"},agent:{vercelAgent:"Vercel Agent"}},"TEAM_SETTINGS_TITLES",0,{general:"General",billing:"Billing",invoices:"Invoices",members:"Members",security:"Security & Privacy",deploymentProtection:"Deployment Protection",microfrontends:"Microfrontends",notifications:"My Notifications",environmentVariables:"Environment Variables",webhooks:"Webhooks",logDrains:"Log Drains",alerts:"Alerts",secureCompute:"Secure Compute",accessGroups:"Access Groups",agent:"Agent",apps:"Apps"}])},1877305,e=>{"use strict";var t=e.i(1381818),a=e.i(9792418),i=e.i(6239252);e.s(["FieldsetTitle",0,function(e){let{id:r,children:n,suffix:l}=e;return(0,t.jsx)(a.FieldsetTitle,{id:r,children:(0,t.jsxs)("div",{className:"flex flex-col items-start gap-2 @md-page:flex-row @md-page:items-center",children:[(0,t.jsx)(i.SearchContextHighlighter,{children:n}),l]})})}])},562525,e=>{"use strict";var t=e.i(1381818),a=e.i(2560270),i=e.i(1053524),r=e.i(4450569);let n=e=>{let{width:a=100,style:r}=e,n=(0,i.useMemo)(()=>({maxWidth:a,...r}),[a,r]);return(0,t.jsx)("div",{className:"h-4 w-full rounded-xs bg-gray-200",style:n})};e.s(["RedactedBar",0,n,"default",0,function(e){let{width:l=256,withChevronDown:s=!1}=e,o=(0,i.useMemo)(()=>({maxWidth:l}),[l]),d=(0,i.useMemo)(()=>({justifyContent:"space-between"}),[]);return(0,t.jsx)("div",{className:"flex h-10 w-full items-center justify-between rounded-md border border-gray-200 bg-background-100 p-[7px] px-3 text-gray-1000",style:o,children:(0,t.jsxs)(r.default,{row:!0,style:d,children:[(0,t.jsx)(n,{width:s?.5*l:.64*l}),s?(0,t.jsx)(a.ChevronDown,{}):null]})})}])},7694500,e=>{"use strict";var t=e.i(1381818),a=e.i(1053524),i=e.i(8248823),r=e.i(2504781),n=e.i(7137884),l=e.i(5063443),s=e.i(8517043),o=e.i(1232681),d=e.i(3500331),c=e.i(5323212),u=e.i(3895030),m=e.i(455575),h=e.i(9070994),p=e.i(4244280),g=e.i(7917902),x=e.i(1119178),f=e.i(1717203),b=e.i(7557283),_=e.i(6214931),y=e.i(1877305),T=e.i(562525),v=e.i(5807088);let S={au_abn:{name:"Australian Business Number (AU ABN)",placeholder:"12345678912"},au_arn:{name:"Australian Taxation Office Reference Number",placeholder:"123456789123"},br_cnpj:{name:"Brazil CNPJ number",placeholder:"01.234.456/5432-10"},br_cpf:{name:"Brazil CPF number",placeholder:"123.456.789-87"},bg_uic:{name:"Bulgaria Unified Identification Code",placeholder:"123456789"},ca_bn:{name:"Canada BN",placeholder:"123456789"},ca_gst_hst:{name:"Canada GST/HST number",placeholder:"123456789RT0002"},ca_pst_bc:{name:"Canadian PST number (British Columbia)",placeholder:"PST-1234-5678"},ca_pst_mb:{name:"Canadian PST number (Manitoba)",placeholder:"123456-7"},ca_pst_sk:{name:"Canadian PST number (Saskatchewan)",placeholder:"1234567"},ca_qst:{name:"Canadian QST number (Québec)",placeholder:"1234567890TQ1234"},cl_tin:{name:"Chilean TIN",placeholder:"12.345.678-K"},eg_tin:{name:"Egyptian Tax Identification Number",placeholder:"123456789"},eu_vat:{name:"EU VAT number",placeholder:"DE000000000"},eu_oss_vat:{name:"European One Stop Shop VAT number for non-Union scheme",placeholder:"EU123456789"},ge_vat:{name:"Georgian VAT",placeholder:"123456789"},hk_br:{name:"Hong Kong BR number",placeholder:"12345678"},hu_tin:{name:"Hungary tax number (adószám)",placeholder:"12345678-1-23"},is_vat:{name:"Icelandic VAT",placeholder:"123456"},id_npwp:{name:"Indonesian NPWP number",placeholder:"12.345.678.9-012.345"},in_gst:{name:"Indian GST number",placeholder:"12ABCDE3456FGZH"},il_vat:{name:"Israel VAT",placeholder:"000012345"},jp_cn:{name:"Japanese Corporate Number (*Hōjin Bangō*)",placeholder:"1234567891234"},jp_rn:{name:"Japanese Registered Foreign Businesses' Registration Number (*Tōroku Kokugai Jigyōsha no Tōroku Bangō*)",placeholder:"12345"},jp_trn:{name:"Japanese Tax Registration Number (*Tōroku Bangō*)",placeholder:"T1234567891234"},ke_pin:{name:"Kenya Revenue Authority Personal Identification Number",placeholder:"P000111111A"},li_uid:{name:"Liechtensteinian UID number",placeholder:"CHE123456789"},my_frp:{name:"Malaysian FRP number",placeholder:"12345678"},my_itn:{name:"Malaysian ITN",placeholder:"C 1234567890"},my_sst:{name:"Malaysian SST number",placeholder:"A12-3456-78912345"},mx_rfc:{name:"Mexican RFC number",placeholder:"ABC010203AB9"},nz_gst:{name:"New Zealand GST number",placeholder:"123456789"},no_vat:{name:"Norwegian VAT number",placeholder:"123456789MVA"},ph_tin:{name:"Philippines Tax Identification Number",placeholder:"123456789012"},ru_inn:{name:"Russian INN",placeholder:"1234567891"},ru_kpp:{name:"Russian KPP",placeholder:"123456789"},sa_vat:{name:"Saudi Arabia VAT",placeholder:"123456789012345"},sg_gst:{name:"Singaporean GST",placeholder:"M12345678X"},sg_uen:{name:"Singaporean UEN",placeholder:"123456789F"},si_tin:{name:"Slovenia tax number (davčna številka)",placeholder:"12345678"},za_vat:{name:"South African VAT number",placeholder:"4123456789"},kr_brn:{name:"South Korean BRN",placeholder:"123-45-67890"},es_cif:{name:"Spanish NIF number",placeholder:"A12345678"},ch_vat:{name:"Switzerland VAT number",placeholder:"CHE-123.456.789 MWST"},tw_vat:{name:"Taiwanese VAT",placeholder:"12345678"},th_vat:{name:"Thai VAT",placeholder:"1234567891234"},tr_tin:{name:"Turkish Tax Identification Number",placeholder:"0123456789"},ua_vat:{name:"Ukrainian VAT",placeholder:"123456789"},ae_trn:{name:"United Arab Emirates TRN",placeholder:"123456789012345"},gb_vat:{name:"United Kingdom VAT number",placeholder:"GB123456789"},us_ein:{name:"United States EIN",placeholder:"12-3456789"},ad_nrt:{name:"Andorran NRT number",placeholder:"A-123456-Z"},ar_cuit:{name:"Argentinian tax ID number",placeholder:"12-3456789-01"},bo_tin:{name:"Bolivian tax ID",placeholder:"123456789"},cn_tin:{name:"Chinese tax ID",placeholder:"123456789012345678"},co_nit:{name:"Colombian NIT number",placeholder:"123.456.789-0"},cr_tin:{name:"Costa Rican tax ID",placeholder:"1-234-567890"},do_rcn:{name:"Dominican RCN number",placeholder:"123-4567890-1"},ec_ruc:{name:"Ecuadorian RUC number",placeholder:"1234567890001"},pe_ruc:{name:"Peruvian RUC number",placeholder:"12345678901"},ro_tin:{name:"Romanian tax ID number",placeholder:"1234567890123"},sv_nit:{name:"El Salvadorian NIT number",placeholder:"1234-567890-123-4"},rs_pib:{name:"Serbian PIB number",placeholder:"123456789"},uy_ruc:{name:"Uruguayan RUC number",placeholder:"123456789012"},ve_rif:{name:"Venezuelan RIF number",placeholder:"A-12345678-9"},vn_tin:{name:"Vietnamese tax ID number",placeholder:"1234567890"}},I="eu_vat";function w(){let e=(0,g.useAccount)(),{can:d}=(0,f.default)(),{user:c,team:v}=e,w=v||c,C=w?.billing?.tax||null,[A,k]=(0,a.useState)(null),[P,E]=(0,a.useState)(!1),[N,D]=(0,a.useState)(C?.id||""),[B,R]=(0,a.useState)(C?.type&&S[C.type]?C.type:I),F=(0,m.useToasts)(),O=(0,a.useCallback)(async t=>{t.preventDefault();try{k(null),E(!0);let t=S[B],a=t?.original||B,i=N?{id:N,type:a}:null,r=new URLSearchParams(v?{teamId:v.id}:{}),n=await (0,h.default)(`${p.API_STRIPE_SETTINGS}?${r}`,{method:"PATCH",body:JSON.stringify({tax:i})});if(n.error)throw Error(n.error.message||"Unexpected error. Please try again later.");e.mutate(),F.success("Your tax ID has been updated.")}catch(e){k((0,i.errorToString)(e))}finally{E(!1)}},[v,B,N,e,F]),M=d(b.Action.Update,b.Resource.BillingTaxId),V=d(b.Action.Read,b.Resource.BillingTaxId);return(0,t.jsx)("div",{children:(0,t.jsx)("form",{onSubmit:(0,x.promiseToCallback)(O),children:(0,t.jsxs)(s.Fieldset,{disabled:!M,children:[(0,t.jsxs)(n.FieldsetContent,{children:[(0,t.jsx)(y.FieldsetTitle,{id:_.TEAM_SETTINGS_NAVIGATION_TITLES.billing.taxId,children:_.TEAM_SETTINGS_NAVIGATION_TITLES.billing.taxId}),(0,t.jsx)(u.FieldsetSubtitle,{children:"If you would like your invoice to render a specific tax ID, enter it here."}),V?(0,t.jsx)(j,{disabled:P||!M,onSetTaxIdType:R,onSetTaxValue:D,taxIdType:B,taxIdValue:N}):(0,t.jsxs)("div",{className:"flex flex-row items-stretch justify-start gap-2 flex-initial",children:[(0,t.jsx)(T.default,{width:196,withChevronDown:!0}),(0,t.jsx)(T.default,{width:196})]})]}),(0,t.jsxs)(o.FieldsetFooter,{disabled:!1,highlight:!M,children:[(0,t.jsx)(o.FieldsetFooter.Status,{children:A&&A?(0,t.jsx)(l.ErrorText,{children:A}):M?"Countries that do not use Tax IDs are not listed.":"You need additional information to manage your tax ID information on your invoice."}),M?(0,t.jsx)(o.FieldsetFooter.Actions,{children:(0,t.jsx)(r.Button,{loading:P,size:"small",width:P?100:80,children:P?"Saving":"Save"})}):null]})]})})})}function j(e){let{disabled:i,taxIdValue:r,taxIdType:n,onSetTaxIdType:l,onSetTaxValue:s}=e,o=(0,a.useMemo)(()=>Object.values(S).reduce((e,t)=>t?.placeholder?.length>e?.placeholder?.length?t:e,S[I])?.placeholder?.length||0,[]);return(0,t.jsxs)("div",{className:"flex flex-row items-center justify-start gap-3 flex-initial",children:[(0,t.jsx)(c.Select,{"aria-label":"Tax ID Type",disabled:i,name:"tax-id-type",onChange:e=>{l(e.target.value)},value:n,children:Object.entries(S).map(e=>{let[a,i]=e;return(0,t.jsx)("option",{value:a,children:i.name},a)})}),(0,t.jsx)(d.Input,{"aria-label":"Tax ID",disabled:i,maxLength:254,name:"tax-id-value",onChange:e=>{s(e.target.value)},placeholder:S[n]?.placeholder||"",value:r,width:`${o+16}ch`})]})}e.s(["DEFAULT_TAX_ID_TYPE",0,I,"TaxIDFields",0,j,"default",0,function(){let e=(0,g.useAccount)(),{isLoading:a}=(0,f.default)();return!e||e.isLoading||!e.user||a?(0,t.jsx)(v.default,{}):(0,t.jsx)(w,{})}])},4361526,e=>{"use strict";var t=e.i(8042625),a=e.i(277234),i=e.i(4244280);async function r(e,r,n){let l={address:r};return void 0!==n&&(l.taxId=n),(0,a.fetchAPI)(`${i.API_SAVE_BILLING_DETAILS}${(0,t.encode)({teamId:e})}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l),throwOnHTTPError:!0})}e.s(["saveBillingDetails",0,r])},9588822,e=>{"use strict";var t=e.i(1381818),a=e.i(1053524),i=e.i(6814182),r=e.i(633201),n=e.i(6770724),l=e.i(8248823),s=e.i(134877),o=e.i(57106),d=e.i(4030453),c=e.i(9739627),u=e.i(9318197),m=e.i(5468328),h=e.i(455575),p=e.i(3869281),g=e.i(8735244),x=e.i(3671642),f=e.i(4004502),b=e.i(5802506),_=e.i(277234),y=e.i(4244280),T=e.i(5338940),v=e.i(7917902),S=e.i(5140444),I=e.i(287495),w=e.i(6143247),j=e.i(4361526),C=e.i(7694500);function A(e,t){let[i,r]=(0,a.useState)(()=>{let a=e.current;return!!a&&a.getBoundingClientRect().width>t});return(0,a.useEffect)(()=>{let a=e.current;if(!a)return;let i=new ResizeObserver(e=>{0===e.length||r(Math.round(e[0].contentRect.width)>t)});return i.observe(a),()=>i.disconnect()},[e,t]),i}let k=["rate_limit_error","invalid_request_error","api_error","api_connection_error"],P=new Map;function E(e,t){return{name:e?.name??t?.billing?.name??void 0,email:e?.email??t?.billing?.email??void 0,address:{line1:t?.billing?.address?.line1,line2:t?.billing?.address?.line2,city:t?.billing?.address?.city,state:t?.billing?.address?.state,postal_code:t?.billing?.address?.postalCode,country:t?.billing?.address?.country}}}e.s(["BillingForm",0,function(e){let{error:r,stripeMode:n,makeDefaultBillingAddress:l,setMakeDefaultBillingAddress:s,makeDefaultPaymentMethod:h,setMakeDefaultPaymentMethod:b,showSetDefaultPayment:_=!1,backgroundClassName:y,onReady:T,showTaxIdFieldIfNecessary:I,captureTaxId:j}=e,[k,P]=(0,a.useState)(!0),[N,D]=(0,a.useState)(!0),[B,R]=(0,a.useState)(!0),{account:F}=(0,v.useAccount)(),{user:O}=(0,S.useUser)(),[M,V]=(0,a.useState)(C.DEFAULT_TAX_ID_TYPE),[L,W]=(0,a.useState)(""),[$,U]=(0,a.useState)(!!F?.billing?.address?.country&&"us"===F.billing.address.country.toLowerCase()),G=(0,a.useMemo)(()=>!!I&&!!l&&!$,[I,l,$]);(0,a.useEffect)(()=>{k||N||requestAnimationFrame(()=>{R(!1),T?.()})},[k,N,T]);let H=(0,a.useRef)(null),z=(0,a.useRef)(null),K=A(z,400),J=A(z,742),Y=(0,a.useCallback)(()=>{V(C.DEFAULT_TAX_ID_TYPE),W("")},[]);return(0,a.useEffect)(()=>{j?.({type:M,value:L})},[j,M,L]),(0,a.useEffect)(()=>{r&&H.current&&!k&&!N&&H.current.scrollIntoView({behavior:"smooth"})},[r,H,k,N]),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-5 flex-initial",children:[(0,t.jsxs)("div",{ref:z,children:[(0,t.jsxs)("div",{className:(0,w.cn)("flex flex-col items-stretch justify-start gap-5 flex-initial relative min-h-[365px]",{"min-h-[445px]":K,"min-h-[348px]":J}),children:["test"===n?(0,t.jsx)(m.Tooltip,{style:{position:"absolute",right:0,top:0,zIndex:100},text:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"text-copy-14 text-gray-900",children:"This is a Test Mode form. You can use test cards and will never be charged real money."}),(0,t.jsx)(o.Link,{color:"accents-1",external:!0,href:"https://www.notion.so/vercel/How-to-test-Billing-Stripe-9df4807475824fefaea5f0e7c3253288",children:"Learn More"})]}),children:(0,t.jsx)(c.Image,{alt:"Stripe Icon",height:19,srcDark:"/front/dashboard/stripe-test-mode.png",srcLight:"/front/dashboard/stripe-test-mode.png",width:19})}):null,(0,t.jsx)(i.PaymentElement,{onReady:()=>P(!1),options:{layout:"tabs",defaultValues:{billingDetails:E(O,F)}}}),(0,t.jsx)(i.AddressElement,{onReady:()=>D(!1),onChange:e=>{"us"===e.value.address.country.toLowerCase()?$||(U(!0),Y()):$&&U(!1)},options:{mode:"billing",display:{name:"full"},defaultValues:{name:O?.name??F?.billing?.name??void 0,address:F?.billing?.address?.country?{line1:F.billing.address.line1,line2:F.billing.address.line2,city:F.billing.address.city,state:function(e){if(e?.state)return"US"===e.country?e.state.split("-").pop():e.state}(F.billing.address),postal_code:F.billing.address.postalCode,country:F.billing.address.country}:void 0}}}),(0,t.jsx)("div",{className:(0,w.cn)("flex items-center justify-center absolute inset-0 w-[calc(100%+8px)] h-[calc(100%+8px)] -m-1 p-2",{"opacity-0 pointer-events-none":!B},y??"bg-background-200"),children:(0,t.jsx)(g.Spinner,{})})]}),r?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.Spacer,{y:.5}),(0,t.jsx)(d.Error,{"data-testid":(0,f.tid)("card-modal","error"),error:"string"==typeof r?{message:r}:r})]}):null]}),(0,t.jsxs)("div",{className:"flex flex-col items-stretch justify-start gap-3 flex-initial",children:[_?(0,t.jsx)(p.Checkbox,{checked:h,onChange:()=>b(!h),children:"Set as default payment method"}):null,(0,t.jsx)(p.Checkbox,{checked:l,onChange:()=>{Y(),s(!l)},children:"Use the billing address as my team's primary address"})]}),G?(0,t.jsx)("div",{className:"pt-4",children:(0,t.jsx)(x.Label,{style:{flex:1},value:"Tax ID (Optional)",children:(0,t.jsx)(C.TaxIDFields,{disabled:B,onSetTaxIdType:V,onSetTaxValue:W,taxIdType:M,taxIdValue:L})})}):null]}),(0,t.jsx)("div",{ref:H})]})},"useBillingForm",0,e=>{let[t,r]=(0,a.useState)(!1),[o,d]=(0,a.useState)(!1),[c,u]=(0,a.useState)(!0),[m,p]=(0,a.useState)(!1),g=t||o,[x,f]=(0,a.useState)(null),b=(0,i.useElements)(),S=(0,i.useStripe)(),{team:I,mutate:w}=(0,T.useTeam)(e?.teamOverride?.slug),{user:C,account:A}=(0,v.useAccount)(!1,e?.teamOverride?.slug),P=(0,n.useRouter)(),N=(0,a.useCallback)(()=>{f(null),r(!1)},[]),D=(0,a.useCallback)(async(t,a,i,n)=>{let o,d,c;if(!b||!S)return null;if(f(null),r(!0),(await b.submit()).error){r(!1);try{e?.formResultErrorCallback?.()}catch{}return null}try{var u;let e=t??(i?I?.id:void 0),r=e?`?teamId=${encodeURIComponent(e)}`:"",l={assign:!!a,automaticPaymentMethods:!0};r||"test"!==S._keyMode||(l.mode="test");let s=await (0,_.fetchAPI)(y.API_STRIPE_SETUP_INTENT+r,{method:"POST",body:JSON.stringify(l),throwOnHTTPError:!0});if({setupIntent:o,error:d}=await S.confirmSetup({elements:b,clientSecret:s.client_secret,confirmParams:{return_url:window.location.origin,payment_method_data:{allow_redisplay:"always",billing_details:E(C,A)}},redirect:"if_required"}),c=(u=o?.payment_method)?"string"==typeof u?u:u.id:null,a&&c&&await (0,_.fetchAPI)(y.API_STRIPE_PAYMENT_METHODS+r,{method:"POST",body:{paymentMethod:c,makeDefault:n?.makeDefault??!0},throwOnHTTPError:!0}),n?.saveBillingAddress){let t=await b.getElement("address")?.getValue(),a=t?.value.address;if(!a)return f({message:"Failed to save billing address."}),null;let i={line1:a.line1,line2:a.line2??void 0,city:a.city,state:a.state,zipCode:a.postal_code,country:a.country.toLowerCase()},r=e??(A&&"uid"in A?A.uid:void 0);if(!r)return f({message:"Failed to save billing address."}),null;await (0,j.saveBillingDetails)(r,i).catch(()=>{let e=A&&"slug"in A?A.slug:A?.username;h.toasts.message({text:"There was a problem saving your billing address. Please visit billing settings to update it.",action:"Go to Settings",onAction:()=>{P?.replace(`/${e}/~/settings/billing#billing-address`)},cancelAction:"Dismiss",preserve:!0})}),await w().catch(()=>{})}}catch(a){r(!1);let{link:e,action:t}=(0,s.getErrorLink)(a);return f({message:(0,l.errorToString)(a),sendToSentry:!1,...e?{link:e}:{},...t?{action:t}:{}}),null}if(r(!1),d){let e=k.includes(d.type);return f({message:`${(0,l.errorToString)(d)}`,sendToSentry:e,additionalStripeErrorInfo:{code:d.code,type:d.type}}),null}return o?"requires_payment_method"===o.status?(f({message:"Please try another payment method."}),null):c:(f({message:"Failed to set up payment method."}),null)},[A,C,b,w,P,S,I?.id,e?.formResultErrorCallback]),B=(0,a.useCallback)(async function(){let{teamId:e,assignCardToEntity:t=!0,shouldUseTeam:a=!0,makeDefault:i=!0,saveBillingAddress:r=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(g||!b||!S)return null;f(null),d(!0);let n=await D(e,t,a,{makeDefault:i,saveBillingAddress:r});return d(!1),n??null},[b,S,g,D]),R=!S||!b||g;return{error:x,disabled:R,submitting:R,submit:B,registerCard:D,setBillingError:f,stripe:S,reset:N,elements:b,stripeMode:S?._keyMode,makeDefaultBillingAddress:c,setMakeDefaultBillingAddress:u,makeDefaultPaymentMethod:m,setMakeDefaultPaymentMethod:p}},"withStripe",0,e=>{function n(n){let{account:l}=(0,v.useAccount)(),s=(0,I.default)(),o=(0,a.useMemo)(()=>{let e=window.getComputedStyle(document.documentElement),t=e.getPropertyValue("--ds-background-100"),a=e.getPropertyValue("--ds-gray-1000"),i=e.getPropertyValue("--ds-gray-900"),r=e.getPropertyValue("--ds-gray-alpha-400"),n=e.getPropertyValue("--ds-gray-alpha-500"),l=e.getPropertyValue("--ds-gray-alpha-600"),o=e.getPropertyValue("--ds-red-900"),d=e.getPropertyValue("--ds-red-500"),c=e.getPropertyValue("--ds-red-300"),u=e.getPropertyValue("--ds-blue-900");return{theme:s?"stripe":"night",variables:{colorBackground:t,colorPrimary:s?"#0067D6":"#52A9FF",colorText:a,fontSizeBase:"16px",fontFamily:e.getPropertyValue("--font-sans"),colorDanger:o,gridRowSpacing:"16px",gridColumnSpacing:"12px",tabIconColor:i,tabIconHoverColor:a},disableAnimations:!0,rules:{".Input":{paddingLeft:"12px",paddingRight:"12px",fontSize:"14px",color:a,backgroundColor:t,borderRadius:"6px",borderWidth:"0px",boxShadow:`0 0 0 1px ${r}`,transition:"box-shadow 150ms"},".Input.Input:focus":{boxShadow:`0 0 0 1px ${l}, 0px 0px 0px 4px ${s?"rgba(0, 0, 0, 0.16)":"rgba(255, 255, 255, 0.24)"}`},".Input:hover":{boxShadow:`0 0 0 1px ${n}`},".Input--invalid":{boxShadow:`0 0 0 1px ${o}, 0 0 0 4px ${c}`,color:a},".Input--invalid.Input--invalid:focus":{boxShadow:`0 0 0 1px ${o}, 0 0 0 4px ${c}`},".Input--invalid:hover":{boxShadow:`0 0 0 1px ${o}, 0 0 0 4px ${d}`},".Error":{color:o,fontSize:"13px"},".Label":{fontSize:"13px",color:i,textTransform:"capitalize",marginBottom:"8px"},".Text--terms":{fontSize:"13px",color:i},".Tab":{backgroundColor:t,color:i,borderWidth:"1px",boxShadow:`0 0 0 1px ${r}`,borderColor:"transparent"},".Tab:hover":{color:a,borderWidth:"1px",boxShadow:`0 0 0 1px ${r}`,borderColor:"transparent"},".Tab:focus":{color:a,borderWidth:"1px",boxShadow:`0 0 0 1px ${r}`,borderColor:"transparent"},".Tab--selected":{color:u,boxShadow:`0 0 0 1px ${r}`,border:`1px solid ${u}`,backgroundColor:"transparent",borderColor:u},".Tab--selected:hover":{color:u,boxShadow:`0 0 0 1px ${r}`,border:`1px solid ${u}`,backgroundColor:"transparent",borderColor:u},".Tab--selected:focus":{color:u,boxShadow:`0 0 0 1px ${r}`,border:`1px solid ${u}`,backgroundColor:"transparent",borderColor:u},".TabIcon":{color:i},".TabIcon:hover":{color:a},".TabIcon--selected":{color:u,fill:u},".TabLabel--selected":{color:u},".Block":{backgroundColor:t,color:a,borderWidth:"0px",boxShadow:`0 0 0 1px ${r}`},".BlockDivider":{backgroundColor:r},".BlockAction":{color:u}}}},[s]),d=l?.billing?.platform==="stripeTestMode";return(0,t.jsx)(i.Elements,{options:{appearance:o,fonts:[{cssSrc:"https://fonts.googleapis.com/css2?family=Geist:wght@100..900&display=swap"}],currency:"usd",mode:"setup",loader:"never"},stripe:function(e){if(!e)return Promise.resolve(null);let t=P.get(e);return t||(t=(0,r.loadStripe)(e).catch(t=>((0,b.captureError)(t),P.delete(e),null)),P.set(e,t)),t}(d?"pk_test_51KWTJcBQYfoTMhVJkeKojfST4MsShve9XJ7Seqw7mgZaUCeO1DR4dR3EkrWFDqD0MG5IiZRYFygw6ZR8FnmZZKnn004vR9fkFq":"pk_live_alyEi3lN0kSwbdevK0nrGwTw"),children:(0,t.jsx)(e,{...n})})}return n.displayName=`WithStripe${e.displayName||e.name||"Component"}`,n}])}]);

//# debugId=f571de47-275f-d2bc-6cd5-636ba65459aa
//# sourceMappingURL=d1fb8be776fa105c.js.map
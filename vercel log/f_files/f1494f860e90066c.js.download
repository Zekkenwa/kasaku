;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="78a44782-49f2-2db1-5209-4d60452d7924")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,2210374,e=>{"use strict";function t(){return"u">typeof window}function i(){return(t()?window.vam:"production")||"production"}function r(){return"production"===i()}function n(e){return RegExp(`/${e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}(?=[/?#]|$)`)}e.s(["computeRoute",0,function(e,t){if(!e||!t)return e;let i=e;try{let e=Object.entries(t);for(let[t,r]of e)if(!Array.isArray(r)){let e=n(r);e.test(i)&&(i=i.replace(e,`/[${t}]`))}for(let[t,r]of e)if(Array.isArray(r)){let e=n(r.join("/"));e.test(i)&&(i=i.replace(e,`/[...${t}]`))}return i}catch(t){return e}},"track",0,function(e,n,s){var a,o;if(!t()){let e="[Vercel Web Analytics] Please import `track` from `@vercel/analytics/server` when using this function in a server environment";if(r())console.warn(e);else throw Error(e);return}if(!n){null==(a=window.va)||a.call(window,"event",{name:e,options:s});return}try{let t=function(e,t){if(!e)return;let i=e,r=[];for(let[n,s]of Object.entries(e))"object"==typeof s&&null!==s&&(t.strip?i=function(e,t){let{[e]:i,...r}=t;return r}(n,i):r.push(n));if(r.length>0&&!t.strip)throw Error(`The following properties are not valid: ${r.join(", ")}. Only strings, numbers, booleans, and null are allowed.`);return i}(n,{strip:r()});null==(o=window.va)||o.call(window,"event",{name:e,data:t,options:s})}catch(e){e instanceof Error&&"development"===i()&&console.error(e)}}])},1853611,5975871,496908,458944,e=>{"use strict";var t,i,r,n,s=e.i(3267987),a=e.i(2429523),o=e.i(3013088);let d="_v-anonymous-id";function c(){return(0,o.getSafeVercelSubdomainCookieDomain)(window.location.hostname)}let l="properties",u="universal",h="finalize";var f=e.i(6247049),p=e.i(486333),g=e.i(5561919);function _(e){let t=(0,f.createErrorFactory)(e);return{error:t,throw:(i,r)=>{throw t(`[${e.scope}] ${i}`,r)},log:(i,r)=>{let n=t(`[${e.scope}] ${i}`,r);if(p.isServer)console.error(n);else{let{message:e,cause:t,name:i,stack:r,...s}=n;console.error(n,(0,g.removeUndefinedObjectEntries)(s))}return n}}}var m=((t={}).MISSING_CONFIG="cdp_service_missing_config",t.MISSING_PROVIDERS="cdp_service_missing_providers",t.FAILED_INIT="cdp_service_failed_init",t.FAILED_PROVIDER_INIT="cdp_service_failed_provider_init",t.FAILED_ENRICHMENT="cdp_service_failed_enrichment",t.FAILED_DISPATCH="cdp_service_failed_dispatch",t.FAILED_TO_GET_CONTEXT="cdp_service_failed_to_get_context",t.FAILED_EXTEND="cdp_service_failed_extend",t);let I=_({scope:"@vercel/cdp.service"}),v={missingConfig:{code:m.MISSING_CONFIG,message:"Configuration object is required"},missingProviders:{code:m.MISSING_PROVIDERS,message:"CDP service requires at least one provider"},failedInit:{code:m.FAILED_INIT,message:"Error initializing CDP service"},failedProviderInit:{code:m.FAILED_PROVIDER_INIT,message:"Failed to initialize CDP provider"},failedEnrichment:{code:m.FAILED_ENRICHMENT,message:"Error enriching event"},failedDispatch:{code:m.FAILED_DISPATCH,message:"Error dispatching analytics event"},failedToGetContext:{code:m.FAILED_TO_GET_CONTEXT,message:"Error getting context for enrichment. Context will be undefined for all transforms."}};var E=e.i(9625174),y=((i={}).HARD_LIMIT="cdp_queue_hard_limit",i.TIMEOUT="cdp_queue_timeout",i.EVENT_FAILED="cdp_queue_event_failed",i);let C=_({scope:"@vercel/cdp.queue"}),T=(0,E.createScopedDebugLogger)("@vercel/cdp.queue");class S{maxWaitMs;_isReady;_isInitialized;_isIdentified;_queue;_timeout;_hasWarnedAboutQueueSize;_softLimit;_hardLimit;constructor(e=15e3,t=100,i=1e3){this.maxWaitMs=e,this._isReady=!1,this._isInitialized=!1,this._isIdentified=!1,this._queue=[],this._timeout=null,this._hasWarnedAboutQueueSize=!1,this._softLimit=t,this._hardLimit=i}get isReady(){return this._isReady}get isInitialized(){return this._isInitialized}get isIdentified(){return this._isIdentified}get queueSize(){return this._queue.length}signalReady(){this._isReady||(this._isReady=!0,this.flushEligible())}signalInitialized(){this._isInitialized||(this._isInitialized=!0,this.flushEligible())}signalIdentified(){this._isIdentified||(this._isIdentified=!0,T("identified","ðŸªª Identity established"),this.flushEligible())}resetIdentified(){this._isIdentified=!1,T("identified","ðŸªª Identity reset")}enqueue(e,t){let i={event:e,requiresReady:t?.requiresReady??!1,requiresIdentity:t?.requiresIdentity??!1};this.canDispatchItem(i)?this.safeExecute(e):(this._queue.push(i),this.maybeWarnAboutQueueSize(),this.maybeForceFlush(),this.maybeStartTimeout())}canDispatchItem(e){return!!this._isInitialized&&(!e.requiresReady||!!this._isReady)&&(!e.requiresIdentity||!!this._isIdentified)}flushEligible(){let e=[],t=[];for(let i of this._queue)this.canDispatchItem(i)?e.push(i):t.push(i);if(0!==e.length)for(let i of(this._queue=t,0===t.length&&(this.clearTimeout(),this._hasWarnedAboutQueueSize=!1),T("flush",`ðŸš€ Flushing ${e.length} queued event(s)`),e))this.safeExecute(i.event)}safeExecute(e){try{e()}catch(e){C.log("Queued event failed to execute",{code:y.EVENT_FAILED,cause:e})}}forceFlushAll(e){this.clearTimeout();let t=this._queue;for(let i of(this._queue=[],this._hasWarnedAboutQueueSize=!1,t.length>0&&("timeout"===e?C.log("Queue timeout triggered due to no ready signal. Flushing events.",{code:y.TIMEOUT,metadata:{maxWaitMs:this.maxWaitMs,queueSize:t.length}}):C.log("Queue size hit hard limit. Flushing events to prevent memory issues.",{code:y.HARD_LIMIT,metadata:{queueSize:t.length,hardLimit:this._hardLimit}})),t))this.safeExecute(i.event)}clearTimeout(){this._timeout&&(clearTimeout(this._timeout),this._timeout=null)}maybeWarnAboutQueueSize(){!this._hasWarnedAboutQueueSize&&this._queue.length>this._softLimit&&(this._hasWarnedAboutQueueSize=!0,console.warn(`[@vercel/cdp] Queue size (${this._queue.length}) exceeds soft limit (${this._softLimit}). This may indicate signalReady() is not being called, or events are firing before the app is ready. Events will continue to be queued but this could cause memory issues.`))}maybeForceFlush(){this._queue.length>=this._hardLimit&&this.forceFlushAll("force")}maybeStartTimeout(){this._timeout||1!==this._queue.length||(this._timeout=setTimeout(()=>this.forceFlushAll("timeout"),this.maxWaitMs))}}var A=((r={}).GETTER_FAILED="cdp_context_getter_failed",r);let R=_({scope:"@vercel/cdp.context"});class k{_getters=[];add(e){this._getters.push("function"==typeof e?e:()=>e)}clear(){this._getters=[]}resolve(){let e={};for(let t of this._getters)try{Object.assign(e,t())}catch(e){R.log("Context getter threw an error, skipping",{code:A.GETTER_FAILED,cause:e})}return e}}let w={DATA_WAREHOUSE:"data_warehouse",WEB_ANALYTICS:"web_analytics",MARKETING:"marketing",PRODUCT_ANALYTICS:"product_analytics",EXPERIMENTATION:"experimentation",OPERATIONAL:"operational",DATA_WAREHOUSE_LEGACY:"data_warehouse_legacy"};e.s(["DESTINATION_GROUP",0,w],5975871);var b=e.i(8134802);let D="isLoggedIn";function O(e,t){return{id:e,transform:t}}e.s(["createTransform",0,O],496908);let L=O("normalizeEmail",e=>{if(e&&"email"in e&&"string"==typeof e.email)return{...e,email:e.email.toLowerCase().trim()}}),P=O("cleanMetadata",e=>{if(e)return(0,g.removeUndefinedObjectEntries)(e)}),N=O("normalizePropertyKeys",e=>{if(e){var t=e;let i={};for(let[e,r]of Object.entries(t))i[e.replace(/([a-z])([A-Z])/g,"$1_$2").replace(/([A-Z])([A-Z][a-z])/g,"$1_$2").toLowerCase()]=r;return i}});var q=e.i(6465021),x=e.i(7896447);let U=[x.CDP_ATTRIBUTION_COOKIE_NAME],M="_v-consent";e.s(["ANALYTICS_COOKIES",0,[],"CDP_CONSENT_COOKIE_NAME",0,M,"MARKETING_COOKIES",0,U],458944);var $=e.i(486534),F=e.i(5140626);let z=(0,q.createVersionedCookie)({name:M,version:1,writeOptions:{get domain(){return(0,F.getCookieDomain)()},sameSite:"lax",expiresInDays:365,secure:(0,$.isSecureCookieRequired)()}}),G=(0,E.createScopedDebugLogger)("@vercel/cdp.service"),V={[w.WEB_ANALYTICS]:!0,[w.DATA_WAREHOUSE]:!0};class K{config;_initInProgress;_isInitialized;_queue;_context;_appSendToConfig;transforms;precomputedTransformStacks;constructor(e){this.config=e,this._initInProgress=!1,this._isInitialized=!1,this._appSendToConfig={},this.transforms=new Map([["traits",[]],[l,[]],[u,[]],[h,[]]]),this.precomputedTransformStacks=new Map,e||I.throw(v.missingConfig.message,{code:v.missingConfig.code,metadata:{method:"constructor"}}),e.providers&&0!==e.providers.length||I.throw(v.missingProviders.message,{code:v.missingProviders.code,metadata:{method:"constructor"}}),this._queue=e.queue??new S,this._context=e.context??new k,this.#e()}#e(){this.registerTransform(u,L),this.registerTransform(l,N),this.registerTransform(h,P)}async init(e){if(this._isInitialized||this._initInProgress)return void console.warn("CDP service is already initialized");if(!this.isServiceEnabled)return void G("init","â­ï¸ Skipping initialization (service disabled)");this._initInProgress=!0;try{G("init","ðŸš€ Initializing service...",{options:e});let t=this.config.providers.filter(e=>e.isEnabled());if(0===t.length)return void G("init","âš ï¸ No enabled providers to initialize");let i=(await Promise.allSettled(t.map(async t=>{try{return await t.init?.(e),t.id}catch(e){throw I.log(v.failedProviderInit.message,{code:v.failedProviderInit.code,cause:e,metadata:{method:"init",providerId:t.id}}),e}}))).filter(e=>"fulfilled"===e.status).map(e=>e.value);i.length>0?(this._isInitialized=!0,this._queue.signalInitialized(),G("init",`ðŸŸ¢ Service successfully initialized with ${i.length} provider(s): ${i.join(", ")}`)):G("init","âš ï¸ No providers successfully initialized")}catch(e){I.log(v.failedInit.message,{code:v.failedInit.code,cause:e,metadata:{method:"init"}})}finally{this._initInProgress=!1}}identify(e,t){G("receive:identify",`ðŸ“¡ Event received`,{userId:e,traits:t}),this._queue.enqueue(()=>{let i=this.#t("identify","traits",t);this.#i("identify",e,i)}),this._queue.signalIdentified()}clearIdentity(){let e,t;G("receive:clearIdentity",`ðŸ“¡ Event received`),e=c(),(0,a.removeCookie)(d,{domain:e}),t=c(),(0,a.removeCookie)("_v-anonymous-id-renewed",{domain:t}),this.clearContext(),this._queue.resetIdentified(),this._queue.enqueue(()=>this.#i("clearIdentity"))}group(e,t){G("receive:group",`ðŸ“¡ Event received`,{groupId:e,traits:t}),this._queue.enqueue(()=>{let i=this.#t("group","traits",t);this.#i("group",e,i)})}alias(e,t){G("receive:alias",`ðŸ“¡ Event received`,{newUserId:e,previousUserId:t}),this._queue.enqueue(()=>this.#i("alias",e,t))}page(e){G("receive:page",`ðŸ“¡ Event received`,{properties:e}),this._queue.enqueue(()=>this.#r(e),{requiresReady:!0,requiresIdentity:this.#n()})}#r(e){let t={...this._context.resolve(),...e},i=this.#t("page","properties",t);this.#i("page",i)}track(e,t,i){G(`receive:track:${e}`,`ðŸ“¡ Event received`,{eventName:e,properties:t,options:i}),this._queue.enqueue(()=>this.#s(e,t,i),{requiresReady:!0,requiresIdentity:this.#n()})}#s(e,t,i){let r={...this._context.resolve(),...t},n=this.#a(i),s=this.#t("track","properties",r);this.#i("track",e,s,n)}#a(e){if("override"===(e?.send_to_strategy??"merge"))return{...e,send_to:e?.send_to??{}};let t={...V,...this._appSendToConfig,...e?.send_to};return{...e,send_to:t}}consent(e,t){G("receive:consent",`ðŸ“¡ Event received`,{allowedConsentIds:e,deniedConsentIds:t}),z.write({analytics:e.includes("analytics"),marketing:e.includes("marketing"),essential:e.includes("essential")}),this._queue.enqueue(()=>this.#i("consent",e,t))}addContext(e){this._context.add(e),G("context","ðŸ“¦ Added context")}clearContext(){this._context.clear(),G("context","ðŸ§¹ Cleared context")}signalReady(){G("ready","ðŸš¦ App signaled ready"),this._queue.signalReady()}get isReady(){return this._queue.isReady}getPublicInterface(){return{identify:this.identify.bind(this),clearIdentity:this.clearIdentity.bind(this),group:this.group.bind(this),alias:this.alias.bind(this),page:this.page.bind(this),track:this.track.bind(this),consent:this.consent.bind(this)}}registerTransform(e,t){let i=Array.isArray(t)?t:[t],r=this.transforms.get(e);if(!r){let t=i.map(e=>e.id).join(", ");G("transform",`âš ï¸ Skipped registration for ${t}: type ${e} not found`);return}i.forEach(e=>{r.push(e)}),this.#o()}registerProvider(e){this.config.providers.some(t=>t.id===e.id)?G("registerProvider",`âš ï¸ Provider ${e.id} is already registered, skipping`):(this.config.providers.push(e),G("registerProvider",`âœ… Provider ${e.id} registered successfully`),this._isInitialized&&e.isEnabled()&&e.init?.())}updateSendToConfig(e){this._appSendToConfig={...this._appSendToConfig,...e},G("updateSendToConfig",`âœ… App send_to config updated`,e)}get isServiceEnabled(){return this.config.enabled}#t(e,t,i){let r=this.precomputedTransformStacks.get(t)||[];if(0===r.length)return i;let n=this.#d(),s=i;for(let e of r)try{s=e.transform(s,n)??s}catch(t){I.log(v.failedEnrichment.message,{code:v.failedEnrichment.code,cause:t,metadata:{method:"enrich",transformId:e.id}})}return this.config.debug&&s!==i&&G(`enrich:${e}`,`âœ¨ Enriched with ${r.length} transform(s)`,{input:i,output:s,transformContext:n,transformStack:r.map(e=>e.id)}),s}#i(e){for(var t=arguments.length,i=Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];this.isServiceEnabled?this.#c(e,i):G(`dispatch:${e}`,`â­ï¸ Skipping (service disabled)`)}#c(e,t){let i="track"===e?t[t.length-1]:void 0;for(let r of this.config.providers){if(!r.isEnabled()){G(`${e}`,`â­ï¸ Skipping provider ${r.id} (disabled)`);continue}if(r.requiredDestinationGroup&&i){let t=r.requiredDestinationGroup;if(!0!==i.send_to?.[t]){G(`${e}`,`â­ï¸ Skipping provider ${r.id} (destination group '${t}' not enabled)`);continue}}let n=r[e];if("function"==typeof n)try{G(`dispatch:${e}`,`â†ªï¸ Forwarding to ${r.id}`),n.apply(r,t)}catch(i){I.log(v.failedDispatch.message,{code:v.failedDispatch.code,cause:i,metadata:{method:"broadcastToProviders",providerId:r.id,methodName:e,methodArgs:t}})}}}#d(){try{return this.config.getEnrichmentContext?.()}catch(e){I.log(v.failedToGetContext.message,{code:v.failedToGetContext.code,cause:e,metadata:{method:"getEnrichmentContext"}})}}#n(){return"1"===(0,b.getCookie)(D)}#o(){for(let[e]of this.transforms)e!==u&&e!==h&&this.precomputedTransformStacks.set(e,[...this.transforms.get(u)||[],...this.transforms.get(e)||[],...this.transforms.get(h)||[]])}_inspectTransformRegistry(){return this.transforms}_inspectPrecomputedTransformStacks(){return this.precomputedTransformStacks}}var W=((n={}).INVALID_CONFIG="cdp_rudderstack_client_invalid_config",n.INVALID_SOURCE_CONFIG="cdp_rudderstack_client_invalid_source_config",n.FAILED_TO_LOAD_SDK="cdp_rudderstack_client_failed_sdk_load",n);let j=_({scope:"@vercel/cdp.provider.rudderstack-client"}),H={invalidConfig:{message:"Invalid Rudderstack configuration provided. Missing required fields",code:W.INVALID_CONFIG},failedToLoadSdk:{message:"Failed to load the Rudderstack SDK snippet",code:W.FAILED_TO_LOAD_SDK}},Y=()=>{if(!p.isServer)return Q(),window.rudderanalytics},B=["setDefaultInstanceKey","load","ready","page","track","identify","alias","group","reset","setAnonymousId","startSession","endSession","consent"],Q=()=>{let e=window;if(e.rudderanalytics)return;let t=[];for(let e of B)t[e]=function(){for(var i=arguments.length,r=Array(i),n=0;n<i;n++)r[n]=arguments[n];t.push([e,...r])};e.rudderanalytics=t},X={sourceId:"cdp-fallback-source-id",workspaceId:"cdp-fallback-workspace-id",sourceName:"cdp-fallback-source-name"},J=[],Z=(0,E.createScopedDebugLogger)("@vercel/cdp.rudderstack.load"),ee=!1,et=!1,ei=async t=>{let{dataplaneUrl:i,writeKey:r,sourceConfig:n,shouldLoadMarketingScripts:s=!0}=t;if(!ee&&!et){ee=!0;try{var a,o;let{RudderAnalytics:t}=await e.A(3351010);if(et){ee=!1;return}let c=new t,l=function(){let e=z.get();if(!e)return null;let t=[],i=[];for(let[r,n]of Object.entries(e))n?t.push(r):i.push(r);return{allowed:t,denied:i}}(),u={getSourceConfig:(a=n,o=r,()=>({updatedAt:new Date().toISOString(),source:{name:a.sourceName,id:a.sourceId,workspaceId:a.workspaceId,writeKey:o,updatedAt:new Date().toISOString(),config:{statsCollection:{errors:{enabled:!1},metrics:{enabled:!1}}},enabled:!0,destinations:[]}})),polyfillIfRequired:!1,consentManagement:{enabled:!0,provider:"custom",...l&&{allowedConsentIds:l.allowed,deniedConsentIds:l.denied}},integrations:function(e){let t={All:!0};if(!1===e.shouldLoadMarketingScripts)for(let e of J)t[e]=!1;return t}({shouldLoadMarketingScripts:s}),externalAnonymousIdCookieName:d,sameDomainCookiesOnly:void 0===(0,F.getCookieDomain)(),secureCookie:(0,$.isSecureCookieRequired)()};l||(u.preConsent={enabled:!0,events:{delivery:"buffer"}}),Z("load","ðŸ“¦ Loading RudderStack SDK",u),c.load(r,i,u),et=!0}finally{ee=!1}}},er=(0,E.createScopedDebugLogger)("@vercel/cdp.rudderstack");class en{config;id;validatedSdkConfig;constructor(e){this.config=e,this.id="rudderstack-client"}validateAndGetSdkConfig(e){if(this.validatedSdkConfig)return this.validatedSdkConfig;let t=["writeKey","sourceConfig","dataplaneUrl"].filter(t=>!e[t]);return t.length>0&&j.throw(H.invalidConfig.message,{code:H.invalidConfig.code,metadata:{method:"validateAndGetSdkConfig",missingFields:t}}),this.validatedSdkConfig={writeKey:e.writeKey,sourceConfig:e.sourceConfig,dataplaneUrl:e.dataplaneUrl},this.validatedSdkConfig}isEnabled(){return!p.isServer}async init(e){let t=this.validateAndGetSdkConfig(this.config),i=function(e){let t=e.split("::");if(3!==t.length)return j.log(`Source config has ${t.length} field(s), expected 3. Format: workspaceId::sourceId::sourceName`,{code:W.INVALID_SOURCE_CONFIG,metadata:{raw:e,parts:t}}),X;let[i,r,n]=t,s=[!i&&"workspaceId",!r&&"sourceId",!n&&"sourceName"].filter(Boolean);return s.length>0&&j.log(`Source config has empty fields: ${s.join(", ")}`,{code:W.INVALID_SOURCE_CONFIG,metadata:{raw:e,emptyFields:s}}),{workspaceId:i||X.workspaceId,sourceId:r||X.sourceId,sourceName:n||X.sourceName}}(t.sourceConfig);er("init","ðŸš€ Initializing provider...",{options:e,sourceConfig:{raw:t.sourceConfig,parsed:i}});try{await ei({writeKey:t.writeKey,dataplaneUrl:t.dataplaneUrl,sourceConfig:i,shouldLoadMarketingScripts:e?.shouldLoadMarketingScripts}),er("init","ðŸŸ¢ Provider initialized (SDK loaded successfully)")}catch(e){j.throw(H.failedToLoadSdk.message,{code:H.failedToLoadSdk.code,cause:e,metadata:{method:"init"}})}}ready(e){let t=Y();t?.ready(e)}identify(e,t,i){let r=Y();this.#l(r,e);let n=this.#u("identify",i,{userId:e,traits:t});r?.identify(e,t,{},n)}#l(e,t){let i=e?.getUserId();i?this.#h(t,i):void 0===i&&e?.ready(()=>{let i=e?.getUserId();i&&this.#h(t,i)})}#h(e,t){t!==e&&t===e.toLowerCase()&&(er("identify","ðŸ”— Merging legacy lowercase userId with correct case",{from:t,to:e}),this.alias(e,t))}clearIdentity(e){let t=Y(),i=this.#u("clearIdentity",e);t?.reset({entries:{anonymousId:!0}}),i()}group(e,t,i){er("group","ðŸš§ Rudderstack group call ignored")}alias(e,t,i){let r=Y(),n=this.#u("alias",i,{to:e,from:t});r?.alias(e,t,{},n)}track(e,t,i,r){let n=Y(),{properties:s,context:a}=this.#f("track",t),o=this.#p(a,i),d=this.#u("track",r,{event:e,properties:s,context:o});n?.track(e,s,o,d)}#p(e,t){let i=t?.send_to;if(e||i)return{...e,...i&&{send_to:i}}}page(e,t,i){let r=Y(),{properties:n,context:s}=this.#f("page",e),a=this.#p(s,t),o=this.#u("page",i,{properties:n,context:a});r?.page(n,a,o)}consent(e,t){let i=Y(),r={consentManagement:{allowedConsentIds:e,deniedConsentIds:t}};er("send:consent","âœ… Consent preferences successfully sent to Rudderstack",r),i?.consent(r)}#f(e,t){if(!t)return{properties:{}};let i={},r={},n=!1;for(let e in t){if(e===x.CURRENT_CAMPAIGN_KEY&&t[x.CURRENT_CAMPAIGN_KEY]){r.campaign=t[x.CURRENT_CAMPAIGN_KEY],n=!0;continue}if(e===x.LAST_TOUCH_CAMPAIGN_KEY&&t[x.LAST_TOUCH_CAMPAIGN_KEY]){r.last_touch_campaign=t[x.LAST_TOUCH_CAMPAIGN_KEY],n=!0;continue}i[e]=t[e]}return er(`prepare:${e}`,`ðŸ“¦ Prepared final event properties`,{input:t,output:{properties:i,context:n?r:void 0}}),n?{properties:i,context:r}:{properties:i}}#u(e,t,i){return()=>{er(`send:${e}`,`âœ… Event successfully sent to Rudderstack`,i),t?.()}}}var es=e.i(2210374);let ea=(0,E.createScopedDebugLogger)("@vercel/cdp.vercel-analytics");class eo{id="vercel-analytics";requiredDestinationGroup=w.WEB_ANALYTICS;async init(){}isEnabled(){return!p.isServer}track(e,t){let i=this.#f("track",t);(0,es.track)(i?.legacy_action??e,i),ea(`send:${e}`,`âœ… Event successfully sent to Vercel Analytics`,{properties:i})}#f(e,t){if(!t)return;let i={};for(let e in t){let r=t[e];if(null!=r){if(r instanceof Date){i[e]=r.toISOString();continue}if(Array.isArray(r)){i[e]=r.join(",");continue}i[e]=r}}let r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{maxDepth:i=1/0,delimiter:r="."}=t;if(0===i)return e;let n={};return!function e(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!(null!==t&&"object"==typeof t&&!Array.isArray(t))||t instanceof Date||t instanceof RegExp){n[s]=t;return}let o=Object.entries(t);if(0===o.length||a>=i){n[s]=t;return}for(let[t,i]of o)e(i,s?`${s}${r}${t}`:t,s?a+1:a)}(e),n}(i);return ea(`prepare:${e}`,`ðŸ“¦ Prepared final event properties`,{input:t,output:r}),r}}class ed{id="NoopCDPService";isServiceEnabled=!1;registerTransform(){}registerProvider(){}updateSendToConfig(){}identify(){}clearIdentity(){}group(){}alias(){}page(){}track(){}consent(){}addContext(){}clearContext(){}signalReady(){}async init(){}getPublicInterface(){return{identify:()=>{},clearIdentity:()=>{},group:()=>{},alias:()=>{},page:()=>{},track:()=>{},consent:()=>{}}}}var ec=e.i(5203382),el=e.i(4516081);let eu="dx/url",eh=(0,f.createErrorFactory)({scope:eu}),ef=e=>{if(!p.isServer)try{if(!e)return new URLSearchParams(window.location.search);if(e.includes("://")){let t=new URL(e);return new URLSearchParams(t.search)}return new URLSearchParams(e)}catch(t){!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};console.error(eh(`[${eu}] ${e}`,t))}("Failed to get URLSearchParams",{code:"url_search_params_get_failed",cause:t,metadata:{url:e}});return}},ep=O("attachAttribution",(e,t)=>{let i=window.location.search,r=e_(t?.cookieMap),n=eI(t?.cookieMap),s=em(i);return r||s||n?{...e,...r,...s&&{[x.CURRENT_CAMPAIGN_KEY]:s},...n&&{[x.LAST_TOUCH_CAMPAIGN_KEY]:n}}:e}),eg=Object.entries(x.THIRD_PARTY_COOKIE_MAP),e_=e=>{if(0===eg.length||!e||0===e.size)return;let t={},i=!1;for(let[r,n]of eg){let s=e.get(r);s&&(t[n]=s,i=!0)}return i?t:void 0},em=e=>{let t={},i=!1;for(let r of x.THIRD_PARTY_URL_PARAMS){let n=ef(e)?.get(r);n&&(t[r]=n,i=!0)}return i?t:void 0},eI=e=>{if(e&&0!==e.size&&el.attributionCookie.has(e))return el.attributionCookie.get(e)},ev=O("attachIdentity",(e,t)=>{let i=t?.cookieMap;return{...e,anonymous_id:i?.get(d),is_logged_in:i?.get(D)==="1"}});var eE=e.i(9183349);let ey=!1,eC=O("attachVercelEnv",e=>({...e,vercel_app:eE.VERCEL_APP_NAME,vercel_domain:(0,eE.isVercelProd)()?eE.VERCEL_STABLE_PRODUCTION_DOMAIN?eE.VERCEL_STABLE_PRODUCTION_DOMAIN:eE.VERCEL_SHORTEST_PRODUCTION_URL?(ey||(console.warn(`[vercel-cdp.getVercelDomain] Using VERCEL_SHORTEST_PRODUCTION_URL reference in production. This may return an unexpected domain (e.g., "edge.new" instead of "vercel.com"). Recommendation: Set NEXT_PUBLIC_PRODUCTION_DOMAIN in Vercel project settings. Current domain: ${eE.VERCEL_SHORTEST_PRODUCTION_URL}`),ey=!0),eE.VERCEL_SHORTEST_PRODUCTION_URL):(console.error("[vercel-cdp.getVercelDomain] Cannot determine production domain. Neither NEXT_PUBLIC_PRODUCTION_DOMAIN nor VERCEL_PROJECT_PRODUCTION_URL is set. This indicates a critical configuration error."),"unknown"):p.isServer?eE.VERCEL_URL??"localhost":window.location.host,vercel_env:eE.VERCEL_ENV??"development",vercel_region:eT(),vercel_deployment_id:eS()})),eT=()=>s.default.env.VERCEL_REGION,eS=()=>globalThis.NEXT_DEPLOYMENT_ID,eA=e=>e&&""!==e.trim()?e.split("; "):[];var eR=e.i(3198854);function ek(e){let t=new Map;for(let i of e){if(!i)continue;let e=function(e){if(e)try{let[t,...i]=e.split("=");if(!t)return;let r=i.join("=");if(r.includes("%")||r.includes("+"))try{r=decodeURIComponent(r)}catch{}return[t,r]}catch(t){(0,eR.logCookieError)(`Error parsing cookie string: ${e}`,{code:"cookie_parse_failed",cause:t,metadata:{cookieString:e}});return}}(i);if(e){let[i,r]=e;t.set(i,r)}}return t}function ew(){var e;return{environment:"client",cookieMap:(e=p.isServer?[]:eA(document.cookie))?e instanceof Map?e:Array.isArray(e)?ek(e):"string"==typeof e?ek(eA(e)):(console.warn(`[dx/cookies] Unknown cookie source type: ${typeof e}. Returning an empty Map.`),new Map):(console.warn("[dx/cookies] No source provided. Returning an empty Map."),new Map)}}let eb=(()=>{let e=(0,ec.getCDPOverrideCookieValue)();if(!(e??!0)||!(!p.isServer&&!p.isTest&&!p.isCi&&!p.isE2E&&!p.isInIframe&&"1"!==(0,b.getCookie)("vercel_impersonate")&&!(0,p.isBotClient)()))return new ed;let t=new K({enabled:!0,debug:e??"true"===s.default.env.NEXT_PUBLIC_ENABLE_CDP_DEBUG,providers:[new eo,new en({writeKey:"34WAqdmAn7gavRAuxcqT8Ekj8FU",sourceConfig:"2k4XxGAwBdJx8YwluUOVVIn4wLD::34WAqcXFJUzhbiByS5WJY3xFBOr::vercel.com - PROD",dataplaneUrl:"https://cdp.vercel.com/rs/stream"})],getEnrichmentContext:ew});return t.registerTransform("properties",[ep,ev,eC]),t})(),eD=eb.getPublicInterface(),eO=function(e){try{e({registerProvider:eb.registerProvider.bind(eb),registerTransform:(e,t)=>{eb.registerTransform(e,t)},updateSendToConfig:eb.updateSendToConfig.bind(eb)})}catch(e){I.log("Failed to extend CDP service",{code:m.FAILED_EXTEND,cause:e,metadata:{method:"extend"}})}};e.s(["_clientCDPService",0,eb,"analytics",0,eD,"extend",0,eO],1853611)}]);

//# debugId=78a44782-49f2-2db1-5209-4d60452d7924
//# sourceMappingURL=46db71dc99aa5c23.js.map
;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="0caa2d8b-aaf1-4f47-5465-1b6f34f59dd4")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,591651,e=>{"use strict";var t=e.i(1381818),n=e.i(1053524),i=e.i(4655443),r=e.i(6565161),s=e.i(4597921),a=e.i(7917902),o=e.i(579135),l=e.i(9806773),c=e.i(4030453),u=e.i(6891161),d=e.i(455575),p=e.i(7062386);function f(){let{team:e,projectName:n,supportsPlus:i,isProcessing:r,error:s,disable:a,close:o,step:f}=(0,p.useModalState)(),h=(0,d.useToasts)(),m=`Speed Insights${i?" Plus":""}`;async function g(){await a(),h.success(`Successfully disabled ${m} on ${n}`)}return(0,t.jsxs)(u.Modal.Modal,{active:"confirm"===f,onClickOutside:o,children:[(0,t.jsxs)(u.Modal.Body,{children:[(0,t.jsx)(u.Modal.Header,{children:(0,t.jsxs)(u.Modal.Title,{className:"px-1",children:["Disable ",m]})}),(0,t.jsxs)("div",{className:"px-1",children:[e?function(e,t){let n=e.billing?.period?.end,i=n?(0,l.timeToAutomaticLocale)(n,{month:"short",day:"numeric",year:"numeric"}):null;if(t)return i?`You will still have access to all collected metrics until the end of your current billing period on ${i}.`:"Once disabled, the Speed Insights dashboard will only display Real Experience Scores.";let r="Vercel will immediately stop ingesting Speed Insights data points for your application.";return i?`${r} Data points already collected will be shown until the end of your current billing period, on ${i}. You will only be billed for data collected up to the date when your project is disabled.`:r}(e,i):null,s?(0,t.jsx)(c.Error,{error:s}):null]})]}),(0,t.jsxs)(u.Modal.Actions,{children:[(0,t.jsx)(u.Modal.Action,{disabled:r,onClick:o,type:"secondary",children:"Cancel"}),(0,t.jsx)(u.Modal.Action,{loading:r,onClick:g,children:"Disable"})]})]})}e.s(["DisableModal",0,function(){let e=(0,i.useRouter)(),{mutate:l}=(0,r.useSWRConfig)(),c=(0,o.useCurrentProjectNameAndId)(),{team:u,account:d}=(0,a.useAccount)(),h=(0,s.useServerFlag)("speed-insights-pricing-refresh-1",!1),m=u&&u.billing?.invoiceItems?.analytics?.quantity||0,{step:g,setProps:x}=(0,p.useModalState)();return((0,n.useEffect)(()=>{x({team:u??null,projectId:c?.id??null,projectName:c?.name??null,supportsPlus:h,ownerPlan:d?.billing?.plan??null,paidCount:m,onSuccess:()=>{c?.id&&l(e=>"string"==typeof e&&e.includes(c.id)),e.refresh()}})},[u,d?.billing?.plan,c?.id,c?.name,h,m,l,e,x]),"closed"===g)?null:(0,t.jsx)(f,{})}],591651)},2332376,e=>{e.v({container:"percentile-bar-module__uS0wMW__container",target:"percentile-bar-module__uS0wMW__target"})},7791712,1113594,e=>{"use strict";var t=e.i(1381818),n=e.i(5343305);e.i(6483798);var i=e.i(8287059),r=e.i(8248823),s=e.i(57106),a=e.i(1717203),o=e.i(7557283),l=e.i(5338940),c=e.i(6891161),u=e.i(8522580),d=e.i(5468328),p=e.i(455575),f=e.i(1438473),h=e.i(8761240),m=e.i(1053524),g=e.i(5326961);function x(e){let{active:n,project:d,onClose:x}=e,y=(0,p.useToasts)(),j=(0,i.useOpenUpgradeModal)(),b=(0,i.useUpgradeModalIsOpen)(),{enableSpeedInsights:S}=(0,g.useSpeedInsightsStatus)(),{team:N}=(0,l.useTeam)(),[M,w]=(0,m.useState)(!1),{can:k,isLoading:C}=(0,a.default)(),E=(0,m.useMemo)(()=>!C&&k(o.Action.Update,o.Resource.SpeedInsights),[C,k]),T=N?.billing?.plan,R="pro"===T&&N?.billing?.status==="trialing",D=(0,m.useCallback)(()=>{w(!1),y.success(`Speed Insights Plus successfully enabled for ${d.name}.`),x()},[x,y,d.name]),P=(0,m.useCallback)(async()=>{if(N){if("hobby"===T||R)return void j({addOn:{additionalConfigurations:{projectId:d.id,projectName:d.name,team:N},type:"speedInsights"},disabledSteps:["team-members"],forceImmediateUpgrade:R,source:"speed-insights-plus-enable-modal",teamHint:N.id,trialBehavior:"disallow-trial",onConversionError:e=>{y.error(`Failed to upgrade your team: ${(0,r.normalizeError)(e)}`)},onConversionSuccess:D});w(!0);try{await S(),D()}catch(e){y.error(`Failed to enable Speed Insights Plus: ${(0,r.normalizeError)(e)}`)}finally{w(!1)}}},[S,T,R,y,d,j,N,D]),I=(0,m.useMemo)(()=>{var e;let n,i;return e=N,n=e?.billing?.plan??"hobby",i=e?.billing?.status==="trialing","hobby"===n||"pro"===n&&i?{label:"Continue",suffix:(0,t.jsx)(f.ArrowRight,{})}:"pro"===n?{label:"Continue and Pay"}:{label:"Confirm"}},[N]);return(0,t.jsxs)(c.Modal.Modal,{active:!b&&n,onClickOutside:x,children:[(0,t.jsxs)(c.Modal.Body,{children:[(0,t.jsx)(c.Modal.Header,{children:(0,t.jsx)(c.Modal.Title,{className:"px-1",children:"Enable Speed Insights Plus"})}),(0,t.jsxs)("div",{className:"flex flex-col gap-1 px-1",children:[(0,t.jsxs)("div",{children:["Unlocks advanced insight on the performance of your site or application.",(0,t.jsx)(s.Link,{external:!0,href:"/docs/speed-insights",variant:"highlight",children:"Learn more"}),"."]}),(0,t.jsxs)("ul",{className:"my-3 ml-0.5 list-none p-0 space-y-2",children:[(0,t.jsxs)("li",{className:"flex items-center gap-2",children:[(0,t.jsx)(h.CheckCircleFill,{color:"gray-1000",size:16}),"Access all collected Core Web Vitals metrics"]}),(0,t.jsxs)("li",{className:"flex items-center gap-2",children:[(0,t.jsx)(h.CheckCircleFill,{color:"gray-1000",size:16}),"Learn about pages and routes with the worst performance"]})]}),"pro"===T?(0,t.jsx)(u.Note,{fill:!0,type:"violet",children:"Speed Insights Plus costs $10 per month per project."}):null,"hobby"===T?(0,t.jsx)(u.Note,{fill:!0,type:"violet",children:"In addition to your team's plan, Speed Insights Plus costs $10 per month per project."}):null]})]}),(0,t.jsxs)(c.Modal.Actions,{children:[(0,t.jsx)(c.Modal.Action,{onClick:x,type:"secondary",children:"Dismiss"}),(0,t.jsxs)(v,{text:E?void 0:"Please ask your team owners",children:[" ",(0,t.jsx)(c.Modal.Action,{disabled:!E,loading:M,onClick:P,suffix:I.suffix,children:I.label})]})]})]})}function v(e){let{text:n,children:i}=e;return n?(0,t.jsx)(d.Tooltip,{text:n,children:i}):i}e.s(["useOpenEnableModal",0,function(){let[e,i]=(0,m.useState)(!1),{data:r}=(0,n.useCurrentDashboardProject)();return{openEnableModal:(0,m.useCallback)(()=>i(!0),[]),EnableModal:r?(0,t.jsx)(x,{active:e,project:r,onClose:()=>i(!1)}):null}}],7791712);var y=e.i(6065693),j=e.i(2457794),b=e.i(1772761),S=e.i(709913),N=e.i(5255926),M=e.i(3896684),w=e.i(6143247),k=e.i(931197),C=e.i(9463365),E=e.i(9722978),T=e.i(2332376);let{Poor:R,Improvable:D,Good:P}=k.Rating;function I(e){let{active:n,className:i,style:r,percent:s,tooltipText:a,tooltipDelay:o,disabled:l}=e;return(0,t.jsx)(d.Tooltip,{className:(0,w.cn)("relative h-full w-full bg-gray-200 transition-all duration-200","first:rounded-l last:rounded-r",l&&"pointer-events-none",n?"opacity-100":["opacity-80 grayscale",!l&&"hover:gray hover:grayscale-0"],i),delayTime:o,style:{width:`${s}%`,...r},text:a,children:(0,t.jsx)("div",{className:"absolute top-0 h-3 w-full"})})}function _(e){let{distribution:n,targetPercentile:i,showPercentileLabel:r,metricLabel:s,isLoading:a}=e,{good:o=80,improvable:l=15,poor:c=5}=n||{},u=function(){if(!a)return i<=o?P:i<=o+l?D:R}(),p="large"===e.size?4:3,f=(0,m.useMemo)(()=>({disabled:a,tooltipDelay:e.tooltipDelay}),[a,e.tooltipDelay]);return(0,t.jsxs)("div",{className:(0,E.clsx)(T.default.container,"tailwind"),children:[(0,t.jsxs)("div",{className:"relative w-full",children:[(0,t.jsxs)("div",{className:"flex w-full space-x-0.5",style:{height:`${p}px`},children:[o>0&&(0,t.jsx)(I,{...f,active:u===P,className:"bg-green-700",percent:o,tooltipText:`${Math.round(o)}% of visits had a great ${s}`}),l>0&&(0,t.jsx)(I,{...f,active:u===D,className:"bg-amber-700",percent:l,tooltipDelay:e.tooltipDelay,tooltipText:`${Math.round(l)}% of visits scored "needs improvement" on ${s}`}),c>0&&(0,t.jsx)(I,{...f,active:u===R,className:"bg-red-700",percent:c,tooltipDelay:e.tooltipDelay,tooltipText:`${Math.round(c)}% of visits had a poor ${s}`})]}),(0,t.jsx)("div",{className:(0,w.cn)(T.default.target,r&&"bg-gray-700",(0,E.clsx)({"bg-green-700":u===P,"bg-amber-700":u===D,"bg-red-700":u===R})),style:{left:`${i}%`}})]}),r?(0,t.jsx)("div",{className:"h-6",children:(0,t.jsx)("div",{className:"absolute mt-1 flex w-0 flex-col items-center justify-center",style:{left:`${i}%`},children:(0,t.jsx)(d.Tooltip,{delayTime:e.tooltipDelay,text:`The score is given on the ${s} most visits (75%) had.`,children:(0,t.jsx)("div",{className:"flex flex-col items-stretch justify-start flex-initial cursor-default rounded-sm border bg-background-100 px-1.5 py-0.5",children:(0,t.jsxs)("p",{className:"text-[12px] leading-[16px] font-medium text-gray-900",children:["P",i.toString()]})})})})}):null]})}let A={[k.Rating.Good]:"text-green-700",[k.Rating.Improvable]:"text-amber-700",[k.Rating.Poor]:"text-red-700"},O={0:"var(--ds-red-700)",50:"var(--ds-amber-700)",90:"var(--ds-green-700)"};e.s(["MetricDisplay",0,function(e){let{metric:n,metricDefinitions:i,className:r,size:s,device:a,values:o,isLoading:l,hasData:c,disabled:u}=e,{state:d}=(0,S.useSpeedInsightsUrlState)(),{isEnabled:p}=(0,g.useSpeedInsightsStatus)(),{value:f,rating:h,metricDefinition:x}=(0,m.useMemo)(()=>{let e=i[n].thresholds[a],t=o?.[n]?.p75??0;return{metricDefinition:i[n],value:t,rating:(0,C.getRatingForThresholds)(e,t)}},[o,n,i,a]),v=(0,S.canMetricBeFiltered)(x.type,(0,S.useSpeedInsightsUrlState)().state)&&(c||u)&&f>=0;return"RES"!==n?(0,t.jsxs)("span",{className:(0,w.cn)("flex flex-col gap-2 justify-start",r,u&&"grayscale"),children:[(0,t.jsxs)("span",{className:(0,w.cn)("flex flex-row items-baseline","large"===s?"gap-1":"gap-0.5"),children:[(0,t.jsx)(N.Skeleton,{show:l,children:(0,t.jsx)("p",{className:(0,w.cn)("text-left font-medium font-sans",A[h],"large"===s?"text-[32px]":"text-[20px]"),children:v?(0,t.jsx)(b.AnimatedNumber,{value:(0,C.formatMetric)(f,x).value}):(0,t.jsx)("span",{className:"text-gray-800",children:"â€“"})})}),(0,t.jsx)("p",{className:(0,w.cn)("align-text-bottom text-gray-800 font-normal font-sans","large"===s?"text-[16px]":"text-[12px]"),children:v?x.unit:null})]}),(0,t.jsx)(_,{distribution:o?.[n]?.distribution,isLoading:l||!v,metricLabel:x.type,showPercentileLabel:"large"===s&&v,size:s,targetPercentile:75,tooltipDelay:e.tooltipDelay})]}):(0,t.jsx)("span",{className:"flex flex-row justify-start",children:(0,t.jsx)("div",{children:(0,t.jsx)(N.Skeleton,{pill:!0,show:l,children:(0,t.jsx)(j.default,{colors:O,showValue:!0,size:"large"===s?"medium":"small",value:v?f:null,children:v?null:(0,C.isDisplayingRecentData)(d)&&p?(0,t.jsx)(y.NoData,{size:"large"===s?24:14}):(0,t.jsx)(M.ChartActivity,{className:"!text-gray-700",color:"gray-700",size:"large"===s?22:14})})})})})}],1113594)},5948355,e=>{"use strict";var t=e.i(1381818),n=e.i(8412040),i=e.i(7300),r=e.i(709913),s=e.i(931197),a=e.i(2504781),o=e.i(6143247),l=e.i(1053524),c=e.i(7344877),u=e.i(5326961),d=e.i(1108511),p=e.i(7791712),f=e.i(1113594);let h={[s.MetricType.FCP]:{p75:1160,p90:0,p95:0,p99:0,distribution:{good:84,improvable:10,poor:6}},[s.MetricType.LCP]:{p75:1240,p90:0,p95:0,p99:0,distribution:{good:90,improvable:3,poor:7}},[s.MetricType.INP]:{p75:268,p90:0,p95:0,p99:0,distribution:{good:72,improvable:26,poor:2}},[s.MetricType.CLS]:{p75:.2,p90:0,p95:0,p99:0,distribution:{good:50,improvable:30,poor:20}},[s.MetricType.FID]:{p75:240,p90:0,p95:0,p99:0,distribution:{good:70,improvable:20,poor:10}},[s.MetricType.TTFB]:{p75:530,p90:0,p95:0,p99:0,distribution:{good:95,improvable:5,poor:0}}};function m(e){let{children:n}=e;return(0,t.jsx)("div",{className:"flex flex-row @lg-page:flex-col overflow-hidden rounded-md shadow-md enable-vertical group divide-x @lg-page:divide-x-0 @lg-page:divide-y",children:n})}function g(e){let{children:n}=e;return(0,t.jsx)("div",{className:"flex flex-col @lg-page:flex-row p-3 pt-3.5 @lg-page:p-2 @lg-page:pt-2 gap-2 items-stretch @lg-page:items-center bg-background-100",children:n})}function x(e){let{metricDefinitions:n,metric:s,disabled:a,overview:l}=e,{set:d,state:{period:p,device:h}}=(0,r.useSpeedInsightsUrlState)(),{metric:m}=(0,c.useApiParams)(),{hasData:g}=(0,u.useSpeedInsightsStatus)();return(0,t.jsx)(i.Tab,{active:m===s,className:(0,o.cn)("px-4","first-child:rounded-tl last-child:rounded-bl","@lg-page:first-child:rounded-tl-0 @lg-page:last-child:rounded-bl-0"),disabled:a,label:n[s].name,loading:!1,onClick:()=>{d({metric:s})},period:p,value:(0,t.jsx)(f.MetricDisplay,{className:"flex-1",device:h,disabled:a,hasData:g,isLoading:!l,metric:s,metricDefinitions:n,size:"small",tooltipDelay:600,values:l})},s)}e.s(["VerticalTabs",0,function(e){let{metricDefinitions:i}=e,{EnableModal:o,openEnableModal:c}=(0,p.useOpenEnableModal)(),{supportsPlus:f,hasSpeedInsightsPlus:v,hasSpeedInsightsPlusOrRemainingDays:y,isLoading:j}=(0,u.useSpeedInsightsStatus)(),{set:b,state:S}=(0,r.useSpeedInsightsUrlState)(),{data:N}=(0,d.useTimeseriesWithQueryParams)(),M=(0,l.useMemo)(()=>{if(N)return f?f?{...h,...N.overview}:void 0:N.overview},[f,N]),w=(0,l.useMemo)(()=>!!f&&!y,[y,f]);(0,l.useEffect)(()=>{w&&S.metric!==s.MetricType.RES&&b({metric:s.MetricType.RES})},[w,S.metric,b]);let k=(0,t.jsx)(x,{metric:s.MetricType.RES,metricDefinitions:i,overview:M}),C=(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x,{disabled:w,metric:s.MetricType.FCP,metricDefinitions:i,overview:M}),(0,t.jsx)(x,{disabled:w,metric:s.MetricType.LCP,metricDefinitions:i,overview:M}),(0,t.jsx)(x,{disabled:w,metric:s.MetricType.INP,metricDefinitions:i,overview:M}),(0,t.jsx)(x,{disabled:w,metric:s.MetricType.CLS,metricDefinitions:i,overview:M})]}),E=j||!f||v?(0,t.jsxs)(m,{children:[k,C]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(m,{children:k}),(0,t.jsxs)(m,{children:[(0,t.jsxs)(g,{children:[(0,t.jsx)("span",{className:"font-medium font-sans flex-1 @lg-page:pl-1",children:"Available in Plus"}),(0,t.jsx)(a.Button,{size:"small",type:"secondary",onClick:c,children:"Upgrade"}),o]}),C]})]});return(0,t.jsx)(n.MobileScrollWrapper,{className:"-mx-6 -my-2 max-w-[100vw] flex-1",contentClassName:"py-2 px-6",children:(0,t.jsxs)("div",{className:"flex flex-row @lg-page:flex-col gap-2",children:[E,(0,t.jsxs)(m,{children:[(0,t.jsx)(x,{disabled:w,metric:s.MetricType.FID,metricDefinitions:i,overview:M}),(0,t.jsx)(x,{disabled:w,metric:s.MetricType.TTFB,metricDefinitions:i,overview:M})]})]})})}])},8901547,e=>{e.v({"slide-up":"graph-module__4Q3shW__slide-up",slideUpAnimation:"graph-module__4Q3shW__slideUpAnimation","tooltip-bottom":"graph-module__4Q3shW__tooltip-bottom"})},5835580,e=>{"use strict";var t,n,i,r,s=e.i(3267987),a=e.i(1381818);e.i(7286972);var o=e.i(5693388),l=e.i(4826595),c=e.i(8172689),u=e.i(8412040),d=e.i(3110195),p=e.i(709913),f=e.i(5771992),h=e.i(6060673),m=e.i(57106),g=e.i(931197),x=e.i(5005572),v=e.i(9722978),y=e.i(5255926),j=e.i(4655443),b=e.i(1053524),S=e.i(5018524),N=e.i(9463365),M=e.i(7946377),w=e.i(5269510),k=e.i(277234),C=e.i(7010772);let E=e=>{let t=(0,w.stringify)(e),{state:n}=(0,p.useSpeedInsightsUrlState)(),{data:i,error:r,isLoading:s}=(0,C.default)(`/api/v0/speed-insights/breakdown?${t}`,t=>(0,p.canMetricBeFiltered)(e.metric,n)?(0,k.fetchAPI)(t):{breakdown:[],notSupported:!0},{revalidateOnFocus:!1,shouldRetryOnError:e=>403!==(e.statusCode||e.status)});return{data:i?.breakdown&&!i.notSupported?function(e){let t={[g.Rating.Good]:[],[g.Rating.Improvable]:[],[g.Rating.Poor]:[]};for(let{ratings:n}of e)for(let[e,i]of Object.entries(n))for(let{group:n,value:r,datapoints:s}of i)t[e].push({key:"undefined"===n||""===n?"Unknown":n,values:[s,r]});return t}(i.breakdown):void 0,isLoading:s,isError:!!r}};var T=e.i(7344877),R=e.i(8545185),D=e.i(4254226),P=e.i(8264458),I=e.i(2304153),_=["top","left","transform","className","children","innerRef"];function A(){return(A=Object.assign.bind()).apply(this,arguments)}function O(e){var t=e.top,n=e.left,i=e.transform,r=e.className,s=e.children,a=e.innerRef,o=function(e,t){if(null==e)return{};var n,i,r={},s=Object.keys(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,_);return b.default.createElement("g",A({ref:a,className:(0,P.default)("visx-group",r),transform:i||"translate("+(void 0===n?0:n)+", "+(void 0===t?0:t)+")"},o),s)}O.propTypes={top:I.default.number,left:I.default.number,transform:I.default.string,className:I.default.string,children:I.default.node,innerRef:I.default.oneOfType([I.default.string,I.default.func,I.default.object])};var L=Math.PI,F=L/2,$=L/4,z=2*L,W=180/L,G=L/180,U=Math.abs,H=Math.atan,B=Math.atan2,V=Math.cos,Q=Math.ceil,K=Math.exp,q=Math.log,Z=Math.sin,Y=Math.sign||function(e){return e>0?1:e<0?-1:0},X=Math.sqrt,J=Math.tan;function ee(e){return e>1?F:e<-1?-F:Math.asin(e)}function et(){}function en(){var e,t=[];return{point:function(t,n,i){e.push([t,n,i])},lineStart:function(){t.push(e=[])},lineEnd:et,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function ei(e,t){return 1e-6>U(e[0]-t[0])&&1e-6>U(e[1]-t[1])}function er(e,t,n,i){this.x=e,this.z=t,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function es(e,t,n,i,r){var s,a,o=[],l=[];if(e.forEach(function(e){if(!((t=e.length-1)<=0)){var t,n,i=e[0],a=e[t];if(ei(i,a)){if(!i[2]&&!a[2]){for(r.lineStart(),s=0;s<t;++s)r.point((i=e[s])[0],i[1]);r.lineEnd();return}a[0]+=2e-6}o.push(n=new er(i,e,null,!0)),l.push(n.o=new er(i,null,n,!1)),o.push(n=new er(a,e,null,!1)),l.push(n.o=new er(a,null,n,!0))}}),o.length){for(l.sort(t),ea(o),ea(l),s=0,a=l.length;s<a;++s)l[s].e=n=!n;for(var c,u,d=o[0];;){for(var p=d,f=!0;p.v;)if((p=p.n)===d)return;c=p.z,r.lineStart();do{if(p.v=p.o.v=!0,p.e){if(f)for(s=0,a=c.length;s<a;++s)r.point((u=c[s])[0],u[1]);else i(p.x,p.n.x,1,r);p=p.n}else{if(f)for(s=(c=p.p.z).length-1;s>=0;--s)r.point((u=c[s])[0],u[1]);else i(p.x,p.p.x,-1,r);p=p.p}c=(p=p.o).z,f=!f}while(!p.v)r.lineEnd()}}}function ea(e){if(t=e.length){for(var t,n,i=0,r=e[0];++i<t;)r.n=n=e[i],n.p=r,r=n;r.n=n=e[0],n.p=r}}function eo(){this.reset()}eo.prototype={constructor:eo,reset:function(){this.s=this.t=0},add:function(e){ec(el,e,this.t),ec(this,el.s,this.s),this.s?this.t+=el.t:this.s=el.t},valueOf:function(){return this.s}};var el=new eo;function ec(e,t,n){var i=e.s=t+n,r=i-t;e.t=t-(i-r)+(n-r)}function eu(e){return[B(e[1],e[0]),ee(e[2])]}function ed(e){var t=e[0],n=e[1],i=V(n);return[i*V(t),i*Z(t),Z(n)]}function ep(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function ef(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function eh(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function em(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function eg(e){var t=X(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var ex=new eo;function ev(e){return U(e[0])<=L?e[0]:Y(e[0])*((U(e[0])+L)%z-L)}function ey(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}var ej=(1===(ts=ey).length&&(tr=ts,ts=function(e,t){return ey(tr(e),t)}),{left:function(e,t,n,i){for(null==n&&(n=0),null==i&&(i=e.length);n<i;){var r=n+i>>>1;0>ts(e[r],t)?n=r+1:i=r}return n},right:function(e,t,n,i){for(null==n&&(n=0),null==i&&(i=e.length);n<i;){var r=n+i>>>1;ts(e[r],t)>0?i=r:n=r+1}return n}});ej.right,ej.left;var eb=Array.prototype;function eS(e,t,n){e*=1,t*=1,n=(r=arguments.length)<2?(t=e,e=0,1):r<3?1:+n;for(var i=-1,r=0|Math.max(0,Math.ceil((t-e)/n)),s=Array(r);++i<r;)s[i]=e+i*n;return s}function eN(e){for(var t,n,i,r=e.length,s=-1,a=0;++s<r;)a+=e[s].length;for(n=Array(a);--r>=0;)for(t=(i=e[r]).length;--t>=0;)n[--a]=i[t];return n}function eM(e,t,n,i){return function(r){var s,a,o,l=t(r),c=en(),u=t(c),d=!1,p={point:f,lineStart:m,lineEnd:g,polygonStart:function(){p.point=x,p.lineStart=v,p.lineEnd=y,a=[],s=[]},polygonEnd:function(){p.point=f,p.lineStart=m,p.lineEnd=g,a=eN(a);var e=function(e,t){var n=ev(t),i=t[1],r=Z(i),s=[Z(n),-V(n),0],a=0,o=0;ex.reset(),1===r?i=F+1e-6:-1===r&&(i=-F-1e-6);for(var l=0,c=e.length;l<c;++l)if(d=(u=e[l]).length)for(var u,d,p=u[d-1],f=ev(p),h=p[1]/2+$,m=Z(h),g=V(h),x=0;x<d;++x,f=y,m=b,g=S,p=v){var v=u[x],y=ev(v),j=v[1]/2+$,b=Z(j),S=V(j),N=y-f,M=N>=0?1:-1,w=M*N,k=w>L,C=m*b;if(ex.add(B(C*M*Z(w),g*S+C*V(w))),a+=k?N+M*z:N,k^f>=n^y>=n){var E=ef(ed(p),ed(v));eg(E);var T=ef(s,E);eg(T);var R=(k^N>=0?-1:1)*ee(T[2]);(i>R||i===R&&(E[0]||E[1]))&&(o+=k^N>=0?1:-1)}}return(a<-1e-6||a<1e-6&&ex<-1e-6)^1&o}(s,i);a.length?(d||(r.polygonStart(),d=!0),es(a,ek,e,n,r)):e&&(d||(r.polygonStart(),d=!0),r.lineStart(),n(null,null,1,r),r.lineEnd()),d&&(r.polygonEnd(),d=!1),a=s=null},sphere:function(){r.polygonStart(),r.lineStart(),n(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function f(t,n){e(t,n)&&r.point(t,n)}function h(e,t){l.point(e,t)}function m(){p.point=h,l.lineStart()}function g(){p.point=f,l.lineEnd()}function x(e,t){o.push([e,t]),u.point(e,t)}function v(){u.lineStart(),o=[]}function y(){x(o[0][0],o[0][1]),u.lineEnd();var e,t,n,i,l=u.clean(),p=c.result(),f=p.length;if(o.pop(),s.push(o),o=null,f){if(1&l){if((t=(n=p[0]).length-1)>0){for(d||(r.polygonStart(),d=!0),r.lineStart(),e=0;e<t;++e)r.point((i=n[e])[0],i[1]);r.lineEnd()}return}f>1&&2&l&&p.push(p.pop().concat(p.shift())),a.push(p.filter(ew))}}return p}}function ew(e){return e.length>1}function ek(e,t){return((e=e.x)[0]<0?e[1]-F-1e-6:F-e[1])-((t=t.x)[0]<0?t[1]-F-1e-6:F-t[1])}eb.slice,eb.map;let eC=eM(function(){return!0},function(e){var t,n=NaN,i=NaN,r=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(s,a){var o,l,c,u,d,p,f,h=s>0?L:-L,m=U(s-n);1e-6>U(m-L)?(e.point(n,i=(i+a)/2>0?F:-F),e.point(r,i),e.lineEnd(),e.lineStart(),e.point(h,i),e.point(s,i),t=0):r!==h&&m>=L&&(1e-6>U(n-r)&&(n-=1e-6*r),1e-6>U(s-h)&&(s-=1e-6*h),o=n,l=i,c=s,u=a,i=U(f=Z(o-c))>1e-6?H((Z(l)*(p=V(u))*Z(c)-Z(u)*(d=V(l))*Z(o))/(d*p*f)):(l+u)/2,e.point(r,i),e.lineEnd(),e.lineStart(),e.point(h,i),t=0),e.point(n=s,i=a),r=h},lineEnd:function(){e.lineEnd(),n=i=NaN},clean:function(){return 2-t}}},function(e,t,n,i){var r;if(null==e)r=n*F,i.point(-L,r),i.point(0,r),i.point(L,r),i.point(L,0),i.point(L,-r),i.point(0,-r),i.point(-L,-r),i.point(-L,0),i.point(-L,r);else if(U(e[0]-t[0])>1e-6){var s=e[0]<t[0]?L:-L;r=n*s/2,i.point(-s,r),i.point(0,r),i.point(s,r)}else i.point(t[0],t[1])},[-L,-F]);function eE(e,t){function n(n,i){return t((n=e(n,i))[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,i){return(n=t.invert(n,i))&&e.invert(n[0],n[1])}),n}function eT(e,t){return[U(e)>L?e+Math.round(-e/z)*z:e,t]}function eR(e,t,n){return(e%=z)?t||n?eE(eP(e),eI(t,n)):eP(e):t||n?eI(t,n):eT}function eD(e){return function(t,n){return[(t+=e)>L?t-z:t<-L?t+z:t,n]}}function eP(e){var t=eD(e);return t.invert=eD(-e),t}function eI(e,t){var n=V(e),i=Z(e),r=V(t),s=Z(t);function a(e,t){var a=V(t),o=V(e)*a,l=Z(e)*a,c=Z(t),u=c*n+o*i;return[B(l*r-u*s,o*n-c*i),ee(u*r+l*s)]}return a.invert=function(e,t){var a=V(t),o=V(e)*a,l=Z(e)*a,c=Z(t),u=c*r-l*s;return[B(l*r+c*s,o*n+u*i),ee(u*n-o*i)]},a}function e_(e,t){t=ed(t),t[0]-=e,eg(t);var n,i=(n=-t[1])>1?0:n<-1?L:Math.acos(n);return((0>-t[2]?-i:i)+z-1e-6)%z}eT.invert=eT;function eA(e){return e}function eO(e){return function(t){var n=new eL;for(var i in e)n[i]=e[i];return n.stream=t,n}}function eL(){}function eF(e,t){e&&ez.hasOwnProperty(e.type)&&ez[e.type](e,t)}eL.prototype={constructor:eL,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var e$={Feature:function(e,t){eF(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,i=-1,r=n.length;++i<r;)eF(n[i].geometry,t)}},ez={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)e=n[i],t.point(e[0],e[1],e[2])},LineString:function(e,t){eW(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)eW(n[i],t,0)},Polygon:function(e,t){eG(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)eG(n[i],t)},GeometryCollection:function(e,t){for(var n=e.geometries,i=-1,r=n.length;++i<r;)eF(n[i],t)}};function eW(e,t,n){var i,r=-1,s=e.length-n;for(t.lineStart();++r<s;)i=e[r],t.point(i[0],i[1],i[2]);t.lineEnd()}function eG(e,t){var n=-1,i=e.length;for(t.polygonStart();++n<i;)eW(e[n],t,1);t.polygonEnd()}function eU(e,t){e&&e$.hasOwnProperty(e.type)?e$[e.type](e,t):eF(e,t)}var eH=1/0,eB=1/0,eV=-1/0,eQ=eV;let eK={point:function(e,t){e<eH&&(eH=e),e>eV&&(eV=e),t<eB&&(eB=t),t>eQ&&(eQ=t)},lineStart:et,lineEnd:et,polygonStart:et,polygonEnd:et,result:function(){var e=[[eH,eB],[eV,eQ]];return eV=eQ=-(eB=eH=1/0),e}};function eq(e,t,n){var i=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),null!=i&&e.clipExtent(null),eU(n,e.stream(eK)),t(eK.result()),null!=i&&e.clipExtent(i),e}function eZ(e,t,n){return eq(e,function(n){var i=t[1][0]-t[0][0],r=t[1][1]-t[0][1],s=Math.min(i/(n[1][0]-n[0][0]),r/(n[1][1]-n[0][1])),a=+t[0][0]+(i-s*(n[1][0]+n[0][0]))/2,o=+t[0][1]+(r-s*(n[1][1]+n[0][1]))/2;e.scale(150*s).translate([a,o])},n)}function eY(e,t,n){return eZ(e,[[0,0],t],n)}function eX(e,t,n){return eq(e,function(n){var i=+t,r=i/(n[1][0]-n[0][0]),s=(i-r*(n[1][0]+n[0][0]))/2,a=-r*n[0][1];e.scale(150*r).translate([s,a])},n)}function eJ(e,t,n){return eq(e,function(n){var i=+t,r=i/(n[1][1]-n[0][1]),s=-r*n[0][0],a=(i-r*(n[1][1]+n[0][1]))/2;e.scale(150*r).translate([s,a])},n)}var e0=V(30*G);function e1(e,t){var n;return+t?function(e,t){function n(i,r,s,a,o,l,c,u,d,p,f,h,m,g){var x=c-i,v=u-r,y=x*x+v*v;if(y>4*t&&m--){var j=a+p,b=o+f,S=l+h,N=X(j*j+b*b+S*S),M=ee(S/=N),w=1e-6>U(U(S)-1)||1e-6>U(s-d)?(s+d)/2:B(b,j),k=e(w,M),C=k[0],E=k[1],T=C-i,R=E-r,D=v*T-x*R;(D*D/y>t||U((x*T+v*R)/y-.5)>.3||a*p+o*f+l*h<e0)&&(n(i,r,s,a,o,l,C,E,w,j/=N,b/=N,S,m,g),g.point(C,E),n(C,E,w,j,b,S,c,u,d,p,f,h,m,g))}}return function(t){var i,r,s,a,o,l,c,u,d,p,f,h,m={point:g,lineStart:x,lineEnd:y,polygonStart:function(){t.polygonStart(),m.lineStart=j},polygonEnd:function(){t.polygonEnd(),m.lineStart=x}};function g(n,i){n=e(n,i),t.point(n[0],n[1])}function x(){u=NaN,m.point=v,t.lineStart()}function v(i,r){var s=ed([i,r]),a=e(i,r);n(u,d,c,p,f,h,u=a[0],d=a[1],c=i,p=s[0],f=s[1],h=s[2],16,t),t.point(u,d)}function y(){m.point=g,t.lineEnd()}function j(){x(),m.point=b,m.lineEnd=S}function b(e,t){v(i=e,t),r=u,s=d,a=p,o=f,l=h,m.point=v}function S(){n(u,d,c,p,f,h,r,s,i,a,o,l,16,t),m.lineEnd=y,y()}return m}}(e,t):(n=e,eO({point:function(e,t){e=n(e,t),this.stream.point(e[0],e[1])}}))}var e2=eO({point:function(e,t){this.stream.point(e*G,t*G)}});function e5(e,t,n,i,r,s){var a=V(s),o=Z(s),l=a*e,c=o*e,u=a/e,d=o/e,p=(o*n-a*t)/e,f=(o*t+a*n)/e;function h(e,s){return[l*(e*=i)-c*(s*=r)+t,n-c*e-l*s]}return h.invert=function(e,t){return[i*(u*e-d*t+p),r*(f-d*e-u*t)]},h}function e9(e){return e3(function(){return e})()}function e3(e){var t,n,i,r,s,a,o,l,c,u,d=150,p=480,f=250,h=0,m=0,g=0,x=0,v=0,y=0,j=1,b=1,S=null,N=eC,M=null,w=eA,k=.5;function C(e){return l(e[0]*G,e[1]*G)}function E(e){return(e=l.invert(e[0],e[1]))&&[e[0]*W,e[1]*W]}function T(){var e=e5(d,0,0,j,b,y).apply(null,t(h,m)),i=(y?e5:function(e,t,n,i,r){function s(s,a){return[t+e*(s*=i),n-e*(a*=r)]}return s.invert=function(s,a){return[(s-t)/e*i,(n-a)/e*r]},s})(d,p-e[0],f-e[1],j,b,y);return n=eR(g,x,v),o=eE(t,i),l=eE(n,o),a=e1(o,k),R()}function R(){return c=u=null,C}return C.stream=function(e){var t;return c&&u===e?c:c=e2((t=n,eO({point:function(e,n){var i=t(e,n);return this.stream.point(i[0],i[1])}}))(N(a(w(u=e)))))},C.preclip=function(e){return arguments.length?(N=e,S=void 0,R()):N},C.postclip=function(e){return arguments.length?(w=e,M=i=r=s=null,R()):w},C.clipAngle=function(e){return arguments.length?(N=+e?function(e){var t=V(e),n=6*G,i=t>0,r=U(t)>1e-6;function s(e,n){return V(e)*V(n)>t}function a(e,n,i){var r=ed(e),s=ed(n),a=[1,0,0],o=ef(r,s),l=ep(o,o),c=o[0],u=l-c*c;if(!u)return!i&&e;var d=ef(a,o),p=em(a,t*l/u);eh(p,em(o,-t*c/u));var f=ep(p,d),h=ep(d,d),m=f*f-h*(ep(p,p)-1);if(!(m<0)){var g=X(m),x=em(d,(-f-g)/h);if(eh(x,p),x=eu(x),!i)return x;var v,y=e[0],j=n[0],b=e[1],S=n[1];j<y&&(v=y,y=j,j=v);var N=j-y,M=1e-6>U(N-L);if(!M&&S<b&&(v=b,b=S,S=v),M||N<1e-6?M?b+S>0^x[1]<(1e-6>U(x[0]-y)?b:S):b<=x[1]&&x[1]<=S:N>L^(y<=x[0]&&x[0]<=j)){var w=em(d,(-f+g)/h);return eh(w,p),[x,eu(w)]}}}function o(t,n){var r=i?e:L-e,s=0;return t<-r?s|=1:t>r&&(s|=2),n<-r?s|=4:n>r&&(s|=8),s}return eM(s,function(e){var t,n,l,c,u;return{lineStart:function(){c=l=!1,u=1},point:function(d,p){var f,h,m=[d,p],g=s(d,p),x=i?g?0:o(d,p):g?o(d+(d<0?L:-L),p):0;!t&&(c=l=g)&&e.lineStart(),g!==l&&(!(h=a(t,m))||ei(t,h)||ei(m,h))&&(m[2]=1),g!==l?(u=0,g?(e.lineStart(),h=a(m,t),e.point(h[0],h[1])):(h=a(t,m),e.point(h[0],h[1],2),e.lineEnd()),t=h):r&&t&&i^g&&!(x&n)&&(f=a(m,t,!0))&&(u=0,i?(e.lineStart(),e.point(f[0][0],f[0][1]),e.point(f[1][0],f[1][1]),e.lineEnd()):(e.point(f[1][0],f[1][1]),e.lineEnd(),e.lineStart(),e.point(f[0][0],f[0][1],3))),!g||t&&ei(t,m)||e.point(m[0],m[1]),t=m,l=g,n=x},lineEnd:function(){l&&e.lineEnd(),t=null},clean:function(){return u|(c&&l)<<1}}},function(t,i,r,s){!function(e,t,n,i,r,s){if(n){var a=V(t),o=Z(t),l=i*n;null==r?(r=t+i*z,s=t-l/2):(r=e_(a,r),s=e_(a,s),(i>0?r<s:r>s)&&(r+=i*z));for(var c,u=r;i>0?u>s:u<s;u-=l)c=eu([a,-o*V(u),-o*Z(u)]),e.point(c[0],c[1])}}(s,e,n,r,t,i)},i?[0,-e]:[-L,e-L])}(S=e*G):(S=null,eC),R()):S*W},C.clipExtent=function(e){return arguments.length?(w=null==e?(M=i=r=s=null,eA):function(e,t,n,i){function r(r,s){return e<=r&&r<=n&&t<=s&&s<=i}function s(r,s,o,c){var u=0,d=0;if(null==r||(u=a(r,o))!==(d=a(s,o))||0>l(r,s)^o>0)do c.point(0===u||3===u?e:n,u>1?i:t);while((u=(u+o+4)%4)!==d)else c.point(s[0],s[1])}function a(i,r){return 1e-6>U(i[0]-e)?r>0?0:3:1e-6>U(i[0]-n)?r>0?2:1:1e-6>U(i[1]-t)?+(r>0):r>0?3:2}function o(e,t){return l(e.x,t.x)}function l(e,t){var n=a(e,1),i=a(t,1);return n!==i?n-i:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(a){var l,c,u,d,p,f,h,m,g,x,v,y=a,j=en(),b={point:S,lineStart:function(){b.point=N,c&&c.push(u=[]),x=!0,g=!1,h=m=NaN},lineEnd:function(){l&&(N(d,p),f&&g&&j.rejoin(),l.push(j.result())),b.point=S,g&&y.lineEnd()},polygonStart:function(){y=j,l=[],c=[],v=!0},polygonEnd:function(){var t=function(){for(var t=0,n=0,r=c.length;n<r;++n)for(var s,a,o=c[n],l=1,u=o.length,d=o[0],p=d[0],f=d[1];l<u;++l)s=p,a=f,p=(d=o[l])[0],f=d[1],a<=i?f>i&&(p-s)*(i-a)>(f-a)*(e-s)&&++t:f<=i&&(p-s)*(i-a)<(f-a)*(e-s)&&--t;return t}(),n=v&&t,r=(l=eN(l)).length;(n||r)&&(a.polygonStart(),n&&(a.lineStart(),s(null,null,1,a),a.lineEnd()),r&&es(l,o,t,s,a),a.polygonEnd()),y=a,l=c=u=null}};function S(e,t){r(e,t)&&y.point(e,t)}function N(s,a){var o=r(s,a);if(c&&u.push([s,a]),x)d=s,p=a,f=o,x=!1,o&&(y.lineStart(),y.point(s,a));else if(o&&g)y.point(s,a);else{var l=[h=Math.max(-1e9,Math.min(1e9,h)),m=Math.max(-1e9,Math.min(1e9,m))],j=[s=Math.max(-1e9,Math.min(1e9,s)),a=Math.max(-1e9,Math.min(1e9,a))];!function(e,t,n,i,r,s){var a,o=e[0],l=e[1],c=t[0],u=t[1],d=0,p=1,f=c-o,h=u-l;if(a=n-o,!f&&a>0)return;if(a/=f,f<0){if(a<d)return;a<p&&(p=a)}else if(f>0){if(a>p)return;a>d&&(d=a)}if(a=r-o,f||!(a<0)){if(a/=f,f<0){if(a>p)return;a>d&&(d=a)}else if(f>0){if(a<d)return;a<p&&(p=a)}if(a=i-l,h||!(a>0)){if(a/=h,h<0){if(a<d)return;a<p&&(p=a)}else if(h>0){if(a>p)return;a>d&&(d=a)}if(a=s-l,h||!(a<0)){if(a/=h,h<0){if(a>p)return;a>d&&(d=a)}else if(h>0){if(a<d)return;a<p&&(p=a)}return d>0&&(e[0]=o+d*f,e[1]=l+d*h),p<1&&(t[0]=o+p*f,t[1]=l+p*h),!0}}}}(l,j,e,t,n,i)?o&&(y.lineStart(),y.point(s,a),v=!1):(g||(y.lineStart(),y.point(l[0],l[1])),y.point(j[0],j[1]),o||y.lineEnd(),v=!1)}h=s,m=a,g=o}return b}}(M=+e[0][0],i=+e[0][1],r=+e[1][0],s=+e[1][1]),R()):null==M?null:[[M,i],[r,s]]},C.scale=function(e){return arguments.length?(d=+e,T()):d},C.translate=function(e){return arguments.length?(p=+e[0],f=+e[1],T()):[p,f]},C.center=function(e){return arguments.length?(h=e[0]%360*G,m=e[1]%360*G,T()):[h*W,m*W]},C.rotate=function(e){return arguments.length?(g=e[0]%360*G,x=e[1]%360*G,v=e.length>2?e[2]%360*G:0,T()):[g*W,x*W,v*W]},C.angle=function(e){return arguments.length?(y=e%360*G,T()):y*W},C.reflectX=function(e){return arguments.length?(j=e?-1:1,T()):j<0},C.reflectY=function(e){return arguments.length?(b=e?-1:1,T()):b<0},C.precision=function(e){return arguments.length?(a=e1(o,k=e*e),R()):X(k)},C.fitExtent=function(e,t){return eZ(C,e,t)},C.fitSize=function(e,t){return eY(C,e,t)},C.fitWidth=function(e,t){return eX(C,e,t)},C.fitHeight=function(e,t){return eJ(C,e,t)},function(){return t=e.apply(this,arguments),C.invert=t.invert&&E,T()}}function e7(e,t){return[V(t)*Z(e),Z(t)]}function e6(e,t){var n=Z(e),i=(n+Z(t))/2;if(1e-6>U(i)){var r=V(e);function s(e,t){return[e*r,Z(t)/r]}return s.invert=function(e,t){return[e/r,ee(t*r)]},s}var a=1+n*(2*i-n),o=X(a)/i;function l(e,t){var n=X(a-2*i*Z(t))/i;return[n*Z(e*=i),o-n*V(e)]}return l.invert=function(e,t){var n=o-t,r=B(e,U(n))*Y(n);return n*i<0&&(r-=L*Y(e)*Y(n)),[r/i,ee((a-(e*e+n*n)*i*i)/(2*i))]},l}function e8(){var e,t,n,i;return(e=0,t=L/3,(i=(n=e3(e6))(e,t)).parallels=function(i){return arguments.length?n(e=i[0]*G,t=i[1]*G):[e*W,t*W]},i).scale(155.424).center([0,33.6442])}function e4(){return e8().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function te(e,t){return[e,q(J((F+t)/2))]}function tt(e,t){var n=t*t,i=n*n;return[e*(.8707-.131979*n+i*(-.013791+i*(.003971*n-.001529*i))),t*(1.007226+n*(.015085+i*(-.044475+.028874*n-.005916*i)))]}e7.invert=function(e,t){var n=X(e*e+t*t),i=ee(n),r=Z(i);return[B(e*r,n*V(i)),ee(n&&t*r/n)]},te.invert=function(e,t){return[e,2*H(K(t))-F]},tt.invert=function(e,t){var n,i=t,r=25;do{var s=i*i,a=s*s;i-=n=(i*(1.007226+s*(.015085+a*(-.044475+.028874*s-.005916*a)))-t)/(1.007226+s*(.045255+a*(-.311325+.259866*s-.005916*11*a)))}while(U(n)>1e-6&&--r>0)return[e/(.8707+(s=i*i)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),i]};var tn=X(3)/2;function ti(e,t){var n=ee(tn*Z(t)),i=n*n,r=i*i*i;return[e*V(n)/(tn*(1.340264+-.24331799999999998*i+r*(.0062510000000000005+.034164*i))),n*(1.340264+-.081106*i+r*(893e-6+.003796*i))]}ti.invert=function(e,t){for(var n,i,r=t,s=r*r,a=s*s*s,o=0;o<12&&(i=r*(1.340264+-.081106*s+a*(893e-6+.003796*s))-t,r-=n=i/(1.340264+-.24331799999999998*s+a*(.0062510000000000005+.034164*s)),a=(s=r*r)*s*s,!(1e-12>U(n)));++o);return[tn*e*(1.340264+-.24331799999999998*s+a*(.0062510000000000005+.034164*s))/V(r),ee(Z(r)/tn)]};var tr,ts,ta,to,tl,tc,tu=new eo,td=new eo,tp={point:et,lineStart:et,lineEnd:et,polygonStart:function(){tp.lineStart=tf,tp.lineEnd=tg},polygonEnd:function(){tp.lineStart=tp.lineEnd=tp.point=et,tu.add(U(td)),td.reset()},result:function(){var e=tu/2;return tu.reset(),e}};function tf(){tp.point=th}function th(e,t){tp.point=tm,ta=tl=e,to=tc=t}function tm(e,t){td.add(tc*e-tl*t),tl=e,tc=t}function tg(){tm(ta,to)}var tx,tv,ty,tj,tb=0,tS=0,tN=0,tM=0,tw=0,tk=0,tC=0,tE=0,tT=0,tR={point:tD,lineStart:tP,lineEnd:tA,polygonStart:function(){tR.lineStart=tO,tR.lineEnd=tL},polygonEnd:function(){tR.point=tD,tR.lineStart=tP,tR.lineEnd=tA},result:function(){var e=tT?[tC/tT,tE/tT]:tk?[tM/tk,tw/tk]:tN?[tb/tN,tS/tN]:[NaN,NaN];return tb=tS=tN=tM=tw=tk=tC=tE=tT=0,e}};function tD(e,t){tb+=e,tS+=t,++tN}function tP(){tR.point=tI}function tI(e,t){tR.point=t_,tD(ty=e,tj=t)}function t_(e,t){var n=e-ty,i=t-tj,r=X(n*n+i*i);tM+=r*(ty+e)/2,tw+=r*(tj+t)/2,tk+=r,tD(ty=e,tj=t)}function tA(){tR.point=tD}function tO(){tR.point=tF}function tL(){t$(tx,tv)}function tF(e,t){tR.point=t$,tD(tx=ty=e,tv=tj=t)}function t$(e,t){var n=e-ty,i=t-tj,r=X(n*n+i*i);tM+=r*(ty+e)/2,tw+=r*(tj+t)/2,tk+=r,tC+=(r=tj*e-ty*t)*(ty+e),tE+=r*(tj+t),tT+=3*r,tD(ty=e,tj=t)}function tz(e){this._context=e}tz.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._context.moveTo(e,t),this._point=1;break;case 1:this._context.lineTo(e,t);break;default:this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,z)}},result:et};var tW,tG,tU,tH,tB,tV=new eo,tQ={point:et,lineStart:function(){tQ.point=tK},lineEnd:function(){tW&&tq(tG,tU),tQ.point=et},polygonStart:function(){tW=!0},polygonEnd:function(){tW=null},result:function(){var e=+tV;return tV.reset(),e}};function tK(e,t){tQ.point=tq,tG=tH=e,tU=tB=t}function tq(e,t){tH-=e,tB-=t,tV.add(X(tH*tH+tB*tB)),tH=e,tB=t}function tZ(){this._string=[]}function tY(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function tX(e,t,n){var i=eS(e,t-1e-6,n).concat(t);return function(e){return i.map(function(t){return[e,t]})}}function tJ(e,t,n){var i=eS(e,t-1e-6,n).concat(t);return function(e){return i.map(function(t){return[t,e]})}}tZ.prototype={_radius:4.5,_circle:tY(4.5),pointRadius:function(e){return(e*=1)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._string.push("M",e,",",t),this._point=1;break;case 1:this._string.push("L",e,",",t);break;default:null==this._circle&&(this._circle=tY(this._radius)),this._string.push("M",e,",",t,this._circle)}},result:function(){if(!this._string.length)return null;var e=this._string.join("");return this._string=[],e}};var t0=["graticule","lines","outline","extent","extentMajor","extentMinor","step","stepMajor","stepMinor","precision","children"];function t1(){return(t1=Object.assign.bind()).apply(this,arguments)}function t2(e){var t=e.graticule,n=e.lines,i=e.outline,r=e.extent,s=e.extentMajor,a=e.extentMinor,o=e.step,l=e.stepMajor,c=e.stepMinor,u=e.precision,d=e.children,p=function(e,t){if(null==e)return{};var n,i,r={},s=Object.keys(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t0),f=function(){var e,t,n,i,r,s,a,o,l,c,u,d,p=10,f=10,h=90,m=360,g=2.5;function x(){return{type:"MultiLineString",coordinates:v()}}function v(){return eS(Q(i/h)*h,n,h).map(u).concat(eS(Q(o/m)*m,a,m).map(d)).concat(eS(Q(t/p)*p,e,p).filter(function(e){return U(e%h)>1e-6}).map(l)).concat(eS(Q(s/f)*f,r,f).filter(function(e){return U(e%m)>1e-6}).map(c))}return x.lines=function(){return v().map(function(e){return{type:"LineString",coordinates:e}})},x.outline=function(){return{type:"Polygon",coordinates:[u(i).concat(d(a).slice(1),u(n).reverse().slice(1),d(o).reverse().slice(1))]}},x.extent=function(e){return arguments.length?x.extentMajor(e).extentMinor(e):x.extentMinor()},x.extentMajor=function(e){return arguments.length?(i=+e[0][0],n=+e[1][0],o=+e[0][1],a=+e[1][1],i>n&&(e=i,i=n,n=e),o>a&&(e=o,o=a,a=e),x.precision(g)):[[i,o],[n,a]]},x.extentMinor=function(n){return arguments.length?(t=+n[0][0],e=+n[1][0],s=+n[0][1],r=+n[1][1],t>e&&(n=t,t=e,e=n),s>r&&(n=s,s=r,r=n),x.precision(g)):[[t,s],[e,r]]},x.step=function(e){return arguments.length?x.stepMajor(e).stepMinor(e):x.stepMinor()},x.stepMajor=function(e){return arguments.length?(h=+e[0],m=+e[1],x):[h,m]},x.stepMinor=function(e){return arguments.length?(p=+e[0],f=+e[1],x):[p,f]},x.precision=function(p){return arguments.length?(g=+p,l=tX(s,r,90),c=tJ(t,e,g),u=tX(o,a,90),d=tJ(i,n,g),x):g},x.extentMajor([[-180,-89.999999],[180,89.999999]]).extentMinor([[-180,-80.000001],[180,80.000001]])}();return(r&&f.extent(r),s&&f.extentMajor(s),a&&f.extentMinor(a),o&&f.step(o),l&&f.stepMajor(l),c&&f.stepMinor(c),u&&f.precision(u),d)?b.default.createElement(b.default.Fragment,null,d({graticule:f})):b.default.createElement(O,{className:"visx-geo-graticule"},t&&b.default.createElement("path",t1({d:t(f()),fill:"none",stroke:"black"},p)),n&&f.lines().map(function(e,t){return b.default.createElement("g",{key:t},b.default.createElement("path",t1({d:n(e),fill:"none",stroke:"black"},p)))}),i&&b.default.createElement("path",t1({d:i(f.outline()),fill:"none",stroke:"black"},p)))}t2.propTypes={graticule:D.default.func,lines:D.default.func,outline:D.default.func,children:D.default.func,precision:D.default.number};var t5=["data","projection","projectionFunc","clipAngle","clipExtent","scale","translate","center","rotate","precision","fitExtent","fitSize","centroid","graticule","graticuleLines","graticuleOutline","className","innerRef","pointRadius","children"];function t9(){return(t9=Object.assign.bind()).apply(this,arguments)}var t3={orthographic:function(){return e9(e7).scale(249.5).clipAngle(90.000001)},albers:function(){return e4()},albersUsa:function(){return function(){var e,t,n,i,r,s,a=e4(),o=e8().rotate([154,0]).center([-2,58.5]).parallels([55,65]),l=e8().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(e,t){s=[e,t]}};function u(e){var t=e[0],a=e[1];return s=null,n.point(t,a),s||(i.point(t,a),s)||(r.point(t,a),s)}function d(){return e=t=null,u}return u.invert=function(e){var t=a.scale(),n=a.translate(),i=(e[0]-n[0])/t,r=(e[1]-n[1])/t;return(r>=.12&&r<.234&&i>=-.425&&i<-.214?o:r>=.166&&r<.234&&i>=-.214&&i<-.115?l:a).invert(e)},u.stream=function(n){var i,r;return e&&t===n?e:(r=(i=[a.stream(t=n),o.stream(n),l.stream(n)]).length,e={point:function(e,t){for(var n=-1;++n<r;)i[n].point(e,t)},sphere:function(){for(var e=-1;++e<r;)i[e].sphere()},lineStart:function(){for(var e=-1;++e<r;)i[e].lineStart()},lineEnd:function(){for(var e=-1;++e<r;)i[e].lineEnd()},polygonStart:function(){for(var e=-1;++e<r;)i[e].polygonStart()},polygonEnd:function(){for(var e=-1;++e<r;)i[e].polygonEnd()}})},u.precision=function(e){return arguments.length?(a.precision(e),o.precision(e),l.precision(e),d()):a.precision()},u.scale=function(e){return arguments.length?(a.scale(e),o.scale(.35*e),l.scale(e),u.translate(a.translate())):a.scale()},u.translate=function(e){if(!arguments.length)return a.translate();var t=a.scale(),s=+e[0],u=+e[1];return n=a.translate(e).clipExtent([[s-.455*t,u-.238*t],[s+.455*t,u+.238*t]]).stream(c),i=o.translate([s-.307*t,u+.201*t]).clipExtent([[s-.425*t+1e-6,u+.12*t+1e-6],[s-.214*t-1e-6,u+.234*t-1e-6]]).stream(c),r=l.translate([s-.205*t,u+.212*t]).clipExtent([[s-.214*t+1e-6,u+.166*t+1e-6],[s-.115*t-1e-6,u+.234*t-1e-6]]).stream(c),d()},u.fitExtent=function(e,t){return eZ(u,e,t)},u.fitSize=function(e,t){return eY(u,e,t)},u.fitWidth=function(e,t){return eX(u,e,t)},u.fitHeight=function(e,t){return eJ(u,e,t)},u.scale(1070)}()},mercator:function(){return(function(e){var t,n,i,r=e9(e),s=r.center,a=r.scale,o=r.translate,l=r.clipExtent,c=null;function u(){var s=L*a(),o=r((function(e){function t(t){return t=e(t[0]*G,t[1]*G),t[0]*=W,t[1]*=W,t}return e=eR(e[0]*G,e[1]*G,e.length>2?e[2]*G:0),t.invert=function(t){return t=e.invert(t[0]*G,t[1]*G),t[0]*=W,t[1]*=W,t},t})(r.rotate()).invert([0,0]));return l(null==c?[[o[0]-s,o[1]-s],[o[0]+s,o[1]+s]]:e===te?[[Math.max(o[0]-s,c),t],[Math.min(o[0]+s,n),i]]:[[c,Math.max(o[1]-s,t)],[n,Math.min(o[1]+s,i)]])}return r.scale=function(e){return arguments.length?(a(e),u()):a()},r.translate=function(e){return arguments.length?(o(e),u()):o()},r.center=function(e){return arguments.length?(s(e),u()):s()},r.clipExtent=function(e){return arguments.length?(null==e?c=t=n=i=null:(c=+e[0][0],t=+e[0][1],n=+e[1][0],i=+e[1][1]),u()):null==c?null:[[c,t],[n,i]]},u()})(te).scale(961/z)},naturalEarth:function(){return e9(tt).scale(175.295)},equalEarth:function(){return e9(ti).scale(177.158)}};function t7(e){var t=e.data,n=e.projection,i=void 0===n?"mercator":n,r=e.projectionFunc,s=e.clipAngle,a=e.clipExtent,o=e.scale,l=e.translate,c=e.center,u=e.rotate,d=e.precision,p=e.fitExtent,f=e.fitSize,h=e.centroid,m=e.graticule,g=e.graticuleLines,x=e.graticuleOutline,v=e.className,y=e.innerRef,j=e.pointRadius,S=e.children,N=function(e,t){if(null==e)return{};var n,i,r={},s=Object.keys(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t5),M=("string"==typeof i?t3[i]:i)();s&&M.clipAngle&&M.clipAngle(s),a&&M.clipExtent&&M.clipExtent(a),o&&M.scale&&M.scale(o),l&&M.translate&&M.translate(l),c&&M.center&&M.center(c),u&&M.rotate&&M.rotate(u),d&&M.precision&&M.precision(d),p&&M.fitExtent&&M.fitExtent.apply(M,p),f&&M.fitSize&&M.fitSize.apply(M,f);var w=(function(e,t){var n,i,r=4.5;function s(e){return e&&("function"==typeof r&&i.pointRadius(+r.apply(this,arguments)),eU(e,n(i))),i.result()}return s.area=function(e){return eU(e,n(tp)),tp.result()},s.measure=function(e){return eU(e,n(tQ)),tQ.result()},s.bounds=function(e){return eU(e,n(eK)),eK.result()},s.centroid=function(e){return eU(e,n(tR)),tR.result()},s.projection=function(t){return arguments.length?(n=null==t?(e=null,eA):(e=t).stream,s):e},s.context=function(e){return arguments.length?(i=null==e?(t=null,new tZ):new tz(t=e),"function"!=typeof r&&i.pointRadius(r),s):t},s.pointRadius=function(e){return arguments.length?(r="function"==typeof e?e:(i.pointRadius(+e),+e),s):r},s.projection(e).context(t)})().projection(M);j&&w.pointRadius(j);var k=t.map(function(e,t){return{feature:e,type:i,projection:M,index:t,centroid:w.centroid(e),path:w(e)}});return S?b.default.createElement(b.default.Fragment,null,S({path:w,features:k,projection:M})):b.default.createElement(O,{className:"visx-geo"},m&&!m.foreground&&b.default.createElement(t2,t9({graticule:function(e){return w(e)||""}},m)),g&&!g.foreground&&b.default.createElement(t2,t9({lines:function(e){return w(e)||""}},g)),x&&!x.foreground&&b.default.createElement(t2,t9({outline:function(e){return w(e)||""}},x)),k.map(function(e,t){return b.default.createElement("g",{key:i+"-"+t},b.default.createElement("path",t9({className:(0,P.default)("visx-geo-"+i,v),d:e.path||"",ref:null==y?void 0:y(e,t)},N)),null==h?void 0:h(e.centroid,e))}),null==r?void 0:r(M),(null==m?void 0:m.foreground)&&b.default.createElement(t2,t9({graticule:function(e){return w(e)||""}},m)),(null==g?void 0:g.foreground)&&b.default.createElement(t2,t9({lines:function(e){return w(e)||""}},g)),(null==x?void 0:x.foreground)&&b.default.createElement(t2,t9({outline:function(e){return w(e)||""}},x)))}function t6(e){return b.default.createElement(t7,e)}t7.propTypes={data:D.default.array.isRequired,projectionFunc:D.default.func,clipAngle:D.default.number,scale:D.default.number,precision:D.default.number,centroid:D.default.func,className:D.default.string,children:D.default.func,innerRef:D.default.func,pointRadius:D.default.number};var t8=e.i(1987325);e.i(1421629);var t4=e.i(9282859);function ne(){return(ne=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function nt(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nn(e,t){return(nn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ni(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var nr={width:"100%",height:"100%"},ns=e.i(3704339),na=e.i(3298992),na=na,no=Math.abs,nl=Math.PI;function nc(e){return e>0?Math.sqrt(e):0}function nu(e,t){var n=e*e,i=t*t;return[e*(1-.162388*i)*(.87-952426e-9*n*n),t*(1+i/12)]}nc(2),nc(nl),nu.invert=function(e,t){var n,i=e,r=t,s=50;do{var a=r*r;r-=n=(r*(1+a/12)-t)/(1+a/4)}while(no(n)>1e-6&&--s>0)s=50,e/=1-.162388*a;do{var o=(o=i*i)*o;i-=n=(i*(.87-952426e-9*o)-e)/(.87-.00476213*o)}while(no(n)>1e-6&&--s>0)return[i,r]};var nd=e.i(1649751),np=e.i(425902);function nf(e){return function(t,n){var i=e((t=(0,nd.hsl)(t)).h,(n=(0,nd.hsl)(n)).h),r=(0,np.default)(t.s,n.s),s=(0,np.default)(t.l,n.l),a=(0,np.default)(t.opacity,n.opacity);return function(e){return t.h=i(e),t.s=r(e),t.l=s(e),t.opacity=a(e),t+""}}}let nh=nf(np.hue);nf(np.default);var nm=e.i(5257115),nm=nm,ng=e.i(6280036);function nx(e){return e}function nv(e,t){var n=t.id,i=t.bbox,r=null==t.properties?{}:t.properties,s=function(e,t){var n=function(e){if(null==e)return nx;var t,n,i=e.scale[0],r=e.scale[1],s=e.translate[0],a=e.translate[1];return function(e,o){o||(t=n=0);var l=2,c=e.length,u=Array(c);for(u[0]=(t+=e[0])*i+s,u[1]=(n+=e[1])*r+a;l<c;)u[l]=e[l],++l;return u}}(e.transform),i=e.arcs;function r(e){return n(e)}function s(e){for(var t=[],r=0,s=e.length;r<s;++r)!function(e,t){t.length&&t.pop();for(var r=i[e<0?~e:e],s=0,a=r.length;s<a;++s)t.push(n(r[s],s));e<0&&function(e,t){for(var n,i=e.length,r=i-t;r<--i;)n=e[r],e[r++]=e[i],e[i]=n}(t,a)}(e[r],t);return t.length<2&&t.push(t[0]),t}function a(e){for(var t=s(e);t.length<4;)t.push(t[0]);return t}function o(e){return e.map(a)}return function e(t){var n,i=t.type;switch(i){case"GeometryCollection":return{type:i,geometries:t.geometries.map(e)};case"Point":n=r(t.coordinates);break;case"MultiPoint":n=t.coordinates.map(r);break;case"LineString":n=s(t.arcs);break;case"MultiLineString":n=t.arcs.map(s);break;case"Polygon":n=o(t.arcs);break;case"MultiPolygon":n=t.arcs.map(o);break;default:return null}return{type:i,coordinates:n}}(t)}(e,t);return null==n&&null==i?{type:"Feature",properties:r,geometry:s}:null==i?{type:"Feature",id:n,properties:r,geometry:s}:{type:"Feature",id:n,bbox:i,properties:r,geometry:s}}var ny=e.i(3645124),nj=e.i(3757830),nb=e.i(1723720),nS=e.i(7489409),nN=e.i(9334638);let nM=(0,nN.withNewIcon)(`<path d="M8.5 10.75C8.5 11.7165 7.7165 12.5 6.75 12.5C5.7835 12.5 5 11.7165 5 10.75C5 9.7835 5.7835 9 6.75 9C7.7165 9 8.5 9.7835 8.5 10.75Z" fill="currentColor"/>
  <path opacity="0.25" fill-rule="evenodd" clip-rule="evenodd" d="M6.75 7C7.7165 7 8.5 6.2165 8.5 5.25C8.5 4.2835 7.7165 3.5 6.75 3.5C5.7835 3.5 5 4.2835 5 5.25C5 6.2165 5.7835 7 6.75 7ZM11.25 9.75C12.2165 9.75 13 8.9665 13 8C13 7.0335 12.2165 6.25 11.25 6.25C10.2835 6.25 9.5 7.0335 9.5 8C9.5 8.9665 10.2835 9.75 11.25 9.75Z" fill="currentColor"/>`),nw=(0,nN.withNewIcon)(`<path fill-rule="evenodd" clip-rule="evenodd" d="M11.25 9.75C12.2165 9.75 13 8.9665 13 8C13 7.0335 12.2165 6.25 11.25 6.25C10.2835 6.25 9.5 7.0335 9.5 8C9.5 8.9665 10.2835 9.75 11.25 9.75ZM6.75 12.5C7.7165 12.5 8.5 11.7165 8.5 10.75C8.5 9.7835 7.7165 9 6.75 9C5.7835 9 5 9.7835 5 10.75C5 11.7165 5.7835 12.5 6.75 12.5Z" fill="currentColor"/>
  <circle opacity="0.25" cx="6.75" cy="5.25" r="1.75" fill="currentColor"/>`),nk=e=>{let t,{className:n,rating:i}=e;switch(i){case"Low":t=(0,a.jsx)(nM,{className:n});break;case"Medium":t=(0,a.jsx)(nw,{className:n});break;case"High":t=(0,a.jsx)(nS.DataPoint,{className:n})}return t},nC=e=>e<50?"Low":e<100?"Medium":"High";function nE(e){let{dataPoints:t}=e,n=(0,b.useMemo)(()=>nC(t),[t]);return(0,a.jsxs)("div",{className:"flex flex-row items-center justify-between rounded bg-background-100 py-1 pl-3 pr-2 text-foreground shadow-tooltip space-x-2",children:[(0,a.jsx)("p",{className:"text-label-12 text-gray-900",children:"Data points"}),(0,a.jsxs)("div",{className:(0,v.clsx)("flex flex-row items-center justify-end flex-initial","High"===n&&"text-green-800","Medium"===n&&"text-amber-800","Low"===n&&"text-red-800"),children:[(0,a.jsx)("p",{className:"text-[12px] leading-[16px] font-medium text-inherit",children:(0,M.formatNumberCompact)(t)}),(0,a.jsx)(nk,{rating:n})]})]})}var nT=e.i(6143247);let nR={[g.Rating.Poor]:"text-red-800 border-red-200",[g.Rating.Improvable]:"text-amber-800 border-amber-200",[g.Rating.Good]:"text-green-800 border-green-200"};function nD(e){let{rating:t,children:n,className:i}=e;return(0,a.jsx)("span",{className:(0,nT.cn)(i,"inline-block rounded border px-1 font-medium",t?nR[t]:"border-gray-200 text-gray-800"),children:n??"â€“"})}function nP(e){let{name:t,left:n,values:i,dateLabel:r}=e;return(0,a.jsxs)(nb.TooltipWithBounds,{className:"pointer-events-none absolute top-10 space-y-1.5",left:n,style:{background:"auto"},top:40,children:[(0,a.jsxs)("div",{className:"flex min-w-[170px] flex-col rounded-md bg-background-100 px-3 py-2 text-foreground shadow-tooltip",children:[(0,a.jsx)("p",{className:"text-label-12 text-gray-900 text-left",children:r}),(0,a.jsx)("p",{className:"text-heading-14 text-gray-1000 mt-0",children:t}),i.length>0?(0,a.jsxs)("div",{className:"flex flex-col items-stretch justify-start flex-initial mt-1 border-t pt-1.5 space-y-1",children:[i.map(e=>{let{label:t,unit:n,value:i,rating:r,highlight:s}=e;return(0,a.jsxs)("div",{className:"flex flex-row items-center justify-start gap-2 flex-initial",children:[(0,a.jsx)("div",{className:(0,nT.cn)("h-2 w-2 rounded-full bg-blue-700",!s&&"border-2 border-blue-700 bg-transparent")}),(0,a.jsx)("p",{className:"text-[14px] leading-[20px] font-medium",children:t}),(0,a.jsx)(nD,{className:"-mr-1",rating:r,children:void 0!==i?(0,a.jsxs)(a.Fragment,{children:[i,n]}):"â€“"})]},t)})," "]}):null]}),(0,a.jsx)(nE,{dataPoints:e.dataPoints})]})}function nI(e){let{data:{name:t,score:n,rating:i},metricDefinition:r}=e;return(0,a.jsxs)("div",{className:"flex-start flex flex-col items-start rounded-md bg-background-100 px-3 py-2 shadow-tooltip",children:[(0,a.jsxs)("div",{className:"flex flex-row items-center justify-between font-bold text-gray-1000",children:[t," "]}),(0,a.jsxs)("p",{className:"flex items-center justify-between text-gray-900",children:[(0,a.jsx)("span",{children:r.name}),(0,a.jsxs)(nD,{className:"-mr-1 ml-2",rating:i,children:[(0,N.formatMetric)(n,r).value," ",r.unit]})]})]})}let n_=(t=nj.default,"string"==typeof(n=nj.default.objects.countries)&&(n=t.objects[n]),"GeometryCollection"===n.type?{type:"FeatureCollection",features:n.geometries.map(function(e){return nv(t,e)})}:nv(t,n));function nA(e){let{isSkeleton:t=!1,metricDefinition:n,scoreData:i,parentHeight:r,parentWidth:s,onClick:o,hoveredCode:l}=e,c=(0,b.useRef)(null),{tooltipData:u,tooltipLeft:d,tooltipTop:p,showTooltip:f,hideTooltip:h}=(0,ns.useTooltip)(),{resolvedTheme:m}=(0,ng.useTheme)(),[x,v]=(0,b.useState)(m);(0,b.useEffect)(()=>{setTimeout(()=>v(m),0)},[m,v]);let y=(0,b.useMemo)(()=>(function(e,t){let n=Object.values(t).flatMap(e=>e.map(e=>{let{datapoints:t}=e;return t})).sort(),i=[Math.min(...n),Math.max(...n)],r=(0,nm.default)(i,nO(e,g.Rating.Good)),s=(0,nm.default)(i,nO(e,g.Rating.Improvable)),a=(0,nm.default)(i,nO(e,g.Rating.Poor)),o=new Map;for(let[e,n]of Object.entries(t))for(let t of n)o.set(t.countryCode,{...t,hoverColor:e===g.Rating.Good?"var(--ds-green-800)":e===g.Rating.Poor?"var(--ds-red-800)":"var(--ds-amber-800)",color:e===g.Rating.Good?r(t.datapoints):e===g.Rating.Poor?a(t.datapoints):s(t.datapoints)});return o})(t,i),[i,x]),j=(0,b.useMemo)(()=>s&&r?(0,na.default)(nu).scale(131.747).fitSize([s,r],n_).rotate([-13,0]):null,[s,r]);return(0,a.jsxs)("div",{className:"absolute",ref:c,children:[s&&r&&j?(0,a.jsx)("svg",{height:r,width:s,children:(0,a.jsx)(t6,{data:n_.features,projection:()=>j,children:e=>(0,a.jsxs)("g",{children:[Array.from({length:8},(e,t)=>(0,a.jsx)("path",{d:`M 0 ${.045*r+r*t/8} H ${s}`,fill:"none",stroke:"var(--ds-gray-200)",strokeWidth:.2},t)),e.features.map(e=>{let{feature:t,path:n}=e,i=y.get(t.properties.code),r=!!l||!!u?.countryCode,s=t.properties.code===l||u?.countryCode===t.properties.code;return(0,a.jsx)("path",{className:"transition-all duration-100",d:n||"",onClick:()=>i&&o?.(i),onMouseLeave:h,onMouseMove:e=>{if(!c.current)return;let t=(0,R.localPoint)(c.current,e);t&&i&&f({tooltipData:i,tooltipLeft:t.x,tooltipTop:t.y})},...function(e){let t,{details:n,isHovered:i,hasHovered:r}=e;return i?t=n?.hoverColor:r||(t=n?.color),{fill:t??"var(--ds-gray-100)",stroke:"var(--ds-gray-300)"}}({details:i,isHovered:s,hasHovered:r}),strokeWidth:.2},t.properties.id)})]})})}):null,u?(0,a.jsxs)(ny.TooltipWithBounds,{className:"space-y-1",isPinned:!1,left:d,offsetLeft:10,offsetTop:-40,top:p,unstyled:!0,children:[(0,a.jsx)(nI,{data:u,metricDefinition:n}),(0,a.jsx)(nE,{dataPoints:u.datapoints})]},Math.random()):null]})}function nO(e,t){if(e)return()=>"--ds-gray-400";let n=getComputedStyle(document.documentElement),i=t===g.Rating.Good?"green":t===g.Rating.Poor?"red":"amber";return nh(`hsl(${n.getPropertyValue(`--ds-${i}-200-value`)})`,`hsl(${n.getPropertyValue(`--ds-${i}-800-value`)})`)}let nL=(r=i=function(e){function t(){for(var t,n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];return ni(nt(t=e.call.apply(e,[this].concat(i))||this),"state",{parentWidth:void 0,parentHeight:void 0}),ni(nt(t),"animationFrameID",0),ni(nt(t),"resizeObserver",void 0),ni(nt(t),"container",null),ni(nt(t),"setRef",function(e){t.container=e}),ni(nt(t),"resize",(0,t8.default)(function(e){var n=e.width,i=e.height;t.setState({parentWidth:n,parentHeight:i})},t.props.debounceTime,{leading:t.props.enableDebounceLeadingCall})),t}t.prototype=Object.create(e.prototype),t.prototype.constructor=t,nn(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this;this.resizeObserver=new t4.ResizeObserver(function(t){t.forEach(function(t){var n=t.contentRect,i=n.width,r=n.height;e.animationFrameID=window.requestAnimationFrame(function(){e.resize({width:i,height:r})})})}),this.container&&this.resizeObserver.observe(this.container)},n.componentWillUnmount=function(){window.cancelAnimationFrame(this.animationFrameID),this.resizeObserver&&this.resizeObserver.disconnect(),this.resize.cancel()},n.render=function(){var e=this.props,t=e.initialWidth,n=e.initialHeight,i=this.state,r=i.parentWidth,s=void 0===r?t:r,a=i.parentHeight,o=void 0===a?n:a;return b.default.createElement("div",{style:nr,ref:this.setRef},null!=s&&null!=o&&b.default.createElement(nA,ne({parentWidth:s,parentHeight:o},this.props)))},t}(b.default.Component),ni(i,"propTypes",{parentWidth:D.default.number,parentHeight:D.default.number,initialWidth:D.default.number,initialHeight:D.default.number}),ni(i,"defaultProps",{debounceTime:300,enableDebounceLeadingCall:!0}),r);var nF=e.i(1319302),n$=e.i(3175682);e.i(1538684);var nz=e.i(109088),nW=e.i(2590593),nG=e.i(2504781),nU=e.i(5468328),nH=e.i(3896684),nB=e.i(992159),nV=e.i(1971436),nQ=e.i(6982071),nK=e.i(7807066),nq=e.i(9734408);let nZ=(0,b.createContext)({isAnAccordion:!0,current:null,onChange:()=>void 0});nZ.displayName="CollapseContext";let nY=nZ.Provider;function nX(e){let{id:t,title:n,className:i,children:r}=e,{isAnAccordion:s,current:o,onChange:l}=(0,b.useContext)(nZ),c=o===t;return s?(0,a.jsxs)(nq.Root,{className:(0,v.clsx)("flex flex-col",c?"flex-1":"bg-background-200",i),onOpenChange:e=>{e||o!==t?e&&l(t):l(null)},open:c,children:[(0,a.jsxs)(nq.Trigger,{className:(0,v.clsx)("flex cursor-pointer items-center px-4 py-2 text-gray-800 space-x-2",c?"bg-transparent":"bg-background-200"),children:[(0,a.jsx)(nK.ChevronRight,{className:c?"rotate-90":""}),(0,a.jsx)("span",{className:"flex-1",children:n})]}),(0,a.jsx)(nq.Content,{className:"flex flex-1 flex-col",children:r})]}):(0,a.jsxs)("div",{className:(0,v.clsx)("flex w-0 flex-1 flex-col",i),children:[(0,a.jsx)("div",{className:"px-4 py-2",children:n}),r]})}function nJ(e){let{initialyExpanded:t,children:n}=e,[i,r]=(0,b.useState)(t??null);return(0,b.useEffect)(()=>r(t??null),[t]),(0,a.jsxs)("div",{className:"tailwind @container",children:[(0,a.jsx)("div",{className:"hidden divide-x @2xl:flex",children:(0,a.jsx)(nY,{value:{current:i,isAnAccordion:!1,onChange:r},children:n})}),(0,a.jsx)("div",{className:(0,v.clsx)("flex flex-col divide-y @2xl:hidden",i&&"h-full",!i&&"-mb-px border-b"),children:(0,a.jsx)(nY,{value:{current:i,isAnAccordion:!0,onChange:r},children:n})})]})}var n0=e.i(5326961),n1=e.i(5761705),n2=e.i(6226725),n5=e.i(9584456),n9=e.i(9386557),n3=e.i(8761240);function n7(e){let{rating:t,className:n}=e;return t===g.Rating.Poor?(0,a.jsx)(n5.StopFill,{className:n,color:"red-900"}):t===g.Rating.Improvable?(0,a.jsx)(n9.WarningFill,{className:n,color:"amber-800"}):(0,a.jsx)(n3.CheckCircleFill,{className:n,color:"green-800"})}let n6={[g.Rating.Poor]:{message:"No poor scores",icon:(0,a.jsx)(n1.CheckCircle,{color:"gray-900",size:20})},[g.Rating.Improvable]:{message:"No needs improvement scores",icon:(0,a.jsx)(n1.CheckCircle,{color:"gray-900",size:20})},[g.Rating.Good]:{message:"No good scores",icon:(0,a.jsx)(n2.CrossCircle,{color:"gray-900",size:20})}};function n8(e){let{emptyIcon:t,emptyMessage:n,formatKey:i,isLoading:r,metricDefinition:s,rowCount:o,rows:l,disabled:c,...u}=e;return(0,a.jsx)(nW.Table,{className:(0,nT.cn)("mb-2",c&&"pointer-events-none"),data:{rows:l},getColumnClassName:(e,t)=>e.rating?"min-w-[80px]":0===t?"min-w-[30px] ml-2":1===t?"min-w-[45px]":void 0,limit:o,primaryIndex:0,renderEmptyState:()=>(0,a.jsx)("div",{className:"flex flex-1 items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"my-8 flex flex-col items-center justify-center space-y-2",children:[t,(0,a.jsx)("p",{className:"text-copy-14 text-gray-900",children:n})]})}),renderItemTitle:e=>(0,a.jsx)(a.Fragment,{children:i(e.key)}),renderRowValue:(e,t)=>0===t?(0,a.jsxs)("div",{className:"flex flex-row items-center",children:[(0,a.jsx)("span",{className:"font-normal text-gray-700",children:(0,M.formatNumberCompact)(e.values[0])}),(0,a.jsx)("span",{className:"text-gray-600",children:(0,a.jsx)(nk,{className:"text-gray-700",rating:nC(e.values[0])})})]}):(0,a.jsxs)("span",{className:"-mr-1.5 inline-block",children:[(0,N.formatMetric)(e.values[t],s).value," ",(0,a.jsx)("span",{className:"font-medium",children:s.unit}),e.rating?(0,a.jsx)(n7,{className:"ml-2 inline",rating:e.rating}):null]}),skeleton:r,style:o?{height:40*o}:{},...u})}var n4=e.i(7791712),ie=e.i(4928763),it=e.i(6891161),ii=e.i(8923565),ir=e.i(2331152);function is(e){let{active:t,metricDefinition:n,onClose:i,title:r}=e,[s,o]=(0,b.useState)(""),[l,c]=(0,b.useState)(e.rating);(0,b.useEffect)(()=>c(e.rating),[e.rating]);let u="selector"===e.by;return(0,a.jsx)(it.Modal,{active:t,onClickOutside:i,style:{overflow:"visible",height:"80vh"},width:600,children:(0,a.jsxs)("div",{className:"tailwind-preflight",style:{display:"contents"},children:[(0,a.jsx)(nW.PanelHeader,{labels:["",n.type],title:r}),(0,a.jsxs)("span",{className:"flex gap-2 p-4",children:[(0,a.jsx)(ie.SearchBar,{className:"flex-1 p-0",initialValue:s,onChangeSearch:e=>o(e.toLocaleLowerCase())}),(0,a.jsx)(ii.Switch,{name:"score",children:[null,...Object.values(g.Rating).filter(e=>e!==g.Rating.Good||!u)].map(e=>(0,a.jsx)(ii.Switch.Control,{defaultChecked:l===e,icon:e?(0,a.jsx)(n7,{rating:e}):void 0,label:e?void 0:"All",onChange:()=>c(e),value:e??"All"},e??"All"))})]}),(0,a.jsx)(it.Modal.Body,{className:"h-[50vh] flex-1 !overflow-hidden @md-page:h-full [&>:first-child]:h-full",padding:!1,children:(0,a.jsx)(ia,{...e,filter:s,rating:l})}),(0,a.jsx)(it.Modal.Actions,{children:(0,a.jsx)(it.Modal.Action,{fullWidth:!0,onClick:i,children:"Close"})})]})})}function ia(e){let{filter:t,by:n,formatKey:i,initialData:r,rating:s,...o}=e,l=(0,T.useApiParams)(),{data:c,isLoading:u}=E({type:n,limit:300,tz:(0,M.getClientTimezone)(),...l}),d=(0,b.useMemo)(()=>{let e=(u?r:c)??{},n=(s?e[s]?.map(e=>({...e,rating:s})):(0,N.mergeAllRatings)(c))??[];return""===t?n:n.filter(e=>{let{key:n}=e,r=i(n);return("string"==typeof r?r:n).toLowerCase().includes(t)})},[c,u,r,i,t,s]);return(0,a.jsx)(n8,{emptyIcon:s&&0===t.length?n6[s].icon:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ir.MagnifyingGlass,{}),(0,a.jsx)("span",{className:"font-medium",children:"No results found"})]}),emptyMessage:s&&0===t.length?n6[s].message:`Your search for "${t}" did not return any results.`,formatKey:i,rows:d,...o})}let io={[g.Rating.Poor]:{color:"text-red-900",text:"Poor"},[g.Rating.Improvable]:{color:"text-amber-900",text:"Needs Improvement"},[g.Rating.Good]:{color:"text-green-900",text:"Great"}},il={default:[{key:"/home",values:[934,35]},{key:"/checkout",values:[500,47]},{key:"/landing",values:[254,32]},{key:"/cart",values:[109,24]},{key:"/product",values:[10,38]}],country:[{key:"DE",values:[934,35]},{key:"JP",values:[500,47]},{key:"BR",values:[254,32]},{key:"KY",values:[109,24]},{key:"KE",values:[10,38]}]};function ic(e){let{rating:t,count:n,thresholds:i,metricDefinition:r}=e,{color:s,text:o}=io[t],l=(0,N.formatMetric)(i.poor,r),c=(0,N.formatMetric)(i.good,r),u=i.poor<i.good,d=u?["<",">"]:[">","<"],p=u?[l.value,c.value]:[c.value,l.value],f={[g.Rating.Poor]:`${d[0]}${l.full}`,[g.Rating.Improvable]:`${p[0]} - ${p[1]}${c.unit}`,[g.Rating.Good]:`${d[1]}${c.full}`};return(0,a.jsxs)("div",{className:"flex flex-1 items-center justify-between overflow-hidden px-1 py-2 space-x-2",children:[(0,a.jsxs)("div",{className:"flex items-center truncate",children:[(0,a.jsx)(n7,{className:"mr-2 shrink-0",rating:t}),(0,a.jsx)("p",{className:(0,nT.cn)("text-copy-14 flex-1 shrink truncate",s),children:(0,a.jsx)("span",{className:"truncate font-medium",children:o})}),void 0!==n?(0,a.jsxs)("p",{className:(0,nT.cn)("text-copy-14 ml-0.5 inline-block",s),children:["(",n,")"]}):null]}),(0,a.jsx)("p",{className:"text-copy-14 text-gray-800 whitespace-nowrap",children:f[t]})]})}function iu(e){let{rating:t,insignificantCount:n,thresholds:i,rowCount:r=7,onShowMore:s,className:o,additionalContent:l,disabled:c,...u}=e,{rows:d,metricDefinition:p}=u,f=d.length<r&&n>0;return(0,a.jsx)(nX,{className:o,id:t,title:(0,a.jsx)(ic,{metricDefinition:p,rating:t,thresholds:i}),children:(0,a.jsxs)("div",{className:"relative flex flex-1 flex-col",children:[c?(0,a.jsx)(b.Suspense,{children:(0,a.jsx)(ib,{})}):null,(0,a.jsx)(n8,{...u,disabled:c,emptyMessage:u.emptyMessage+(n>0?" Â¹":""),rowCount:r,rows:d}),d.length>r||n?(0,a.jsx)(nW.ViewAllButton,{className:"bottom-4",onClick:c?()=>void 0:s}):null,f?(0,a.jsx)("div",{className:"absolute inset-x-0 bottom-0 flex items-center justify-center pb-2",children:(0,a.jsxs)("span",{className:"text-gray-800 text-xs font-medium",children:[0===d.length&&"Â¹ ","Some with insignificant traffic"," ","(<0.5%)"]})}):null,l]})})}function id(e){let{title:t,by:n,metricDefinitions:i,perTableLimit:r,onRowHover:s}=e,[o,l]=(0,b.useState)(null),[c,u]=(0,b.useState)(!1),d="selector"===n;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ig,{by:n,children:[g.Rating.Poor,g.Rating.Improvable,...d?[]:[g.Rating.Good]].map(e=>(0,a.jsx)(ip,{by:n,metricDefinitions:i,onRowHover:s,perTableLimit:r,rating:e,setShowMoreRating:l,setShowMoreVisible:u},e))}),(0,a.jsx)(b.Suspense,{children:(0,a.jsx)(ij,{by:n,metricDefinitions:i,setShowMoreVisible:u,showMoreRating:o,showMoreVisible:c,title:t})})]})}function ip(e){return(0,a.jsx)(b.Suspense,{fallback:(0,a.jsx)(iu,{additionalContent:null,emptyIcon:(0,a.jsx)(y.Skeleton,{}),emptyMessage:"",formatKey:()=>void 0,insignificantCount:0,isLoading:!0,metricDefinition:e.metricDefinitions[g.MetricType.RES],rating:e.rating,rowCount:e.perTableLimit,rows:[],thresholds:e.metricDefinitions[g.MetricType.RES].thresholds[g.DeviceType.Desktop]}),children:(0,a.jsx)(im,{...e})})}function ih(e){let{by:t,hostname:n,key:i}=e;return"Unknown"===i?(0,a.jsx)(nU.Tooltip,{text:"This data was not collected in the previous version of Speed Insights. Please migrate to the @vercel/speed-insights package.",children:(0,a.jsx)("span",{className:"mr-px inline-block border-b border-dashed border-gray-700",title:"",children:"Unknown"})}):"country"===t?(0,M.getCountryName)(i):"route"===t?(0,a.jsx)(nF.RouteHighlighter,{route:i}):"selector"===t?i:(0,a.jsx)("a",{className:(0,nT.cn)("text-black no-underline ",n&&"hover:underline"),href:n?`https://${n||""}${i}`:"#",target:"_blank noopener noreferrer",children:i})}function im(e){let{by:t,metricDefinitions:n,onRowHover:i,perTableLimit:r,rating:s,setShowMoreRating:o,setShowMoreVisible:l}=e,c=(0,T.useApiParams)(),{data:u,isLoading:d}=E({type:t,limit:51,tz:(0,M.getClientTimezone)(),...c}),{supportsPlus:f,hasSpeedInsightsPlusOrRemainingDays:h,hasData:m,isLoading:x}=(0,n0.useSpeedInsightsStatus)(),{state:v,set:y}=(0,p.useSpeedInsightsUrlState)(),j=(0,S.useHostname)(),N=iy(u),w=n[c.metric],k=(0,b.useMemo)(()=>!!v[t],[v,t]),C=(0,b.useMemo)(()=>!!(v.country||v.path||v.route),[v]),R=k&&u?.[s]?.length===1,D=k&&u?.[s]?.length===0,{emptyIcon:P,emptyMessage:I}=function(e){let{noData:t,hasFilter:n,rating:i}=e;return t?{emptyIcon:(0,a.jsx)(nH.ChartActivity,{className:"!text-gray-700"}),emptyMessage:"No data available"}:n?{emptyIcon:(0,a.jsx)(nB.Filter,{className:"!text-gray-700"}),emptyMessage:"No results for active filter"}:{emptyIcon:n6[i].icon,emptyMessage:n6[i].message}}({noData:!m&&!d&&!x,hasFilter:C,rating:s}),_=(0,b.useMemo)(()=>f&&!h&&s===g.Rating.Poor,[f,h,s]),{rows:A,insignificantCount:O}=N[s],L=(0,n$.useCopyAction)(),F=(0,b.useCallback)(e=>[L({text:e.key}),{icon:R?(0,a.jsx)(nz.FilterOffSmall,{}):(0,a.jsx)(nV.FilterSmall,{}),label:R?"Remove filter":"Filter",onClick(){R?y({[t]:void 0}):y({[t]:e.key})}}],[R,L,t,y]);return(0,a.jsx)(iu,{className:D?"bg-background-200 text-opacity-50":"",disabled:_,emptyIcon:P,emptyMessage:I,formatKey:e=>ih({by:t,hostname:j,key:e}),insignificantCount:O,isLoading:d,metricDefinition:w,buildActions:F,onRowHover:i,onShowMore:()=>{o(s),l(!0)},rating:s,rowCount:R?1:r,rows:_?il[t]??il.default:A,thresholds:w.thresholds[v.device]},s)}function ig(e){let{by:t,children:n}=e;return(0,a.jsx)(b.Suspense,{fallback:(0,a.jsx)(nJ,{initialyExpanded:g.Rating.Good,children:n}),children:(0,a.jsx)(ix,{by:t,children:n})})}function ix(e){let{by:t,children:n}=e,i=(0,T.useApiParams)(),{data:r}=E({type:t,limit:51,tz:(0,M.getClientTimezone)(),...i}),s=iy(r),o=(0,b.useMemo)(()=>s[g.Rating.Poor].rows.length>0?g.Rating.Poor:s[g.Rating.Improvable].rows.length>0?g.Rating.Improvable:g.Rating.Good,[s]);return(0,a.jsx)(nJ,{initialyExpanded:o,children:n})}function iv(e){return(0,b.useMemo)(()=>{let t=Object.values(e??{}).flat();return(0,M.createPercentages)(t,e=>e.values[0])},[e])}function iy(e){let t=iv(e),n={[g.Rating.Poor]:{rows:[],insignificantCount:0},[g.Rating.Improvable]:{rows:[],insignificantCount:0},[g.Rating.Good]:{rows:[],insignificantCount:0}};for(let i of[g.Rating.Poor,g.Rating.Improvable,g.Rating.Good]){let r=0,s=[];for(let n of e?.[i]??[]){let{relativeToMax:e}=t(n);e<.005?r++:s.push(n)}n[i]={rows:s,insignificantCount:r}}return n}function ij(e){let{by:t,metricDefinitions:n,setShowMoreVisible:i,showMoreRating:r,showMoreVisible:s,title:o}=e,l=(0,T.useApiParams)(),{data:c}=E({type:t,limit:51,tz:(0,M.getClientTimezone)(),...l}),{state:u,set:d}=(0,p.useSpeedInsightsUrlState)(),f=(0,S.useHostname)(),h=iv(c),m=n[l.metric],g=(0,b.useMemo)(()=>!!u[t],[u,t]),x=(0,n$.useCopyAction)(),v=(0,b.useCallback)(e=>[x({text:e.key}),{icon:g?(0,a.jsx)(nz.FilterOffSmall,{}):(0,a.jsx)(nV.FilterSmall,{}),label:g?"Remove filter":"Filter",onClick(){g?d({[t]:void 0}):(i(!1),d({[t]:e.key}))}}],[g,x,t,d,i]);return(0,a.jsx)(is,{active:s,by:t,formatKey:e=>ih({by:t,hostname:f,key:e}),getPercentages:h,initialData:c,metricDefinition:m,onClose:()=>i(!1),buildActions:v,rating:r,title:o})}function ib(){let{openEnableModal:e,EnableModal:t}=(0,n4.useOpenEnableModal)();return(0,a.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-gradient-to-b from-background-100/50 via-background-100/80 to-background-100 z-10",children:[(0,a.jsx)(nG.Button,{className:"group/lock",shadow:!0,shape:"rounded",size:"small",type:"secondary",onClick:e,prefix:(0,a.jsxs)("span",{className:"relative",children:[(0,a.jsx)("div",{className:"h-[7px] origin-[90%,50%] overflow-hidden transition-transform duration-150 group-hover/lock:translate-x-1 group-hover/lock:-scale-x-100",children:(0,a.jsx)(nQ.LockClosedSmall,{className:"size-4"})}),(0,a.jsx)("div",{className:"h-[9px] overflow-hidden",children:(0,a.jsx)(nQ.LockClosedSmall,{className:"mt-[-7px]"})})]}),children:"Unlock with Plus"}),t]})}function iS(e){let{metricDefinitions:t}=e,n="Countries",[i,r]=(0,b.useState)(null);return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"border-b px-6 py-4 font-semibold",children:n}),(0,a.jsxs)("div",{className:"grid border-b divide-y @lg-page:grid-cols-[auto_350px] @lg-page:divide-x @lg-page:divide-y-0",children:[(0,a.jsx)("div",{className:"relative max-h-[400px] min-h-[240px] max-w-full overflow-hidden py-2 @md-page:max-h-[550px] @md-page:min-h-[382px]",children:(0,a.jsx)(iN,{hoveredCode:i?.key,metricDefinitions:t})}),(0,a.jsx)(id,{by:"country",metricDefinitions:t,onRowHover:r,perTableLimit:5,title:n})]})]})}function iN(e){return(0,a.jsx)(b.Suspense,{fallback:(0,a.jsx)(nA,{isSkeleton:!0,metricDefinition:e.metricDefinitions[g.MetricType.RES],parentHeight:366,parentWidth:622,scoreData:{good:[],improvable:[],poor:[]}}),children:(0,a.jsx)(iM,{...e})})}function iM(e){let{hoveredCode:t,metricDefinitions:n}=e,{set:i}=(0,p.useSpeedInsightsUrlState)(),r=(0,T.useApiParams)(),{data:s}=E({type:"country",limit:200,tz:(0,M.getClientTimezone)(),...r}),o=n[r.metric];return(0,a.jsx)(nL,{hoveredCode:t,metricDefinition:o,onClick:e=>i({country:e.countryCode}),scoreData:function(e){let t={[g.Rating.Good]:[],[g.Rating.Improvable]:[],[g.Rating.Poor]:[]};for(let[n,i]of Object.entries(e??{}))for(let{key:e,values:[r,s]}of i)t[n].push({countryCode:e,score:s,datapoints:r,name:(0,M.getCountryName)(e),rating:n});return t}(s)})}var iw=e.i(1108511),ik=e.i(3207969),iC=e.i(4237893);function iE(e){let{metricDefinitions:t}=e,[n,i]=(0,b.useState)("route"),{state:r}=(0,p.useSpeedInsightsUrlState)(),s=ik.MetricsWithAttributionSelectors.includes(r.metric);return(0,b.useEffect)(()=>{s||"selector"!==n||i("route")},[s,n]),(0,a.jsxs)("div",{className:"border-b",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between border-b px-6",children:[(0,a.jsx)(iC.Tabs,{border:!1,selected:n,setSelected:i,tabs:[{title:"Routes",value:"route"},{title:"Paths",value:"path"},...s?[{title:"Selectors",value:"selector"}]:[]]}),(0,a.jsx)(iT,{metricDefinitions:t})]}),(0,a.jsx)(id,{by:n,metricDefinitions:t,title:"route"===n?"Routes":"Paths"})]})}function iT(e){let{metricDefinitions:t}=e;return(0,a.jsx)(b.Suspense,{fallback:(0,a.jsx)(nW.HeaderLabels,{labels:[t[g.MetricType.RES].type]}),children:(0,a.jsx)(iR,{metricDefinitions:t})})}function iR(e){let{metricDefinitions:t}=e,n=t[(0,T.useApiParams)().metric];return(0,a.jsx)(nW.HeaderLabels,{labels:[n.type]})}var iD=e.i(8471522),iP=e.i(7218483);function iI(e){let{dataPoints:t,className:n,lastUpdated:i,isLoading:r}=e,s=(0,iP.useAgo)(Number(i),{justNowThreshold:3e4,justNowLabel:"just now"}),o=nC(t);return(0,a.jsxs)("div",{className:(0,v.clsx)("flex flex-col justify-between gap-4 px-3 align-middle text-sm text-gray-900","text-center @md-page:flex-row @md-page:text-left",n),children:[0!==t||r?(0,a.jsxs)("span",{children:["This report is based on"," ",r?(0,a.jsx)(y.Skeleton,{className:"mx-1 inline-block align-middle",height:18,width:55}):(0,a.jsxs)("span",{className:(0,v.clsx)("whitespace-nowrap","Low"===o&&"text-red-800","Medium"===o&&"text-amber-800"),children:[(0,a.jsx)(nk,{className:"-mt-px mr-px inline ",rating:o}),(0,a.jsx)("span",{className:"font-medium",children:(0,M.formatNumber)(t)})]}),(0,a.jsx)("span",{children:" data points"})]}):(0,a.jsx)("span",{children:"No data points collected"}),s?(0,a.jsxs)("span",{className:"text-gray-800",children:[" Updated ",s||"just now"]}):(0,a.jsx)(y.Skeleton,{autoSize:!1,height:18,style:{height:18},width:90})]})}var i_=e.i(9031150),iA=e.i(3322724),iO=e.i(8861835),iL=e.i(4573068);function iF(e,t,n){var i=e._x1-e._x0,r=t-e._x1,s=(e._y1-e._y0)/(i||r<0&&-0),a=(n-e._y1)/(r||i<0&&-0);return((s<0?-1:1)+(a<0?-1:1))*Math.min(Math.abs(s),Math.abs(a),.5*Math.abs((s*r+a*i)/(i+r)))||0}function i$(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function iz(e,t,n){var i=e._x0,r=e._y0,s=e._x1,a=e._y1,o=(s-i)/3;e._context.bezierCurveTo(i+o,r+o*t,s-o,a-o*n,s,a)}function iW(e){this._context=e}function iG(e){this._context=e}function iU(e){return new iW(e)}iW.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:iz(this,this._t0,i$(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t*=1,(e*=1)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,iz(this,i$(this,n=iF(this,e,t)),n);break;default:iz(this,this._t0,n=iF(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},((function(e){this._context=new iG(e)}).prototype=Object.create(iW.prototype)).point=function(e,t){iW.prototype.point.call(this,t,e)},iG.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,i,r,s){this._context.bezierCurveTo(t,e,i,n,s,r)}};var iH=["children","id","from","to","x1","y1","x2","y2","fromOffset","fromOpacity","toOffset","toOpacity","rotate","transform","vertical"];function iB(){return(iB=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function iV(e){var t=e.children,n=e.id,i=e.from,r=e.to,s=e.x1,a=e.y1,o=e.x2,l=e.y2,c=e.fromOffset,u=e.fromOpacity,d=e.toOffset,p=e.toOpacity,f=e.rotate,h=e.transform,m=e.vertical,g=function(e,t){if(null==e)return{};var n,i,r={},s=Object.keys(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,iH),x=s,v=o,y=a,j=l;return void 0!==m&&!m||x||v||y||j||(x="0",v="0",y="0",j="1"),b.default.createElement("defs",null,b.default.createElement("linearGradient",iB({id:n,x1:x,y1:y,x2:v,y2:j,gradientTransform:f?"rotate("+f+")":h},g),!!t&&t,!t&&b.default.createElement("stop",{offset:void 0===c?"0%":c,stopColor:i,stopOpacity:void 0===u?1:u}),!t&&b.default.createElement("stop",{offset:void 0===d?"100%":d,stopColor:r,stopOpacity:void 0===p?1:p})))}iV.propTypes={id:D.default.string.isRequired,from:D.default.string,to:D.default.string,x1:D.default.oneOfType([D.default.string,D.default.number]),x2:D.default.oneOfType([D.default.string,D.default.number]),y1:D.default.oneOfType([D.default.string,D.default.number]),y2:D.default.oneOfType([D.default.string,D.default.number]),fromOffset:D.default.oneOfType([D.default.string,D.default.number]),fromOpacity:D.default.oneOfType([D.default.string,D.default.number]),toOffset:D.default.oneOfType([D.default.string,D.default.number]),toOpacity:D.default.oneOfType([D.default.string,D.default.number]),rotate:D.default.oneOfType([D.default.string,D.default.number]),transform:D.default.string,children:D.default.node,vertical:D.default.bool};var iQ=e.i(8587628),iK=e.i(9310550),iq=e.i(3489437),iZ=e.i(9629316),iY=e.i(1888408),iX=e.i(1766947),iJ=e.i(4778584),i0=e.i(4862514),i1=e.i(7013170),i2=e.i(1246255),i5=e.i(8125826),i9=e.i(4085287),i3=e.i(5076449);function i7(e){return e}var i6=e.i(388027),i8=e.i(9375869),i4=e.i(2982888),re=e.i(8529990);let rt=(0,b.forwardRef)((e,t)=>{let{deployments:n,dateLabel:i,onMouseEnter:r,onMouseLeave:s,onTitleClick:o,left:l,bottom:c}=e;return(0,a.jsx)(nb.TooltipWithBounds,{className:"tooltip pointer-events-none absolute flex items-end justify-center py-3",left:l,offsetLeft:8,style:{width:300,height:c},top:0,children:(0,a.jsxs)("div",{className:"tooltip pointer-events-auto flex max-h-44 max-w-full flex-col rounded-md bg-background-100 text-foreground shadow-tooltip",onMouseEnter:r,onMouseLeave:s,ref:t,children:[(0,a.jsxs)("div",{className:"py-x flex items-center justify-between border-b p-1 pr-3",children:[(0,a.jsx)(nG.Button,{onClick:o,size:"small",type:"tertiary",children:(0,a.jsxs)("p",{className:"text-[14px] leading-[20px] font-medium",children:["Deployments",(0,a.jsx)("span",{className:"text-copy-14",children:n?.length?` (${n.length})`:""})]})}),(0,a.jsx)("p",{className:"text-copy-14 text-gray-800",children:i})]}),(0,a.jsx)("div",{className:"w-full flex-1 overflow-y-auto overflow-x-hidden px-3 py-2 space-y-3",children:n?.length?n.map(e=>(0,a.jsx)(rn,{deployment:e},e.url)):(0,a.jsx)("p",{className:"text-copy-14 text-gray-900",children:"No production deployments"})})]})})});function rn(e){let{deployment:t}=e,n=(0,re.getGitInfoFromDeployment)(t),i=(0,i8.useDeploymentLink)(t);return n?(0,a.jsxs)("div",{className:"my-1 flex w-full space-x-2",children:[(0,a.jsx)(i4.DeploymentCreatorAvatar,{deployment:t}),(0,a.jsx)(m.Link,{className:"truncate",href:i,title:n.commitMessage,variant:"underline",children:n.commitMessage})]},t.url):null}rt.displayName="DeploymentsTooltip";var ri=e.i(8901547);function rr(e){let{value:t,formattedValue:n,x:i,y:r,thresholds:s}=e,o={dominantBaseline:"middle",fontSize:12,textAnchor:"end",x:-16,y:r};return t===s?.good?(0,a.jsxs)("g",{children:[(0,a.jsx)("circle",{cx:i,cy:r,fill:"var(--ds-green-700)",r:3}),(0,a.jsx)(i0.Text,{...o,fill:"var(--ds-green-700)",fontWeight:500,children:n})]}):t===s?.poor?(0,a.jsxs)("g",{children:[(0,a.jsx)(i0.Text,{...o,fill:"var(--ds-amber-800)",fontWeight:500,children:n}),(0,a.jsx)("path",{d:`M${i-3},${r-3} L${i+3},${r-3} L${i},${r+3} Z`,fill:"var(--ds-amber-800)",transform:`rotate(180, ${i}, ${r})`})]}):(0,a.jsx)("g",{children:(0,a.jsx)("text",{...o,fill:"var(--accents-4)",x:-10,children:n})})}function rs(e){let{className:t,data:n,width:i,metric:r,activeDevice:s,activePercentiles:l,height:c,hasFilters:u,deployments:d,dateRange:{from:p,to:f},onClickFindDeployments:h,onSelectionChange:m}=e,x=(0,iA.useIsMobile)(),y=(0,b.useRef)(null),j=(0,b.useRef)(null),S=(0,b.useRef)(!1),{resolvedTheme:M}=(0,ng.useTheme)(),[w,k]=(0,b.useState)(null),C=Math.max(i-60-30,0),E=Math.max(c-25-50,0),T=(0,o.getGranularity)(p,f),D=r.type,P=(0,b.useMemo)(()=>d?d.map(e=>({date:new Date(e.createdAt),...e})).filter(e=>e.date>=p&&e.date<=f):[],[d,p,f]),I=(0,b.useMemo)(()=>(function(e){for(var t,n,i,r,s=arguments.length,a=Array(s>1?s-1:0),o=1;o<s;o++)a[o-1]=arguments[o];return t=e,n=i7,i=i7,r=a,function e(t,s){if(s>=r.length)return i(t);let a=new i3.InternMap,o=r[s++],l=-1;for(let e of t){let n=o(e,++l,t),i=a.get(n);i?i.push(e):a.set(n,[e])}for(let[t,n]of a)a.set(t,e(n,s));return n(a)}(t,0)})(P,e=>(0,o.roundDateWithGranularity)(e.date,T).toString()),[P,T]),_=(0,b.useMemo)(()=>Array.from(I.values(),e=>(0,o.roundDateWithGranularity)(e[0].date,T)),[T,I]),A=(0,b.useCallback)(e=>e.date,[]),O=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:75;return e[D]?.[`p${t}`]??NaN},L=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:75;return t=>!isNaN(t[r.type]?.[`p${e}`]??NaN)},F=L(),$=r.thresholds[s]??r.thresholds,z=(0,i5.bisector)(e=>e.date),W=z.left.bind(z),[G,U]=(0,i9.extent)(n,A),H=[p<G?p:G,U],B=(0,iZ.scaleTime)({range:[0,C],domain:H}),V=Math.max(...l),Q=u?1.05:1,K=(0,iq.scaleLinear)({domain:r.type===g.MetricType.RES?[0,100*Q]:[0,Math.max((0,i6.max)(n,e=>e[r.type]?.[`p${V}`])??1,1.03*$.poor)*Q],range:[E,0],nice:!0}),q=(0,ns.useTooltip)(),{tooltipData:Z,tooltipLeft:Y}=q,X=(0,b.useCallback)(()=>{setTimeout(()=>{S.current||q.hideTooltip()},0)},[q]),J=e=>{if(0===n.length||!y.current)return void q.hideTooltip();let t=(0,R.localPoint)(y.current,e)||{x:0,y:0};if(t.y>E+25)return void X();let i=B.invert(t.x-60),r=n[0];if(n.length>1){let e=W(n,i,1),t=n[e-1],s=n[e];if(!s||!A(s))return;r=i.valueOf()-t.date.valueOf()>s.date.valueOf()-i.valueOf()?s:t}r.range=(0,o.formatWithGranularity)(r.date,T);let s=B(A(r)),a=I.get((0,o.roundDateWithGranularity)(r.date,T).toString());r.deployments=a;let l=t.y>K(0)-32;r.inDeploymentArea=l,q.showTooltip({tooltipData:r,tooltipLeft:s})},ee=n.reduce((e,t)=>r.type in t?t:e,void 0),et="dark"===M?"var(--ds-gray-400)":"#D9D9D9",en=Z?.inDeploymentArea&&Z.deployments?.length,ei=Z?en?(0,a.jsx)(rt,{bottom:K(0),dateLabel:(0,o.formatRangeWithGranularity)(Z.date,T),deployments:Z.deployments,left:(Y??0)+60,onMouseEnter:()=>{S.current=!0},onMouseLeave:()=>{S.current=!1},onTitleClick:()=>{let e=(0,o.getDateRangeFromGranularity)(Z.date,T);h?.(e)},ref:j}):(0,a.jsx)(nP,{dataPoints:Z[D]?.datapoints||0,dateLabel:(0,o.formatWithGranularity)(Z.date,T,!0),left:(Y??0)+60,name:r.name,values:L()(Z)?l.map(e=>{let t=O(Z,e);return{value:(0,N.formatMetric)(t,r).value,unit:r.unit,label:`P${e}`,rating:(0,N.getRatingForThresholds)(r.thresholds[s],t),highlight:75===e}}):l.map(e=>({value:void 0,unit:r.unit,rating:void 0,label:`P${e}`,highlight:75===e}))}):null,er=(0,b.useMemo)(()=>24>=(0,i1.differenceInHours)(f,p),[p,f]);return(0,a.jsxs)("div",{className:(0,v.clsx)(t,"relative *:select-none"),children:[(0,a.jsxs)("svg",{height:c,onMouseDown:(0,i_.withAwaitPaint)(()=>{er||x||Z&&k(Z.date)}),onMouseLeave:(0,i_.withAwaitPaint)(()=>{X(),er||k(null)}),onMouseMove:(0,i_.withAwaitPaint)(J),onMouseUp:(0,i_.withAwaitPaint)(()=>{if(er||!w||!Z)return;let e=(0,o.roundDateWithGranularity)(w,T),t=(0,o.roundDateWithGranularity)(Z.date,T);if(e>t&&([e,t]=[t,e]),e.getTime()!==t.getTime()){let n=(0,i2.subMinutes)((0,o.getDateRangeFromGranularity)(t,T).to,1);m?.([e,n])}k(null)}),onTouchMove:(0,i_.withAwaitPaint)(J),onTouchStart:e=>{e.preventDefault()},ref:y,width:"100%",children:[(0,a.jsx)(iV,{from:et,fromOpacity:0,id:"deployment-line-gradient",to:et,toOffset:80,vertical:!0}),(0,a.jsx)(iV,{from:"var(--ds-gray-400)",fromOpacity:.2,id:"deployment-line-active",to:"var(--ds-gray-1000)",vertical:!0}),(0,a.jsx)(iV,{from:"var(--ds-background-100)",id:"deployment-fade-gradient",to:"var(--ds-gray-100)",width:C}),(0,a.jsx)("clipPath",{id:"deployment-circles",children:(0,a.jsx)("rect",{height:32,width:C+20,x:-10,y:K(0)-32})}),(0,a.jsxs)(iK.Group,{left:60,top:25,children:[0!==_.length&&(0,a.jsx)("rect",{fill:"url('#deployment-fade-gradient')",height:32,opacity:en?1:.5,style:{transition:"opacity 0.2s ease-in-out"},width:C,x:0,y:K(0)-32}),(0,a.jsx)(iL.AxisLeft,{hideTicks:!0,numTicks:2,scale:K,stroke:"var(--accents-2)",tickComponent:rr,tickFormat:e=>{let{value:t,unit:n}=(0,N.formatMetric)(e.valueOf(),r);return`${t}${n}`},tickLabelProps:e=>({dx:"-0.5em",dy:"0.25em",fill:"var(--accents-4)",fontSize:12,textAnchor:"end",thresholds:$,value:Number(e)}),tickValues:[$.good,$.poor,...K.ticks(1)]}),(0,a.jsx)(iQ.GridRows,{numTicks:3,pointerEvents:"none",scale:K,stroke:"var(--accents-2)",width:C}),(0,a.jsx)("path",{d:`M 0 ${K($.poor)} H ${C}`,stroke:"var(--ds-amber-700)",strokeDasharray:4,strokeWidth:1}),(0,a.jsx)("path",{d:`M 0 ${K($.good)} H ${C}`,stroke:"var(--ds-green-700)",strokeDasharray:4,strokeWidth:1}),w&&Z?.date&&!er?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("rect",{fill:"var(--geist-success)",fillOpacity:.1,height:E,pointerEvents:"none",width:Math.abs(B(Z.date)-B(w)),x:Math.min(B(w),B(Z.date)),y:0}),(0,a.jsx)(iX.Line,{from:{x:B(w),y:0},opacity:.2,pointerEvents:"none",stroke:"var(--geist-success)",strokeWidth:1.5,to:{x:B(w),y:E}})]}):null,(0,a.jsx)(iK.Group,{children:0!==n.length&&0!==_.length&&_.map((e,t)=>{let n=Z&&en&&(0,o.roundDateWithGranularity)(e,T).toString()===(0,o.roundDateWithGranularity)(Z.date,T).toString();return(0,a.jsx)(iK.Group,{clipPath:"url(#deployment-circles)",children:(0,a.jsxs)("g",{className:ri.default.slideUpAnimation,style:{animationDelay:`${25*t}ms`},children:[!n&&(0,a.jsx)("rect",{fill:"url('#deployment-line-gradient')",height:30,width:1.5,x:B(e)-.75,y:K(0)-30}),(0,a.jsx)(iY.Circle,{cx:B(e),cy:K(0),fill:n?"var(--ds-gray-1000)":"var(--ds-gray-500)",onClick:()=>{let t=(0,o.getDateRangeFromGranularity)(e,T);h?.(t)},r:n?4:3,style:{transition:"all 0.05s ease-in-out"}})]})},`deployments-${e.toString()}`)})}),l.includes(75)&&n.map(e=>F(e)?(0,a.jsx)("circle",{cx:B(A(e)),cy:K(O(e)),fill:"var(--accents-3)",r:2},`p-${A(e).toString()}`):null),l.map(e=>(0,a.jsx)(b.Fragment,{children:(0,a.jsx)(iJ.LinePath,{curve:iU,data:n,defined:L(e),opacity:en?.5:1,stroke:"var(--geist-success)",strokeWidth:75===e?2:1,x:e=>B(A(e)),y:t=>K(O(t,e))})},e)),0!==n.length&&[...l].reverse().map(e=>(0,a.jsxs)(b.Fragment,{children:[l.length>1&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("rect",{height:"20",rx:"5",ry:"5",style:{fill:"var(--geist-background)",opacity:.8,filter:"blur(5px)"},width:"30",x:(ee?B(A(ee)):C)-27,y:K(ee?O(ee,e):0)-20}),(0,a.jsx)(i0.Text,{color:"gray-1000",fill:"var(--geist-success)",fontSize:12,fontWeight:500,textAnchor:"end",x:ee?B(A(ee)):C,y:K(ee?O(ee,e):0)-5,children:`P${e.toString()}`},e)]}),ee?(0,a.jsx)(iY.Circle,{cx:B(A(ee)),cy:K(O(ee,e)),fill:"var(--geist-success)",r:3}):null]},`active-p-${e}`)),(0,a.jsx)(iO.AxisBottom,{hideAxisLine:!0,hideTicks:!0,numTicks:x||T===g.Granularity.Month?2:6,scale:B,tickFormat:e=>(0,o.formatWithGranularity)(e,0===e.getHours()&&T===g.Granularity.Hour?g.Granularity.Day:T),tickLabelProps:()=>({dy:"0.25em",dx:"0.4em",fill:"var(--accents-4)",fontSize:12,textAnchor:"middle"}),top:E}),Z?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("rect",{fill:en?"url(#deployment-line-active)":"var(--ds-gray-1000)",height:E,width:2,x:(Y||0)-1,y:0}),!en&&F(Z)&&l.map(e=>(0,a.jsx)(iY.Circle,{cx:Y,cy:K(O(Z,e)),fill:"var(--geist-success)",pointerEvents:"none",r:4},e))]}):null]})]}),ei]})}var ra=e.i(1113594);function ro(){let{state:e}=(0,p.useSpeedInsightsUrlState)(),{device:t}=e;return(0,a.jsx)("p",{className:"text-copy-14 text-gray-800",children:(0,N.getLabelForDevice)(t)})}function rl(){return(0,a.jsx)(b.Suspense,{fallback:(0,a.jsx)("p",{className:"text-copy-14 text-gray-800",children:(0,N.getLabelForDevice)(g.DeviceType.Desktop)}),children:(0,a.jsx)(ro,{})})}function rc(e){let{metricDefinitions:t}=e,{metric:n}=(0,T.useApiParams)(),{state:i}=(0,p.useSpeedInsightsUrlState)(),{device:r}=i,s=t[n];return(0,a.jsx)("p",{className:"text-copy-14 text-gray-900",children:(0,N.getMetricDescription)(s,r)})}function ru(e){return(0,a.jsx)(b.Suspense,{fallback:(0,a.jsx)("p",{className:"text-copy-14 text-gray-900",children:(0,N.getMetricDescription)(e.metricDefinitions[g.MetricType.RES],g.DeviceType.Desktop)}),children:(0,a.jsx)(rc,{...e})})}function rd(e){let{metricDefinitions:t}=e,{state:n}=(0,p.useSpeedInsightsUrlState)(),{hasData:i}=(0,n0.useSpeedInsightsStatus)(),{metric:r}=(0,T.useApiParams)(),{data:s,isLoading:o}=(0,iw.useTimeseriesWithQueryParams)(),{device:l}=n;return(0,a.jsx)(ra.MetricDisplay,{className:"h-20",device:l,hasData:i,isLoading:o,metric:r,metricDefinitions:t,size:"large",values:s?.overview},r)}function rp(e){return(0,a.jsx)(b.Suspense,{fallback:(0,a.jsx)(ra.MetricDisplay,{className:"h-20",device:g.DeviceType.Desktop,hasData:!1,isLoading:!0,metric:"RES",metricDefinitions:e.metricDefinitions,size:"large"}),children:(0,a.jsx)(rd,{...e})})}function rf(e){let{metricDefinitions:t}=e,{state:n}=(0,p.useSpeedInsightsUrlState)(),{data:i}=(0,iw.useTimeseriesWithQueryParams)(),{metric:r}=(0,T.useApiParams)();if(!(0,p.canMetricBeFiltered)(r,n))return(0,a.jsxs)("p",{className:"text-copy-14 text-amber-900",children:[t[r].name," does not support attribution selectors."]});let{overview:s}=i||{};if(!s)return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(y.Skeleton,{height:20,width:50}),(0,a.jsx)(y.Skeleton,{height:20,width:80})]});let{device:o}=n,l=s[r]?.p75;if(!l)return null;let c=t[r],u=c.thresholds[o],d=(0,N.getRatingForThresholds)(u,l),f=u.good<u.poor,h={good:(0,N.formatMetric)(u.good,c).full,poor:(0,N.formatMetric)(u.poor,c).full},m={[g.Rating.Poor]:f?`Above ${h.poor}`:`Below ${h.poor}`,[g.Rating.Improvable]:f?`Above ${h.good}`:`Below ${h.good}`,[g.Rating.Good]:f?`Below ${h.good}`:`Above ${h.good}`};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{className:"text-heading-14",children:(0,N.getLabelForRating)(d)}),(0,a.jsxs)("div",{className:"flex flex-row items-center justify-start gap-2 flex-initial",children:[(0,a.jsx)(n7,{rating:d}),(0,a.jsx)("p",{className:"text-copy-14 text-gray-900",children:m[d]})]})]})}function rh(e){return(0,a.jsx)(b.Suspense,{fallback:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(y.Skeleton,{height:20,width:50}),(0,a.jsx)(y.Skeleton,{height:20,width:80})]}),children:(0,a.jsx)(rf,{...e})})}function rm(e){let{metricDefinitions:t}=e,{state:n}=(0,p.useSpeedInsightsUrlState)(),{metric:i}=(0,T.useApiParams)(),{data:r,isLoading:s}=(0,iw.useTimeseriesWithQueryParams)(),{isEnabled:o,microfrontendsDataInDefaultApp:l}=(0,n0.useSpeedInsightsStatus)(),{overview:c}=r||{},{device:u}=n,d=c?.[i],f=t[i],h=f.thresholds[u],x=d?.p75||0,j=(0,N.getRatingForThresholds)(h,x),b=(r?.timeseries??[]).some(e=>i in e);if(s)return(0,a.jsx)(y.Skeleton,{animated:s,height:"20px",width:"70%"});if(l)return null;if(!d||!b||!(0,p.canMetricBeFiltered)(i,n)){var S;let e,{color:t,label:i}=(S=n,e="text-gray-900",o?(0,N.isDisplayingRecentData)(S)?{color:"text-amber-900",label:(0,a.jsxs)(a.Fragment,{children:["No data available. Make sure you are using the latest @vercel/speed-insights package.",(0,a.jsx)(m.Link,{external:!0,href:"/docs/speed-insights/quickstart#add-@vercel/speed-insights-to-your-project",variant:"highlight",children:"Learn more"})]})}:{color:e,label:"No data available for the selected filters."}:{color:e,label:"No data collected yet."});return(0,a.jsx)("p",{className:(0,v.clsx)("text-copy-14",t),children:i})}return(0,a.jsxs)("p",{className:"text-copy-14 text-gray-900",children:[j===g.Rating.Good?"More":"Less",f.type===g.MetricType.RES?" than 75% of visits had a great experience.":` than 75% of visits scored a great ${f.type}.`]})}function rg(e){return(0,a.jsx)(b.Suspense,{fallback:(0,a.jsx)(y.Skeleton,{animated:!0,height:"20px",width:"70%"}),children:(0,a.jsx)(rm,{...e})})}function rx(e){let{metricDefinitions:t}=e,{metric:n}=(0,T.useApiParams)(),i=t[n],{data:r}=(0,iw.useTimeseriesWithQueryParams)(),{state:{device:s}}=(0,p.useSpeedInsightsUrlState)(),o=i.type===g.MetricType.RES?function(e,t,n){if(!t||!e)return e;let i=new URL(e,"http://acme.com");for(let e of["FCP","LCP","CLS","INP"])t[e]&&i.searchParams.append(e,t[e].p75.toString());return i.searchParams.append("device",n?.toString()??"desktop"),i.toString().replace(i.origin,"")}(i.learnMoreLink,r?.overview,s):i.learnMoreLink;return(0,a.jsxs)(m.Link,{external:!0,href:o,variant:"highlight",children:["Learn more about ",i.type]})}function rv(e){return(0,a.jsx)(b.Suspense,{fallback:(0,a.jsxs)(m.Link,{external:!0,href:e.metricDefinitions[g.MetricType.RES].learnMoreLink,variant:"highlight",children:["Learn more about ",e.metricDefinitions[g.MetricType.RES].type]}),children:(0,a.jsx)(rx,{...e})})}function ry(e){let{metricDefinitions:t}=e,{metric:n}=(0,T.useApiParams)(),i=t[n];return(0,a.jsx)("p",{className:"text-heading-24",children:i.name})}function rj(e){return(0,a.jsx)(b.Suspense,{fallback:(0,a.jsx)("p",{className:"text-heading-24",children:e.metricDefinitions[g.MetricType.RES].name}),children:(0,a.jsx)(ry,{...e})})}function rb(e){let{isLoading:t}=(0,iw.useTimeseriesWithQueryParams)();return(0,a.jsx)("div",{...e,className:`flex flex-col items-stretch justify-start gap-1 flex-initial ${(0,v.clsx)(!t&&"no-skeleton-animations")}`,children:e.children})}function rS(e){return(0,a.jsx)(b.Suspense,{fallback:(0,a.jsx)("div",{...e,className:"flex flex-col items-stretch justify-start gap-1 flex-initial",children:e.children}),children:(0,a.jsx)(rb,{...e})})}function rN(e){let{metricDefinitions:t,className:n}=e;return(0,a.jsxs)("div",{className:(0,v.clsx)("flex flex-col items-stretch justify-start gap-2 p-3",n),children:[(0,a.jsx)(rl,{}),(0,a.jsx)(rj,{metricDefinitions:t}),(0,a.jsx)(rp,{metricDefinitions:t}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(rS,{children:(0,a.jsx)(rh,{metricDefinitions:t})}),(0,a.jsx)(rg,{metricDefinitions:t})]}),(0,a.jsx)("hr",{className:"my-4 mr-6 border-0 border-b border-gray-100"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(ru,{metricDefinitions:t}),(0,a.jsx)(rv,{metricDefinitions:t})]})]})]})}function rM(e){let{height:t,width:n,metricDefinitions:i}=e,r=(0,j.useRouter)(),{set:s,state:c}=(0,p.useSpeedInsightsUrlState)(),{data:u}=(0,iw.useTimeseriesWithQueryParams)(),d=(0,j.useParams)(),{metric:m}=(0,T.useApiParams)(),{activePercentiles:x}=(0,b.useContext)(S.SpeedInsightsContext),{data:v}=(0,h.useProject)(d?.project),{data:y}=(0,f.default)({limit:function(e){let{period:t,...n}=e,{from:i,to:r}=n.from&&n.to?{from:n.from,to:n.to}:(0,l.getRangeFromPeriod)(t);return(0,o.getGranularity)(i,r)===g.Granularity.Hour?25:100}(c),until:c.to?.getTime()??null,target:"production",projectId:v?.id||""}),N=(0,b.useMemo)(()=>y?.deployments&&"production"===c.environment?y.deployments:[],[y,c.environment]),M=(0,b.useMemo)(()=>p.speedInsightsFilterKeys.some(e=>c[e]),[c]),{timeseries:w}=u||{},{device:k,period:C,from:E,to:R}=c,D=i[m];return(0,a.jsx)(rs,{activeDevice:k,activePercentiles:x,data:w??[],dateRange:E&&R?{from:E,to:R}:(0,l.getRangeFromPeriod)(C),deployments:N,hasFilters:M,height:t||400,metric:D,onClickFindDeployments:function(e){let t={start:e.from,end:e.to},n=d?.teamSlug,i=d?.project;n&&i&&r.push(`/${String(n)}/${String(i)}/deployments?range=${encodeURIComponent(JSON.stringify(t))}&environment=production`)},onSelectionChange:e=>{s({from:e[0],to:e[1]})},width:n||573})}function rw(e){let t={from:new Date,to:new Date};return(0,a.jsx)(b.Suspense,{fallback:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(rs,{activeDevice:g.DeviceType.Desktop,activePercentiles:[75],className:"block @md-page:hidden",data:[],dateRange:t,deployments:void 0,hasFilters:!1,height:300,metric:e.metricDefinitions[g.MetricType.RES],width:560}),(0,a.jsx)(rs,{activeDevice:g.DeviceType.Desktop,activePercentiles:[75],className:"hidden @md-page:block",data:[],dateRange:t,deployments:void 0,hasFilters:!1,height:400,metric:e.metricDefinitions[g.MetricType.RES],width:600})]}),children:(0,a.jsx)(rM,{...e})})}function rk(){let{metric:e}=(0,T.useApiParams)(),{data:t,isLoading:n}=(0,iw.useTimeseriesWithQueryParams)(),{timeseries:i}=t||{},r=(0,b.useMemo)(()=>{if(!n&&t)return new Date},[n,t]);return(0,a.jsx)(iI,{className:"mt-4",dataPoints:i?.reduce((t,n)=>t+(n[e]?.datapoints??0),0)??0,isLoading:n,lastUpdated:r})}function rC(){return(0,a.jsx)(b.Suspense,{fallback:(0,a.jsx)(iI,{className:"mt-4",dataPoints:0,isLoading:!0}),children:(0,a.jsx)(rk,{})})}function rE(e){let{children:t}=e,{hasData:n}=(0,n0.useSpeedInsightsStatus)(),{isLoading:i}=(0,iw.useTimeseriesWithQueryParams)();return(0,a.jsx)("div",{className:(0,v.clsx)("relative -mx-6 flex h-[300px] @md-page:mx-0 @md-page:h-[400px]",!n&&!i&&"opacity-75 grayscale"),children:t})}function rT(e){return(0,a.jsx)(b.Suspense,{fallback:(0,a.jsx)("div",{className:"relative -mx-6 flex h-[300px] opacity-75 grayscale @md-page:mx-0 @md-page:h-[400px]",...e}),children:(0,a.jsx)(rE,{...e})})}e.s(["MetricView",0,function(e){let{metricDefinitions:t}=e,{activePercentiles:n,setActivePercentiles:i}=(0,b.useContext)(S.SpeedInsightsContext),r=(0,j.useParams)(),{data:o}=(0,h.useProject)(r?.project),l=o?.microfrontends?.enabled&&!o.microfrontends.isDefaultApp&&!o.microfrontends.routeObservabilityToThisProject;return(0,a.jsxs)("div",{className:"flex-1 rounded bg-background-100 px-3 py-4 shadow-md",children:[(0,a.jsxs)("div",{className:"flex flex-col @md-page:flex-row items-stretch justify-start gap-2",children:[(0,a.jsx)(rN,{className:"mb-2 flex-[4] @md-page:mb-0",metricDefinitions:t}),(0,a.jsxs)("div",{className:"relative flex-[7] px-2",children:[(0,a.jsxs)("div",{className:"flex flex-col-reverse justify-end gap-4 @md-page:flex-row",children:[(0,a.jsx)("div",{className:"flex justify-end",children:[75,90,95,99].map(e=>{let t=n.includes(e);return(0,a.jsxs)("button",{className:(0,v.clsx)("rounded-sm","mx-0 my-1 cursor-pointer border-none bg-transparent text-sm",t?"text-blue-900":"text-gray-700 hover:text-gray-900"),onClick:()=>{i(t?n.filter(t=>t!==e):[...n,e].sort())},children:[(0,a.jsx)("span",{className:(0,v.clsx)("inline-block size-2 rounded-full ",t?"bg-blue-800":"border")})," ","P",e]},e)})}),"true"===s.default.env.NEXT_PUBLIC_TESTMODE||"true"===s.default.env.NEXT_PUBLIC_TESTSERVER||"1"!==s.default.env.NEXT_PUBLIC_DASH?(0,a.jsx)(iD.RangePicker,{}):null]}),(0,a.jsx)(rT,{children:(0,a.jsxs)(c.ErrorBoundary,{fallback:(0,a.jsx)("div",{className:"my-2 flex size-full items-center justify-center rounded-md bg-red-100 text-red-900",children:(0,a.jsx)("span",{children:"Error loading graph. Please reload."})}),children:[(0,a.jsx)(x.ParentSize,{children:e=>{let{width:n,height:i}=e;return(0,a.jsx)(rw,{height:i,metricDefinitions:t,width:n})}}),(0,a.jsx)("div",{className:"absolute w-full px-1 @md-page:px-0",children:(0,a.jsx)(u.MobileScrollWrapper,{className:"my-2 w-full",contentClassName:"pb-3 pr-3 px-2 @md-page:px-0 @md-page:pr-px",children:(0,a.jsx)(b.Suspense,{children:(0,a.jsx)(d.SpeedInsightsFilters,{})})})})]})})]})]}),l?null:(0,a.jsxs)("div",{className:"-mx-3",children:[(0,a.jsx)(iE,{metricDefinitions:t}),(0,a.jsx)(iS,{metricDefinitions:t})]}),(0,a.jsx)(rC,{})]})}],5835580)},8638855,e=>{"use strict";var t=e.i(1381818),n=e.i(1053524),i=e.i(5838627),r=e.i(8522580),s=e.i(57106),a=e.i(7808943),o=e.i(2327481),l=e.i(1138941),c=e.i(3969752),u=e.i(5326961),d=e.i(7977213);let p={migration:{title:"Migrate to our new package",description:(0,t.jsxs)("p",{children:["Get the most out of Speed Insights by upgrading to our new package."," ",(0,t.jsx)("br",{}),(0,t.jsx)(s.Link,{external:!0,href:"/docs/speed-insights/migrating-from-legacy",variant:"highlight",children:"Learn more about the migration from legacy Speed Insights."})," "]}),dissmisable:!0},new:{title:"Get Started",description:"To start collecting performance metrics, follow these steps.",dissmisable:!1}},f=[{id:"nextjs",name:"Next.js",addStep:{snippet:'import { SpeedInsights } from "@vercel/speed-insights/next"',title:"Add the Next.js component",description:(0,t.jsxs)(t.Fragment,{children:["Import and use the ",(0,t.jsx)(a.default,{children:"<SpeedInsights/>"})," ","Next.js component into your app's layout or your main file."]})}},{id:"sveltekit",name:"SvelteKit",addStep:{snippet:`import { injectSpeedInsights } from '@vercel/speed-insights/sveltekit';

injectSpeedInsights();`,title:"Use Sveltekit function",description:(0,t.jsxs)(t.Fragment,{children:["Import and use the ",(0,t.jsx)(a.default,{children:"injectSpeedInsights"})," ","sveltekit function in your layout file."]})}},{id:"remix",name:"Remix",addStep:{snippet:'import { SpeedInsights } from "@vercel/speed-insights/remix"',title:"Add the Remix component",description:(0,t.jsxs)(t.Fragment,{children:["Import and use the ",(0,t.jsx)(a.default,{children:"<SpeedInsights/>"})," Remix component into your root file."]})}},{id:"astro",name:"Astro",addStep:{snippet:'import  SpeedInsights  from "@vercel/speed-insights/astro"',title:"Add the Astro component",description:(0,t.jsxs)(t.Fragment,{children:["Import and use the ",(0,t.jsx)(a.default,{children:"<SpeedInsights/>"})," Astro component into one of your Astro layout."]})}},{id:"nuxtjs",name:"Nuxt",addStep:{snippet:'import { SpeedInsights } from "@vercel/speed-insights/nuxt"',title:"Add the Nuxt component",description:(0,t.jsxs)(t.Fragment,{children:["Import and use the ",(0,t.jsx)(a.default,{children:"<SpeedInsights/>"})," Nuxt component into your default layout."]})}},{id:"vue",name:"Vue.js",addStep:{snippet:'import { SpeedInsights } from "@vercel/speed-insights/vue"',title:"Add the Vue component",description:(0,t.jsxs)(t.Fragment,{children:["Import and use the ",(0,t.jsx)(a.default,{children:"<SpeedInsights/>"})," Vue component into your main app template."]})}},{id:"create-react-app",name:"React",addStep:{snippet:'import { SpeedInsights } from "@vercel/speed-insights/react"',title:"Add the React component",description:(0,t.jsxs)(t.Fragment,{children:["Import and use the ",(0,t.jsx)(a.default,{children:"<SpeedInsights/>"})," React component into your main file."]})}},{id:"other",name:"Other",addStep:{snippet:`import { injectSpeedInsights } from '@vercel/speed-insights';

injectSpeedInsights();`,title:"Use injectSpeedInsights()",description:(0,t.jsxs)(t.Fragment,{children:["Import and call the ",(0,t.jsx)(a.default,{children:"injectSpeedInsights()"})," ","function once, on the client side."]})}}];e.s(["Onboarding",0,function(){let{isEnabled:e,isLoading:h,hasData:m,receivedDataFromPackage:g,isLegacyEnabled:x,legacySampleRate:v,microfrontendsDataInDefaultApp:y,dsn:j}=(0,u.useSpeedInsightsStatus)(),b=(0,l.useProjectIdOrName)(),S=(0,l.useIsExternal)(b),N=e&&!h&&!m&&!g,M=e&&!h&&x&&!g,w=(0,n.useMemo)(()=>f.map(e=>{let{id:n,name:o,addStep:l}=e;return{id:n,name:o,icon:(0,t.jsx)("div",{}),steps:function(e,n){let{snippet:o,title:l,description:u}=e,{isExternal:d,dsn:p,legacySampleRate:f}=n,h=void 0!==f&&100!==f,m=!o.includes("injectSpeedInsights"),g=m?`<SpeedInsights dsn="${p||""}" />`:`injectSpeedInsights({ dsn: "${p||""}" })`,x=(0,t.jsxs)(r.Note,{className:"mt-4",type:"warning",children:["To keep your sample rate, ",m?"add ":"include the ",(0,t.jsx)(a.default,{children:m?`sampleRate={${(f??0)/100}}`:`sampleRate: ${(f??0)/100}`}),m?" as a prop to the component.":" option when calling the function."]});return[{title:"Install our package",content:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("span",{children:"Start by installing @vercel/speed-insights in your existing project."}),(0,t.jsx)(c.DependencySnippet,{dependency:"@vercel/speed-insights"})]})},{title:(0,t.jsx)("span",{className:"whitespace-nowrap",children:l}),content:(0,t.jsxs)("span",{children:[u,(0,t.jsx)(i.CodeBlock,{className:"grid",hideLineNumbers:!0,language:"javascript",textToCopy:o,children:o}),d?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("span",{children:["Add the ",(0,t.jsx)(a.default,{children:"dsn"})," property when self-hosting."]}),(0,t.jsx)(i.CodeBlock,{className:"grid",hideLineNumbers:!0,language:m?"jsx":"javascript",textToCopy:g,children:g})]}):null,(0,t.jsxs)("span",{children:["For full examples and further reference, please refer to our"," ",(0,t.jsx)(s.Link,{external:!0,href:"/docs/speed-insights/quickstart#add-the-speedinsights-component-to-your-app",variant:"highlight",children:"documentation"})]}),h?x:null]})},{title:"Deploy & Visit your Site",content:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("p",{children:"Deploy your changes and visit the deployment to collect your first data points."}),(0,t.jsx)("p",{className:"text-gray-900",children:"If you don't see data after 30 seconds, please check for content blockers and try to navigate between pages on your site."})]})}]}(l,{legacySampleRate:v,isExternal:S,dsn:j})}}),[v,S,j]),k=(0,n.useMemo)(()=>p[M?"migration":"new"],[M]);return(0,t.jsx)(o.Onboarding,{...k,agentInstallationType:d.InstallationType.SpeedInsights,frameworks:w,visible:N||M})}])}]);

//# debugId=0caa2d8b-aaf1-4f47-5465-1b6f34f59dd4
//# sourceMappingURL=93519c22a3d3c42c.js.map